"use strict";(self.webpackChunklacorda_github_io=self.webpackChunklacorda_github_io||[]).push([[7621],{58860:(e,a,t)=>{t.d(a,{xA:()=>i,yg:()=>u});var n=t(37953);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function g(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?g(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},g=Object.keys(e);for(n=0;n<g.length;n++)t=g[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(n=0;n<g.length;n++)t=g[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=n.createContext({}),m=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},i=function(e){var a=m(e.components);return n.createElement(o.Provider,{value:a},e.children)},s="mdxType",y={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,g=e.originalType,o=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),s=m(t),c=r,u=s["".concat(o,".").concat(c)]||s[c]||y[c]||g;return t?n.createElement(u,l(l({ref:a},i),{},{components:t})):n.createElement(u,l({ref:a},i))}));function u(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var g=t.length,l=new Array(g);l[0]=c;var p={};for(var o in a)hasOwnProperty.call(a,o)&&(p[o]=a[o]);p.originalType=e,p[s]="string"==typeof e?e:r,l[1]=p;for(var m=2;m<g;m++)l[m]=t[m];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},44924:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>o,contentTitle:()=>l,default:()=>y,frontMatter:()=>g,metadata:()=>p,toc:()=>m});var n=t(75890),r=(t(37953),t(58860));const g={},l="\u5c06Rust\u7f16\u8bd1\u4e3aWASM",p={unversionedId:"WASM/\u5c06Rust\u7f16\u8bd1\u6210WASM",id:"WASM/\u5c06Rust\u7f16\u8bd1\u6210WASM",title:"\u5c06Rust\u7f16\u8bd1\u4e3aWASM",description:"\u7f16\u8bd1\u5de5\u5177cargo\u4e0ewasm-pack",source:"@site/05.other/01.WASM/02.\u5c06Rust\u7f16\u8bd1\u6210WASM.md",sourceDirName:"01.WASM",slug:"/WASM/\u5c06Rust\u7f16\u8bd1\u6210WASM",permalink:"/other/WASM/\u5c06Rust\u7f16\u8bd1\u6210WASM",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"WASM\u7b80\u4ecb",permalink:"/other/WASM/\u7b80\u4ecb"},next:{title:"Trae builder\u5b9e\u8df5\u6307\u5357",permalink:"/other/WASM/\u4f7f\u7528Trae\u5b8c\u6210wasm\u89c6\u9891\u6ee4\u955c\u9879\u76ee"}},o={},m=[{value:"\u7f16\u8bd1\u5de5\u5177cargo\u4e0ewasm-pack",id:"\u7f16\u8bd1\u5de5\u5177cargo\u4e0ewasm-pack",level:2},{value:"<strong>\u4e00\u3001\u7f16\u8bd1\u5de5\u5177\u5bf9\u6bd4</strong>",id:"\u4e00\u7f16\u8bd1\u5de5\u5177\u5bf9\u6bd4",level:3},{value:"<strong>\u4e8c\u3001\u751f\u6210\u7684\u6587\u4ef6\u540d</strong>",id:"\u4e8c\u751f\u6210\u7684\u6587\u4ef6\u540d",level:3},{value:"<strong>1. \u4f7f\u7528 <code>wasm-pack</code></strong>",id:"1-\u4f7f\u7528-wasm-pack",level:4},{value:"<strong>2. \u4f7f\u7528 <code>cargo</code></strong>",id:"2-\u4f7f\u7528-cargo",level:4},{value:"<strong>\u4e09\u3001\u5de5\u5177\u8be6\u7ec6\u8bf4\u660e</strong>",id:"\u4e09\u5de5\u5177\u8be6\u7ec6\u8bf4\u660e",level:3},{value:"<strong>1. wasm-pack</strong>",id:"1-wasm-pack",level:4},{value:"<strong>2. cargo</strong>",id:"2-cargo",level:4},{value:"<strong>\u56db\u3001\u4f7f\u7528\u573a\u666f\u5bf9\u6bd4</strong>",id:"\u56db\u4f7f\u7528\u573a\u666f\u5bf9\u6bd4",level:3},{value:"<strong>\u4e94\u3001\u793a\u4f8b\u5bf9\u6bd4</strong>",id:"\u4e94\u793a\u4f8b\u5bf9\u6bd4",level:3},{value:"<strong>1. wasm-pack \u751f\u6210\u6587\u4ef6\u7ed3\u6784</strong>",id:"1-wasm-pack-\u751f\u6210\u6587\u4ef6\u7ed3\u6784",level:4},{value:"<strong>2. cargo \u751f\u6210\u6587\u4ef6\u7ed3\u6784</strong>",id:"2-cargo-\u751f\u6210\u6587\u4ef6\u7ed3\u6784",level:4},{value:"<strong>\u516d\u3001\u603b\u7ed3</strong>",id:"\u516d\u603b\u7ed3",level:3}],i={toc:m},s="wrapper";function y(e){let{components:a,...t}=e;return(0,r.yg)(s,(0,n.A)({},i,t,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"\u5c06rust\u7f16\u8bd1\u4e3awasm"},"\u5c06Rust\u7f16\u8bd1\u4e3aWASM"),(0,r.yg)("h2",{id:"\u7f16\u8bd1\u5de5\u5177cargo\u4e0ewasm-pack"},"\u7f16\u8bd1\u5de5\u5177cargo\u4e0ewasm-pack"),(0,r.yg)("h3",{id:"\u4e00\u7f16\u8bd1\u5de5\u5177\u5bf9\u6bd4"},(0,r.yg)("strong",{parentName:"h3"},"\u4e00\u3001\u7f16\u8bd1\u5de5\u5177\u5bf9\u6bd4")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u5de5\u5177")),(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u4f5c\u7528")),(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u9002\u7528\u573a\u666f")))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"td"},"wasm-pack")),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u4e13\u4e3a Rust \u751f\u6210 WASM \u8bbe\u8ba1\uff0c\u81ea\u52a8\u5904\u7406\u7f16\u8bd1\u3001\u751f\u6210 JavaScript \u7ed1\u5b9a\u548c npm \u5305\u914d\u7f6e"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u9700\u8981\u4e0e JavaScript \u4ea4\u4e92\u7684 Web \u5e94\u7528")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"td"},"cargo")),(0,r.yg)("td",{parentName:"tr",align:"center"},"Rust \u5b98\u65b9\u5305\u7ba1\u7406\u5668\uff0c\u9700\u624b\u52a8\u6307\u5b9a\u7f16\u8bd1\u76ee\u6807 (",(0,r.yg)("inlineCode",{parentName:"td"},"wasm32-unknown-unknown"),") \u751f\u6210 WASM"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u901a\u7528\u7f16\u8bd1\uff0c\u6216\u9700\u8981\u81ea\u5b9a\u4e49\u6784\u5efa\u6d41\u7a0b")))),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"\u4e8c\u751f\u6210\u7684\u6587\u4ef6\u540d"},(0,r.yg)("strong",{parentName:"h3"},"\u4e8c\u3001\u751f\u6210\u7684\u6587\u4ef6\u540d")),(0,r.yg)("h4",{id:"1-\u4f7f\u7528-wasm-pack"},(0,r.yg)("strong",{parentName:"h4"},"1. \u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"strong"},"wasm-pack"))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u8f93\u51fa\u76ee\u5f55"),"\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"pkg/"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u6587\u4ef6\u540d\u89c4\u5219"),"\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"<crate-name>.wasm")," + JavaScript \u7ed1\u5b9a\u6587\u4ef6\uff08\u5982 ",(0,r.yg)("inlineCode",{parentName:"p"},"wasm_example_bg.wasm"),"\u3001",(0,r.yg)("inlineCode",{parentName:"p"},"wasm_example.js"),"\uff09"),(0,r.yg)("p",{parentName:"li"},"\u793a\u4f8b"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"wasm-pack build --target web\n# \u751f\u6210 pkg/wasm_example_bg.wasm \u548c pkg/wasm_example.js\n")))),(0,r.yg)("h4",{id:"2-\u4f7f\u7528-cargo"},(0,r.yg)("strong",{parentName:"h4"},"2. \u4f7f\u7528 ",(0,r.yg)("inlineCode",{parentName:"strong"},"cargo"))),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u8f93\u51fa\u76ee\u5f55"),"\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"target/wasm32-unknown-unknown/release/"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"\u6587\u4ef6\u540d\u89c4\u5219"),"\uff1a",(0,r.yg)("inlineCode",{parentName:"p"},"<crate-name>.wasm")),(0,r.yg)("p",{parentName:"li"},"\u793a\u4f8b"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cargo build --target wasm32-unknown-unknown --release\n# \u751f\u6210 target/wasm32-unknown-unknown/release/example.wasm\n")))),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"\u4e09\u5de5\u5177\u8be6\u7ec6\u8bf4\u660e"},(0,r.yg)("strong",{parentName:"h3"},"\u4e09\u3001\u5de5\u5177\u8be6\u7ec6\u8bf4\u660e")),(0,r.yg)("h4",{id:"1-wasm-pack"},(0,r.yg)("strong",{parentName:"h4"},"1. wasm-pack")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u6838\u5fc3\u529f\u80fd\uff1a"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"\u81ea\u52a8\u7f16\u8bd1 Rust \u4ee3\u7801\u4e3a WASM\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u751f\u6210 JavaScript \u7ed1\u5b9a\u4ee3\u7801\uff08\u901a\u8fc7 ",(0,r.yg)("inlineCode",{parentName:"li"},"wasm-bindgen"),"\uff09\uff0c\u652f\u6301\u5728\u6d4f\u89c8\u5668\u6216 Node.js \u4e2d\u8c03\u7528\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u521b\u5efa ",(0,r.yg)("inlineCode",{parentName:"li"},"package.json")," \u548c ",(0,r.yg)("inlineCode",{parentName:"li"},"webpack")," \u914d\u7f6e\uff0c\u65b9\u4fbf\u53d1\u5e03\u5230 npm\u3002"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u5178\u578b\u547d\u4ee4"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"wasm-pack build --target web  # \u751f\u6210\u6d4f\u89c8\u5668\u517c\u5bb9\u7684 WASM \u548c JS \u7ed1\u5b9a\nwasm-pack build --target nodejs  # \u751f\u6210 Node.js \u517c\u5bb9\u7684 WASM\n")))),(0,r.yg)("h4",{id:"2-cargo"},(0,r.yg)("strong",{parentName:"h4"},"2. cargo")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u6838\u5fc3\u529f\u80fd\uff1a"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"\u901a\u7528 Rust \u6784\u5efa\u5de5\u5177\uff0c\u9700\u624b\u52a8\u914d\u7f6e\u7f16\u8bd1\u76ee\u6807\u3002"),(0,r.yg)("li",{parentName:"ul"},"\u751f\u6210\u7eaf WASM \u6587\u4ef6\uff0c\u65e0\u81ea\u52a8\u751f\u6210\u7684 JavaScript \u7ed1\u5b9a\u3002"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"\u914d\u7f6e\u6b65\u9aa4\uff1a"),(0,r.yg)("ol",{parentName:"li"},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5728 ",(0,r.yg)("inlineCode",{parentName:"p"},"Cargo.toml")," \u4e2d\u6dfb\u52a0 ",(0,r.yg)("inlineCode",{parentName:"p"},'crate-type = ["cdylib"]'),"\u3002")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u5b89\u88c5\u76ee\u6807\u5e73\u53f0\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"rustup target add wasm32-unknown-unknown\n"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"\u7f16\u8bd1\uff1a"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cargo build --target wasm32-unknown-unknown --release\n")))))),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"\u56db\u4f7f\u7528\u573a\u666f\u5bf9\u6bd4"},(0,r.yg)("strong",{parentName:"h3"},"\u56db\u3001\u4f7f\u7528\u573a\u666f\u5bf9\u6bd4")),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u573a\u666f")),(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u63a8\u8350\u5de5\u5177")),(0,r.yg)("th",{parentName:"tr",align:"center"},(0,r.yg)("strong",{parentName:"th"},"\u539f\u56e0")))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"\u5f00\u53d1 Web \u5e94\u7528"),(0,r.yg)("td",{parentName:"tr",align:"center"},"wasm-pack"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u81ea\u52a8\u751f\u6210 JS \u7ed1\u5b9a\uff0c\u7b80\u5316\u4e0e\u524d\u7aef\u6846\u67b6\uff08\u5982 React/Vue\uff09\u96c6\u6210")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"\u9700\u8981\u4f18\u5316\u7f16\u8bd1\u6d41\u7a0b"),(0,r.yg)("td",{parentName:"tr",align:"center"},"cargo"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u76f4\u63a5\u63a7\u5236\u7f16\u8bd1\u53c2\u6570\uff0c\u9002\u5408\u5d4c\u5165\u5230\u975e Web \u73af\u5883\uff08\u5982\u6e38\u620f\u5f15\u64ce\u3001\u5d4c\u5165\u5f0f\u7cfb\u7edf\uff09")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"\u53d1\u5e03\u5230 npm"),(0,r.yg)("td",{parentName:"tr",align:"center"},"wasm-pack"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u81ea\u52a8\u751f\u6210\u7b26\u5408 npm \u89c4\u8303\u7684\u5305\u7ed3\u6784\uff0c\u652f\u6301 ",(0,r.yg)("inlineCode",{parentName:"td"},"npm publish"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:"center"},"\u8c03\u8bd5\u6216\u6d4b\u8bd5"),(0,r.yg)("td",{parentName:"tr",align:"center"},"wasm-pack"),(0,r.yg)("td",{parentName:"tr",align:"center"},"\u5185\u7f6e\u5f00\u53d1\u670d\u52a1\u5668\u548c\u6d4b\u8bd5\u5de5\u5177\uff08",(0,r.yg)("inlineCode",{parentName:"td"},"wasm-pack test"),"\uff09")))),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"\u4e94\u793a\u4f8b\u5bf9\u6bd4"},(0,r.yg)("strong",{parentName:"h3"},"\u4e94\u3001\u793a\u4f8b\u5bf9\u6bd4")),(0,r.yg)("h4",{id:"1-wasm-pack-\u751f\u6210\u6587\u4ef6\u7ed3\u6784"},(0,r.yg)("strong",{parentName:"h4"},"1. wasm-pack \u751f\u6210\u6587\u4ef6\u7ed3\u6784")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-markdown"},"project/\n\u251c\u2500\u2500 pkg/\n\u2502   \u251c\u2500\u2500 wasm_example_bg.wasm    # WASM \u4e8c\u8fdb\u5236\n\u2502   \u251c\u2500\u2500 wasm_example.js         # JavaScript \u7ed1\u5b9a\uff08\u81ea\u52a8\u52a0\u8f7d WASM\uff09\n\u2502   \u2514\u2500\u2500 package.json            # npm \u5305\u914d\u7f6e\n\u2514\u2500\u2500 src/\n    \u2514\u2500\u2500 lib.rs                  # Rust \u6e90\u7801\n")),(0,r.yg)("h4",{id:"2-cargo-\u751f\u6210\u6587\u4ef6\u7ed3\u6784"},(0,r.yg)("strong",{parentName:"h4"},"2. cargo \u751f\u6210\u6587\u4ef6\u7ed3\u6784")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-markdown"},"project/\n\u251c\u2500\u2500 target/\n\u2502   \u2514\u2500\u2500 wasm32-unknown-unknown/\n\u2502       \u2514\u2500\u2500 release/\n\u2502           \u2514\u2500\u2500 example.wasm    # \u7eaf WASM \u6587\u4ef6\n\u2514\u2500\u2500 Cargo.toml\n")),(0,r.yg)("hr",null),(0,r.yg)("h3",{id:"\u516d\u603b\u7ed3"},(0,r.yg)("strong",{parentName:"h3"},"\u516d\u3001\u603b\u7ed3")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"wasm-pack"),"\uff1a\u9002\u5408\u9700\u8981\u5feb\u901f\u6784\u5efa WebAssembly \u5e76\u4e0e JavaScript \u4ea4\u4e92\u7684\u573a\u666f\uff0c\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u7684\u5de5\u5177\u94fe\u3002"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"cargo"),"\uff1a\u9002\u5408\u9700\u8981\u7cbe\u7ec6\u63a7\u5236\u7f16\u8bd1\u8fc7\u7a0b\u6216\u751f\u6210\u7eaf WASM \u6587\u4ef6\u7684\u573a\u666f\u3002")))}y.isMDXComponent=!0}}]);