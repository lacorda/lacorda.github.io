"use strict";(self.webpackChunklacorda_github_io=self.webpackChunklacorda_github_io||[]).push([[8159],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>g});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),c=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=c(e.components);return a.createElement(i.Provider,{value:n},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(t),p=r,g=u["".concat(i,".").concat(p)]||u[p]||m[p]||o;return t?a.createElement(g,l(l({ref:n},d),{},{components:t})):a.createElement(g,l({ref:n},d))}));function g(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=p;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[u]="string"==typeof e?e:r,l[1]=s;for(var c=2;c<o;c++)l[c]=t[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},36832:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=t(87462),r=(t(67294),t(3905));const o={},l="runtime \u8fd0\u884c\u65f6",s={unversionedId:"Chrome\u7bc7/Chrome\u63d2\u4ef6/API/runtime",id:"Chrome\u7bc7/Chrome\u63d2\u4ef6/API/runtime",title:"runtime \u8fd0\u884c\u65f6",description:"\u5b98\u65b9\u6587\u6863",source:"@site/01.docs/05.Chrome\u7bc7/02.Chrome\u63d2\u4ef6/03.API/01.runtime.md",sourceDirName:"05.Chrome\u7bc7/02.Chrome\u63d2\u4ef6/03.API",slug:"/Chrome\u7bc7/Chrome\u63d2\u4ef6/API/runtime",permalink:"/docs/Chrome\u7bc7/Chrome\u63d2\u4ef6/API/runtime",draft:!1,editUrl:"https://github.com/lacorda/lacorda.github.io/blob/master/docs/01.docs/05.Chrome\u7bc7/02.Chrome\u63d2\u4ef6/03.API/01.runtime.md",tags:[],version:"current",lastUpdatedBy:"Lacorda",lastUpdatedAt:1704264529,formattedLastUpdatedAt:"2024\u5e741\u67083\u65e5",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"manifest\u914d\u7f6e\u6587\u4ef6",permalink:"/docs/Chrome\u7bc7/Chrome\u63d2\u4ef6/manifest\u914d\u7f6e\u6587\u4ef6"},next:{title:"action \u5de5\u5177\u680f",permalink:"/docs/Chrome\u7bc7/Chrome\u63d2\u4ef6/API/action"}},i={},c=[{value:"\u5c5e\u6027",id:"\u5c5e\u6027",level:2},{value:"id \u5e94\u7528ID",id:"id-\u5e94\u7528id",level:3},{value:"lastError \u9519\u8bef\u4fe1\u606f",id:"lasterror-\u9519\u8bef\u4fe1\u606f",level:3},{value:"\u65b9\u6cd5 - \u83b7\u53d6\u5e94\u7528\u4fe1\u606f",id:"\u65b9\u6cd5---\u83b7\u53d6\u5e94\u7528\u4fe1\u606f",level:2},{value:"getManifest() \u83b7\u53d6manifest.json",id:"getmanifest-\u83b7\u53d6manifestjson",level:3},{value:"getURL() \u83b7\u53d6\u8d44\u6e90\u8def\u5f84",id:"geturl-\u83b7\u53d6\u8d44\u6e90\u8def\u5f84",level:3},{value:"getPlatformInfo() \u83b7\u53d6\u5e73\u53f0\u4fe1\u606f",id:"getplatforminfo-\u83b7\u53d6\u5e73\u53f0\u4fe1\u606f",level:3},{value:"getPackageDirectoryEntry() \u83b7\u53d6\u5305\u76ee\u5f55",id:"getpackagedirectoryentry-\u83b7\u53d6\u5305\u76ee\u5f55",level:3},{value:"getBackgroundPage() \u83b7\u53d6\u540e\u53f0\u9875\u9762",id:"getbackgroundpage-\u83b7\u53d6\u540e\u53f0\u9875\u9762",level:3},{value:"getContexts() \u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f",id:"getcontexts-\u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f",level:3},{value:"\u65b9\u6cd5 - \u64cd\u4f5c\u5e94\u7528",id:"\u65b9\u6cd5---\u64cd\u4f5c\u5e94\u7528",level:2},{value:"reload() \u91cd\u65b0\u52a0\u8f7d\u5e94\u7528",id:"reload-\u91cd\u65b0\u52a0\u8f7d\u5e94\u7528",level:3},{value:"restart() \u91cd\u542f\u5e94\u7528",id:"restart-\u91cd\u542f\u5e94\u7528",level:3},{value:"restartAfterDelay() \u5ef6\u8fdf\u91cd\u542f\u5e94\u7528",id:"restartafterdelay-\u5ef6\u8fdf\u91cd\u542f\u5e94\u7528",level:3},{value:"openOptionsPage() \u6253\u5f00\u8bbe\u7f6e\u9875\u9762",id:"openoptionspage-\u6253\u5f00\u8bbe\u7f6e\u9875\u9762",level:3},{value:"requestUpdateCheck() \u68c0\u67e5\u66f4\u65b0",id:"requestupdatecheck-\u68c0\u67e5\u66f4\u65b0",level:3},{value:"setUninstallURL() \u8bbe\u7f6e\u5378\u8f7dURL",id:"setuninstallurl-\u8bbe\u7f6e\u5378\u8f7durl",level:3},{value:"\u65b9\u6cd5 - \u6d88\u606f\u4f20\u9012",id:"\u65b9\u6cd5---\u6d88\u606f\u4f20\u9012",level:2},{value:"sendMessage() \u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f",id:"sendmessage-\u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f",level:3},{value:"sendNativeMessage() \u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f",id:"sendnativemessage-\u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f",level:3},{value:"connect() \u63d2\u4ef6\u5185\u957f\u8fde\u63a5",id:"connect-\u63d2\u4ef6\u5185\u957f\u8fde\u63a5",level:3},{value:"connectNative() \u63d2\u4ef6\u5916\u957f\u8fde\u63a5",id:"connectnative-\u63d2\u4ef6\u5916\u957f\u8fde\u63a5",level:3},{value:"\u4e8b\u4ef6 - \u5e94\u7528\u751f\u547d\u5468\u671f",id:"\u4e8b\u4ef6---\u5e94\u7528\u751f\u547d\u5468\u671f",level:2},{value:"onStartup \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6",id:"onstartup-\u5e94\u7528\u542f\u52a8\u4e8b\u4ef6",level:3},{value:"onInstalled \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6",id:"oninstalled-\u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6",level:3},{value:"onSuspend \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6(\u5378\u8f7d\u4e4b\u524d)",id:"onsuspend-\u5e94\u7528\u6302\u8d77\u4e8b\u4ef6\u5378\u8f7d\u4e4b\u524d",level:3},{value:"onSuspendCanceled \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6",id:"onsuspendcanceled-\u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6",level:3},{value:"onRestartRequired \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6",id:"onrestartrequired-\u5e94\u7528\u91cd\u542f\u4e8b\u4ef6",level:3},{value:"\u4e8b\u4ef6 - \u6d88\u606f\u76d1\u542c",id:"\u4e8b\u4ef6---\u6d88\u606f\u76d1\u542c",level:2},{value:"onMessage \u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6",id:"onmessage-\u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6",level:3},{value:"onMessageExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6",id:"onmessageexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6",level:3},{value:"onConnect \u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6",id:"onconnect-\u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6",level:3},{value:"onConnectExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6",id:"onconnectexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6",level:3}],d={toc:c},u="wrapper";function m(e){let{components:n,...t}=e;return(0,r.kt)(u,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"runtime-\u8fd0\u884c\u65f6"},"runtime \u8fd0\u884c\u65f6"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/runtime/"},"\u5b98\u65b9\u6587\u6863")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u7528\u4e8e\u68c0\u6d4b\u548c\u54cd\u5e94\u8fd0\u884c\u65f6\u4e8b\u4ef6\uff0c\u4f8b\u5982\u5e94\u7528\u7a0b\u5e8f\u5b89\u88c5\u3001\u542f\u52a8\u3001\u5173\u95ed\u3001\u5378\u8f7d\u7b49\n\u8fd4\u56de\u5e94\u7528\u7684\u8fd0\u884c\u65f6\u4fe1\u606f\uff0c\u4f8b\u5982\u5e94\u7528\u7684ID\u3001\u7248\u672c\u3001\u6d4f\u89c8\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u4fe1\u606f")),(0,r.kt)("h2",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),(0,r.kt)("h3",{id:"id-\u5e94\u7528id"},"id \u5e94\u7528ID"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.id\n")),(0,r.kt)("h3",{id:"lasterror-\u9519\u8bef\u4fe1\u606f"},"lastError \u9519\u8bef\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.lastError\n")),(0,r.kt)("h2",{id:"\u65b9\u6cd5---\u83b7\u53d6\u5e94\u7528\u4fe1\u606f"},"\u65b9\u6cd5 - \u83b7\u53d6\u5e94\u7528\u4fe1\u606f"),(0,r.kt)("h3",{id:"getmanifest-\u83b7\u53d6manifestjson"},"getManifest() \u83b7\u53d6manifest.json"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getManifest()\n")),(0,r.kt)("h3",{id:"geturl-\u83b7\u53d6\u8d44\u6e90\u8def\u5f84"},"getURL() \u83b7\u53d6\u8d44\u6e90\u8def\u5f84"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getURL(path: string)\n")),(0,r.kt)("h3",{id:"getplatforminfo-\u83b7\u53d6\u5e73\u53f0\u4fe1\u606f"},"getPlatformInfo() \u83b7\u53d6\u5e73\u53f0\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getPlatformInfo()\n")),(0,r.kt)("h3",{id:"getpackagedirectoryentry-\u83b7\u53d6\u5305\u76ee\u5f55"},"getPackageDirectoryEntry() \u83b7\u53d6\u5305\u76ee\u5f55"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getPackageDirectoryEntry()\n")),(0,r.kt)("h3",{id:"getbackgroundpage-\u83b7\u53d6\u540e\u53f0\u9875\u9762"},"getBackgroundPage() \u83b7\u53d6\u540e\u53f0\u9875\u9762"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"\u8fd4\u56de\u540e\u53f0\u9875\u9762\u7684window\u5bf9\u8c61")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getBackgroundPage()\n")),(0,r.kt)("h3",{id:"getcontexts-\u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f"},"getContexts() \u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type ContextType = "TAB" | "POPUP" | "BACKGROUND" | "OFFSCREEN_DOCUMENT" | "SIDE_PANEL";\n\ntype ContextFilter = {\n  contextIds?: string[];\n  contextTypes?: ContextType[];\n  documentIds?: string[];\n  documentOrigins?: string[];\n  documentUrls?: string[];\n  frameIds?: number[];\n  incognito?: boolean;\n  tabIds?: number[];\n  windowIds?: number[];\n}\n\nchrome.runtime.getContexts(\n  filter: ContextFilter,\n  callback?: function,\n)\n')),(0,r.kt)("h2",{id:"\u65b9\u6cd5---\u64cd\u4f5c\u5e94\u7528"},"\u65b9\u6cd5 - \u64cd\u4f5c\u5e94\u7528"),(0,r.kt)("h3",{id:"reload-\u91cd\u65b0\u52a0\u8f7d\u5e94\u7528"},"reload() \u91cd\u65b0\u52a0\u8f7d\u5e94\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.reload()\n")),(0,r.kt)("h3",{id:"restart-\u91cd\u542f\u5e94\u7528"},"restart() \u91cd\u542f\u5e94\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.restart()\n")),(0,r.kt)("h3",{id:"restartafterdelay-\u5ef6\u8fdf\u91cd\u542f\u5e94\u7528"},"restartAfterDelay() \u5ef6\u8fdf\u91cd\u542f\u5e94\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.restartAfterDelay(\n  seconds: number,\n  callback?: function,\n)\n")),(0,r.kt)("h3",{id:"openoptionspage-\u6253\u5f00\u8bbe\u7f6e\u9875\u9762"},"openOptionsPage() \u6253\u5f00\u8bbe\u7f6e\u9875\u9762"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.openOptionsPage()\n")),(0,r.kt)("h3",{id:"requestupdatecheck-\u68c0\u67e5\u66f4\u65b0"},"requestUpdateCheck() \u68c0\u67e5\u66f4\u65b0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.requestUpdateCheck(\n  callback?: function,\n)\n")),(0,r.kt)("h3",{id:"setuninstallurl-\u8bbe\u7f6e\u5378\u8f7durl"},"setUninstallURL() \u8bbe\u7f6e\u5378\u8f7dURL"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.setUninstallURL(\n  url: string,\n  callback?: function,\n)\n")),(0,r.kt)("h2",{id:"\u65b9\u6cd5---\u6d88\u606f\u4f20\u9012"},"\u65b9\u6cd5 - \u6d88\u606f\u4f20\u9012"),(0,r.kt)("h3",{id:"sendmessage-\u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f"},"sendMessage() \u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.sendMessage(\n  extensionId?: string,\n  message: any,\n  options?: MessageOptions,\n  callback?: (response: any) => void,\n)\n")),(0,r.kt)("h3",{id:"sendnativemessage-\u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f"},"sendNativeMessage() \u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.sendNativeMessage(\n  application: string,\n  message: any,\n  callback?: (response: any) => void,\n)\n")),(0,r.kt)("h3",{id:"connect-\u63d2\u4ef6\u5185\u957f\u8fde\u63a5"},"connect() \u63d2\u4ef6\u5185\u957f\u8fde\u63a5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.connect(\n  extensionId?: string,\n  connectInfo?: ConnectInfo,\n)\n")),(0,r.kt)("h3",{id:"connectnative-\u63d2\u4ef6\u5916\u957f\u8fde\u63a5"},"connectNative() \u63d2\u4ef6\u5916\u957f\u8fde\u63a5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.connectNative(\n  application: string,\n)\n")),(0,r.kt)("h2",{id:"\u4e8b\u4ef6---\u5e94\u7528\u751f\u547d\u5468\u671f"},"\u4e8b\u4ef6 - \u5e94\u7528\u751f\u547d\u5468\u671f"),(0,r.kt)("h3",{id:"onstartup-\u5e94\u7528\u542f\u52a8\u4e8b\u4ef6"},"onStartup \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onStartup.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"oninstalled-\u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6"},"onInstalled \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type OnInstalledReason = 'install' | 'update' | 'chrome_update' | 'shared_module_update';\ntype OnInstalledDetails = {\n  reason: OnInstalledReason;\n  id?: string;\n}\nchrome.runtime.onInstalled.addListener(((details: OnInstalledDetails)) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"onsuspend-\u5e94\u7528\u6302\u8d77\u4e8b\u4ef6\u5378\u8f7d\u4e4b\u524d"},"onSuspend \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6(\u5378\u8f7d\u4e4b\u524d)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onSuspend.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"onsuspendcanceled-\u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6"},"onSuspendCanceled \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onSuspendCanceled.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"onrestartrequired-\u5e94\u7528\u91cd\u542f\u4e8b\u4ef6"},"onRestartRequired \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onRestartRequired.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h2",{id:"\u4e8b\u4ef6---\u6d88\u606f\u76d1\u542c"},"\u4e8b\u4ef6 - \u6d88\u606f\u76d1\u542c"),(0,r.kt)("h3",{id:"onmessage-\u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6"},"onMessage \u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type MessageSender = {\n  id?: string;\n  url?: string;\n  tlsChannelId?: string;\n  tab?: chrome.Tabs.Tab;\n  documentId?: string;\n  frameId?: number;\n  nativeApplication?: string;\n  origin?: string;\n}\nchrome.runtime.onMessage.addListener(\n  message: any,\n  sender: MessageSender,\n  sendResponse: function\n) => boolean | undefined;\n")),(0,r.kt)("h3",{id:"onmessageexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6"},"onMessageExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onMessageExternal.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5916\u90e8\u6d88\u606f\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"onconnect-\u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6"},"onConnect \u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Port = {\n  name: string;\n  onDisconnect: {\n    addListener: (callback: (port: Port) => void) => void;\n  };\n}\nchrome.runtime.onConnect.addListener((port: Port) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u8fde\u63a5\u4e8b\u4ef6', Date.now());\n});\n")),(0,r.kt)("h3",{id:"onconnectexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6"},"onConnectExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onConnectExternal.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5916\u90e8\u8fde\u63a5\u4e8b\u4ef6', Date.now());\n});\n")))}m.isMDXComponent=!0}}]);