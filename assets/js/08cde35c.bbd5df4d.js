"use strict";(self.webpackChunklacorda_github_io=self.webpackChunklacorda_github_io||[]).push([[4010],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>k});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=a.createContext({}),i=function(e){var n=a.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},d=function(e){var n=i(e.components);return a.createElement(c.Provider,{value:n},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},p=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=i(t),p=o,k=m["".concat(c,".").concat(p)]||m[p]||u[p]||r;return t?a.createElement(k,l(l({ref:n},d),{},{components:t})):a.createElement(k,l({ref:n},d))}));function k(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=p;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[m]="string"==typeof e?e:o,l[1]=s;for(var i=2;i<r;i++)l[i]=t[i];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}p.displayName="MDXCreateElement"},18776:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>i});var a=t(87462),o=(t(67294),t(3905));const r={},l=void 0,s={unversionedId:"Chrome\u7bc7/Chrome\u6269\u5c55/\u5e38\u7528api",id:"Chrome\u7bc7/Chrome\u6269\u5c55/\u5e38\u7528api",title:"\u5e38\u7528api",description:"\u5b98\u65b9\u6587\u6863",source:"@site/01.docs/13.Chrome\u7bc7/02.Chrome\u6269\u5c55/04.\u5e38\u7528api.md",sourceDirName:"13.Chrome\u7bc7/02.Chrome\u6269\u5c55",slug:"/Chrome\u7bc7/Chrome\u6269\u5c55/\u5e38\u7528api",permalink:"/docs/Chrome\u7bc7/Chrome\u6269\u5c55/\u5e38\u7528api",draft:!1,editUrl:"https://github.com/lacorda/lacorda.github.io/blob/master/docs/01.docs/13.Chrome\u7bc7/02.Chrome\u6269\u5c55/04.\u5e38\u7528api.md",tags:[],version:"current",lastUpdatedBy:"Lacorda",lastUpdatedAt:1703847451,formattedLastUpdatedAt:"2023\u5e7412\u670829\u65e5",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u6d88\u606f\u4f20\u9012",permalink:"/docs/Chrome\u7bc7/Chrome\u6269\u5c55/\u6d88\u606f\u4f20\u9012"},next:{title:"\u4e8b\u4ef6\u7cfb\u7edf",permalink:"/docs/Chrome\u7bc7/Chrome\u6269\u5c55/\u4e8b\u4ef6\u7cfb\u7edf"}},c={},i=[{value:"runtime \u8fd0\u884c\u65f6",id:"runtime-\u8fd0\u884c\u65f6",level:2},{value:"\u5c5e\u6027",id:"\u5c5e\u6027",level:3},{value:"id \u5e94\u7528ID",id:"id-\u5e94\u7528id",level:4},{value:"lastError \u9519\u8bef\u4fe1\u606f",id:"lasterror-\u9519\u8bef\u4fe1\u606f",level:4},{value:"\u65b9\u6cd5 - \u83b7\u53d6\u5e94\u7528\u4fe1\u606f",id:"\u65b9\u6cd5---\u83b7\u53d6\u5e94\u7528\u4fe1\u606f",level:3},{value:"getManifest() \u83b7\u53d6manifest.json",id:"getmanifest-\u83b7\u53d6manifestjson",level:4},{value:"getURL() \u83b7\u53d6\u8d44\u6e90\u8def\u5f84",id:"geturl-\u83b7\u53d6\u8d44\u6e90\u8def\u5f84",level:4},{value:"getPlatformInfo() \u83b7\u53d6\u5e73\u53f0\u4fe1\u606f",id:"getplatforminfo-\u83b7\u53d6\u5e73\u53f0\u4fe1\u606f",level:4},{value:"getPackageDirectoryEntry() \u83b7\u53d6\u5305\u76ee\u5f55",id:"getpackagedirectoryentry-\u83b7\u53d6\u5305\u76ee\u5f55",level:4},{value:"getBackgroundPage() \u83b7\u53d6\u540e\u53f0\u9875\u9762",id:"getbackgroundpage-\u83b7\u53d6\u540e\u53f0\u9875\u9762",level:4},{value:"getContexts() \u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f",id:"getcontexts-\u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f",level:4},{value:"\u65b9\u6cd5 - \u64cd\u4f5c\u5e94\u7528",id:"\u65b9\u6cd5---\u64cd\u4f5c\u5e94\u7528",level:3},{value:"reload() \u91cd\u65b0\u52a0\u8f7d\u5e94\u7528",id:"reload-\u91cd\u65b0\u52a0\u8f7d\u5e94\u7528",level:4},{value:"restart() \u91cd\u542f\u5e94\u7528",id:"restart-\u91cd\u542f\u5e94\u7528",level:4},{value:"restartAfterDelay() \u5ef6\u8fdf\u91cd\u542f\u5e94\u7528",id:"restartafterdelay-\u5ef6\u8fdf\u91cd\u542f\u5e94\u7528",level:4},{value:"openOptionsPage() \u6253\u5f00\u8bbe\u7f6e\u9875\u9762",id:"openoptionspage-\u6253\u5f00\u8bbe\u7f6e\u9875\u9762",level:4},{value:"requestUpdateCheck() \u68c0\u67e5\u66f4\u65b0",id:"requestupdatecheck-\u68c0\u67e5\u66f4\u65b0",level:4},{value:"setUninstallURL() \u8bbe\u7f6e\u5378\u8f7dURL",id:"setuninstallurl-\u8bbe\u7f6e\u5378\u8f7durl",level:4},{value:"\u65b9\u6cd5 - \u6d88\u606f\u4f20\u9012",id:"\u65b9\u6cd5---\u6d88\u606f\u4f20\u9012",level:3},{value:"sendMessage() \u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f",id:"sendmessage-\u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f",level:4},{value:"sendNativeMessage() \u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f",id:"sendnativemessage-\u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f",level:4},{value:"connect() \u63d2\u4ef6\u5185\u957f\u8fde\u63a5",id:"connect-\u63d2\u4ef6\u5185\u957f\u8fde\u63a5",level:4},{value:"connectNative() \u63d2\u4ef6\u5916\u957f\u8fde\u63a5",id:"connectnative-\u63d2\u4ef6\u5916\u957f\u8fde\u63a5",level:4},{value:"\u4e8b\u4ef6 - \u5e94\u7528\u751f\u547d\u5468\u671f",id:"\u4e8b\u4ef6---\u5e94\u7528\u751f\u547d\u5468\u671f",level:3},{value:"onStartup \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6",id:"onstartup-\u5e94\u7528\u542f\u52a8\u4e8b\u4ef6",level:4},{value:"onInstalled \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6",id:"oninstalled-\u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6",level:4},{value:"onSuspend \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6(\u5378\u8f7d\u4e4b\u524d)",id:"onsuspend-\u5e94\u7528\u6302\u8d77\u4e8b\u4ef6\u5378\u8f7d\u4e4b\u524d",level:4},{value:"onSuspendCanceled \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6",id:"onsuspendcanceled-\u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6",level:4},{value:"onRestartRequired \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6",id:"onrestartrequired-\u5e94\u7528\u91cd\u542f\u4e8b\u4ef6",level:4},{value:"\u4e8b\u4ef6 - \u6d88\u606f\u76d1\u542c",id:"\u4e8b\u4ef6---\u6d88\u606f\u76d1\u542c",level:3},{value:"onMessage \u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6",id:"onmessage-\u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6",level:4},{value:"onMessageExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6",id:"onmessageexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6",level:4},{value:"onConnect \u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6",id:"onconnect-\u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6",level:4},{value:"onConnectExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6",id:"onconnectexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6",level:4},{value:"chrome.storage \u5b58\u50a8",id:"chromestorage-\u5b58\u50a8",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e",level:3},{value:"\u5c5e\u6027",id:"\u5c5e\u6027-1",level:3},{value:"sync \u540c\u6b65\u5b58\u50a8",id:"sync-\u540c\u6b65\u5b58\u50a8",level:4},{value:"local \u672c\u5730\u5b58\u50a8",id:"local-\u672c\u5730\u5b58\u50a8",level:4},{value:"managed \u7ba1\u7406\u5b58\u50a8",id:"managed-\u7ba1\u7406\u5b58\u50a8",level:4},{value:"sync \u540c\u6b65\u5b58\u50a8",id:"sync-\u540c\u6b65\u5b58\u50a8-1",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6",level:3},{value:"onChanged \u5b58\u50a8\u53d8\u5316\u4e8b\u4ef6",id:"onchanged-\u5b58\u50a8\u53d8\u5316\u4e8b\u4ef6",level:4},{value:"chrome.sidePanel \u4fa7\u8fb9\u680f",id:"chromesidepanel-\u4fa7\u8fb9\u680f",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-1",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5",level:3},{value:"getOptions() \u83b7\u53d6\u4fa7\u8fb9\u680f\u9009\u9879",id:"getoptions-\u83b7\u53d6\u4fa7\u8fb9\u680f\u9009\u9879",level:4},{value:"getPanelBehavior() \u83b7\u53d6\u4fa7\u8fb9\u680f\u884c\u4e3a",id:"getpanelbehavior-\u83b7\u53d6\u4fa7\u8fb9\u680f\u884c\u4e3a",level:4},{value:"open() \u6253\u5f00\u4fa7\u8fb9\u680f",id:"open-\u6253\u5f00\u4fa7\u8fb9\u680f",level:4},{value:"setOptions() \u8bbe\u7f6e\u4fa7\u8fb9\u680f\u9009\u9879",id:"setoptions-\u8bbe\u7f6e\u4fa7\u8fb9\u680f\u9009\u9879",level:4},{value:"setPanelBehavior() \u8bbe\u7f6e\u4fa7\u8fb9\u680f\u884c\u4e3a",id:"setpanelbehavior-\u8bbe\u7f6e\u4fa7\u8fb9\u680f\u884c\u4e3a",level:4},{value:"chrome.tabCapture \u6807\u7b7e\u5a92\u4f53\u6d41",id:"chrometabcapture-\u6807\u7b7e\u5a92\u4f53\u6d41",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-2",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-1",level:3},{value:"capture() \u6355\u83b7\u6807\u7b7e\u5a92\u4f53\u6d41",id:"capture-\u6355\u83b7\u6807\u7b7e\u5a92\u4f53\u6d41",level:4},{value:"getCapturedTabs() \u83b7\u53d6\u6355\u83b7\u7684\u6807\u7b7e",id:"getcapturedtabs-\u83b7\u53d6\u6355\u83b7\u7684\u6807\u7b7e",level:4},{value:"getMediaStreamId() \u83b7\u53d6\u5a92\u4f53\u6d41ID",id:"getmediastreamid-\u83b7\u53d6\u5a92\u4f53\u6d41id",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-1",level:3},{value:"onStatusChanged \u72b6\u6001\u53d8\u5316\u4e8b\u4ef6",id:"onstatuschanged-\u72b6\u6001\u53d8\u5316\u4e8b\u4ef6",level:4},{value:"chrome.scripting \u811a\u672c",id:"chromescripting-\u811a\u672c",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-3",level:3},{value:"getRegisteredContentScripts() \u83b7\u53d6\u5df2\u6ce8\u518c\u7684\u5185\u5bb9\u811a\u672c",id:"getregisteredcontentscripts-\u83b7\u53d6\u5df2\u6ce8\u518c\u7684\u5185\u5bb9\u811a\u672c",level:3},{value:"registerContentScripts() \u6ce8\u518c\u5185\u5bb9\u811a\u672c",id:"registercontentscripts-\u6ce8\u518c\u5185\u5bb9\u811a\u672c",level:3},{value:"executeScript() \u6ce8\u5165\u811a\u672c",id:"executescript-\u6ce8\u5165\u811a\u672c",level:3},{value:"insertCSS() \u6ce8\u5165\u6837\u5f0f\u8868",id:"insertcss-\u6ce8\u5165\u6837\u5f0f\u8868",level:3},{value:"updateContentScript() \u66f4\u65b0\u5185\u5bb9\u811a\u672c",id:"updatecontentscript-\u66f4\u65b0\u5185\u5bb9\u811a\u672c",level:3},{value:"unregisterContentScripts() \u6ce8\u9500\u5185\u5bb9\u811a\u672c",id:"unregistercontentscripts-\u6ce8\u9500\u5185\u5bb9\u811a\u672c",level:3},{value:"removeCSS() \u79fb\u9664\u6837\u5f0f\u8868",id:"removecss-\u79fb\u9664\u6837\u5f0f\u8868",level:3},{value:"chrome.action \u5de5\u5177\u680f",id:"chromeaction-\u5de5\u5177\u680f",level:2},{value:"icon\u56fe\u6807",id:"icon\u56fe\u6807",level:3},{value:"Tooltip(Title)\u63d0\u793a",id:"tooltiptitle\u63d0\u793a",level:3},{value:"Badge\u5fbd\u7ae0",id:"badge\u5fbd\u7ae0",level:3},{value:"Popup\u5f39\u7a97/onClicked\u4e8b\u4ef6",id:"popup\u5f39\u7a97onclicked\u4e8b\u4ef6",level:3},{value:"disabled()/enable()\u65b9\u6cd5",id:"disabledenable\u65b9\u6cd5",level:3},{value:"chrome.alarms \u95f9\u949f",id:"chromealarms-\u95f9\u949f",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-4",level:3},{value:"\u68c0\u6d4b\u95f9\u949f\u7684\u6301\u7eed\u6027",id:"\u68c0\u6d4b\u95f9\u949f\u7684\u6301\u7eed\u6027",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-2",level:3},{value:"\u521b\u5efa\u95f9\u949f",id:"\u521b\u5efa\u95f9\u949f",level:4},{value:"clear()\u65b9\u6cd5",id:"clear\u65b9\u6cd5",level:4},{value:"get()\u65b9\u6cd5",id:"get\u65b9\u6cd5",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-2",level:3},{value:"onAlarm\u4e8b\u4ef6",id:"onalarm\u4e8b\u4ef6",level:4},{value:"chrome.contextMenus \u53f3\u952e\u83dc\u5355",id:"chromecontextmenus-\u53f3\u952e\u83dc\u5355",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-5",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-3",level:3},{value:"create() \u521b\u5efa\u83dc\u5355\u9879",id:"create-\u521b\u5efa\u83dc\u5355\u9879",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-3",level:3},{value:"onClicked\u4e8b\u4ef6",id:"onclicked\u4e8b\u4ef6",level:4},{value:"chrome.downloads \u4e0b\u8f7d",id:"chromedownloads-\u4e0b\u8f7d",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-6",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-4",level:3},{value:"setShelfEnabled() \u8bbe\u7f6e\u4e0b\u8f7d\u680f\u662f\u5426\u53ef\u89c1",id:"setshelfenabled-\u8bbe\u7f6e\u4e0b\u8f7d\u680f\u662f\u5426\u53ef\u89c1",level:4},{value:"download() \u4e0b\u8f7d\u94fe\u63a5",id:"download-\u4e0b\u8f7d\u94fe\u63a5",level:4},{value:"search() \u641c\u7d22",id:"search-\u641c\u7d22",level:4},{value:"open() \u6253\u5f00\u6587\u4ef6",id:"open-\u6253\u5f00\u6587\u4ef6",level:4},{value:"pause() \u6682\u505c\u4e0b\u8f7d",id:"pause-\u6682\u505c\u4e0b\u8f7d",level:4},{value:"resume() \u6062\u590d\u4e0b\u8f7d",id:"resume-\u6062\u590d\u4e0b\u8f7d",level:4},{value:"cancel() \u53d6\u6d88\u4e0b\u8f7d",id:"cancel-\u53d6\u6d88\u4e0b\u8f7d",level:4},{value:"erase() \u5220\u9664\u4e0b\u8f7d",id:"erase-\u5220\u9664\u4e0b\u8f7d",level:4},{value:"removeFile() \u5220\u9664\u6587\u4ef6",id:"removefile-\u5220\u9664\u6587\u4ef6",level:4},{value:"acceptDanger() \u63a5\u53d7\u5371\u9669",id:"acceptdanger-\u63a5\u53d7\u5371\u9669",level:4},{value:"show() \u663e\u793a\u4e0b\u8f7d",id:"show-\u663e\u793a\u4e0b\u8f7d",level:4},{value:"getFileIcon() \u83b7\u53d6\u6587\u4ef6\u56fe\u6807",id:"getfileicon-\u83b7\u53d6\u6587\u4ef6\u56fe\u6807",level:4},{value:"showDefaultFolder() \u663e\u793a\u9ed8\u8ba4\u6587\u4ef6\u5939",id:"showdefaultfolder-\u663e\u793a\u9ed8\u8ba4\u6587\u4ef6\u5939",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-4",level:3},{value:"onCreated \u521b\u5efa\u4e8b\u4ef6",id:"oncreated-\u521b\u5efa\u4e8b\u4ef6",level:4},{value:"onErased \u5220\u9664\u4e8b\u4ef6",id:"onerased-\u5220\u9664\u4e8b\u4ef6",level:4},{value:"onChanged \u66f4\u65b0\u4e8b\u4ef6",id:"onchanged-\u66f4\u65b0\u4e8b\u4ef6",level:4},{value:"onDeterminingFilename \u53d6\u6587\u4ef6\u540d\u4e8b\u4ef6",id:"ondeterminingfilename-\u53d6\u6587\u4ef6\u540d\u4e8b\u4ef6",level:4},{value:"chrome.notifications \u901a\u77e5",id:"chromenotifications-\u901a\u77e5",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-7",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-5",level:3},{value:"\u521b\u5efa\u901a\u77e5",id:"\u521b\u5efa\u901a\u77e5",level:4},{value:"clear() \u6e05\u9664\u901a\u77e5",id:"clear-\u6e05\u9664\u901a\u77e5",level:4},{value:"update() \u66f4\u65b0\u901a\u77e5",id:"update-\u66f4\u65b0\u901a\u77e5",level:4},{value:"getPermissionLevel() \u83b7\u53d6\u901a\u77e5\u6743\u9650",id:"getpermissionlevel-\u83b7\u53d6\u901a\u77e5\u6743\u9650",level:4},{value:"getAll() \u83b7\u53d6\u6240\u6709\u901a\u77e5",id:"getall-\u83b7\u53d6\u6240\u6709\u901a\u77e5",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-5",level:3},{value:"onClosed \u5173\u95ed\u4e8b\u4ef6",id:"onclosed-\u5173\u95ed\u4e8b\u4ef6",level:4},{value:"onClicked \u70b9\u51fb\u4e8b\u4ef6",id:"onclicked-\u70b9\u51fb\u4e8b\u4ef6",level:4},{value:"onButtonClicked \u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6",id:"onbuttonclicked-\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6",level:4},{value:"onPermissionLevelChanged \u6743\u9650\u7ea7\u522b\u53d8\u66f4\u4e8b\u4ef6",id:"onpermissionlevelchanged-\u6743\u9650\u7ea7\u522b\u53d8\u66f4\u4e8b\u4ef6",level:4},{value:"onShowSettings \u663e\u793a\u4e8b\u4ef6",id:"onshowsettings-\u663e\u793a\u4e8b\u4ef6",level:4},{value:"chrome.offscreen \u79bb\u5c4f",id:"chromeoffscreen-\u79bb\u5c4f",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-8",level:3},{value:"createDocument() \u521b\u5efa\u79bb\u5c4f\u6587\u6863",id:"createdocument-\u521b\u5efa\u79bb\u5c4f\u6587\u6863",level:3},{value:"closeDocument() \u5173\u95ed\u79bb\u5c4f\u6587\u6863",id:"closedocument-\u5173\u95ed\u79bb\u5c4f\u6587\u6863",level:3},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"GEO\u5b9a\u4f4d",id:"geo\u5b9a\u4f4d",level:4},{value:"\u590d\u5236\u7c98\u8d34",id:"\u590d\u5236\u7c98\u8d34",level:4},{value:"\u89e3\u6790DOM",id:"\u89e3\u6790dom",level:4},{value:"\u7f51\u9875\u5f55\u5236",id:"\u7f51\u9875\u5f55\u5236",level:4},{value:"chrome.permissions \u6743\u9650",id:"chromepermissions-\u6743\u9650",level:2},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-6",level:3},{value:"contains() \u67e5\u8be2\u6743\u9650",id:"contains-\u67e5\u8be2\u6743\u9650",level:4},{value:"request() \u8bf7\u6c42\u6743\u9650",id:"request-\u8bf7\u6c42\u6743\u9650",level:4},{value:"remove() \u79fb\u9664\u6743\u9650",id:"remove-\u79fb\u9664\u6743\u9650",level:4},{value:"removeAll() \u79fb\u9664\u6240\u6709\u6743\u9650",id:"removeall-\u79fb\u9664\u6240\u6709\u6743\u9650",level:4},{value:"getAll() \u83b7\u53d6\u6240\u6709\u6743\u9650",id:"getall-\u83b7\u53d6\u6240\u6709\u6743\u9650",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-6",level:3},{value:"onAdded \u6dfb\u52a0\u4e8b\u4ef6",id:"onadded-\u6dfb\u52a0\u4e8b\u4ef6",level:4},{value:"onRemoved \u79fb\u9664\u4e8b\u4ef6",id:"onremoved-\u79fb\u9664\u4e8b\u4ef6",level:4},{value:"chrome.cookies cookie",id:"chromecookies-cookie",level:2},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-7",level:3},{value:"\u589e",id:"\u589e",level:4},{value:"\u5220",id:"\u5220",level:4},{value:"\u6539",id:"\u6539",level:4},{value:"\u67e5",id:"\u67e5",level:4},{value:"\u5176\u5b83",id:"\u5176\u5b83",level:2},{value:"chrome.extension \u6269\u5c55\u529f\u80fd",id:"chromeextension-\u6269\u5c55\u529f\u80fd",level:3},{value:"chrome.proxy \u4ee3\u7406",id:"chromeproxy-\u4ee3\u7406",level:2},{value:"\u6743\u9650\u8bbe\u7f6e",id:"\u6743\u9650\u8bbe\u7f6e-9",level:3},{value:"\u65b9\u6cd5",id:"\u65b9\u6cd5-8",level:3},{value:"get() \u83b7\u53d6\u4ee3\u7406\u8bbe\u7f6e",id:"get-\u83b7\u53d6\u4ee3\u7406\u8bbe\u7f6e",level:4},{value:"set() \u8bbe\u7f6e\u4ee3\u7406\u8bbe\u7f6e",id:"set-\u8bbe\u7f6e\u4ee3\u7406\u8bbe\u7f6e",level:4},{value:"clear() \u6e05\u9664\u4ee3\u7406\u8bbe\u7f6e",id:"clear-\u6e05\u9664\u4ee3\u7406\u8bbe\u7f6e",level:4},{value:"chrome.printerProvider/printing/printingMetrics \u6253\u5370\u673a\u76f8\u5173",id:"chromeprinterproviderprintingprintingmetrics-\u6253\u5370\u673a\u76f8\u5173",level:3},{value:"chrome.fontSetting \u8bbe\u7f6eChrome\u5b57\u4f53",id:"chromefontsetting-\u8bbe\u7f6echrome\u5b57\u4f53",level:3},{value:"chrome.commands \u5feb\u6377\u952e\u8bbe\u7f6e\u4e0e\u76d1\u542c",id:"chromecommands-\u5feb\u6377\u952e\u8bbe\u7f6e\u4e0e\u76d1\u542c",level:3},{value:"chrome.contentSettings \u5185\u5bb9\u8bbe\u7f6e",id:"chromecontentsettings-\u5185\u5bb9\u8bbe\u7f6e",level:3},{value:"chrome.bookmarks\u4e66\u7b7e",id:"chromebookmarks\u4e66\u7b7e",level:3},{value:"\u589e",id:"\u589e-1",level:4},{value:"\u5220",id:"\u5220-1",level:4},{value:"\u6539",id:"\u6539-1",level:4},{value:"\u67e5",id:"\u67e5-1",level:4},{value:"\u4e8b\u4ef6",id:"\u4e8b\u4ef6-7",level:4},{value:"chrome.audio \u97f3\u9891",id:"chromeaudio-\u97f3\u9891",level:3},{value:"chrome.browsingData \u6d4f\u89c8\u6570\u636e",id:"chromebrowsingdata-\u6d4f\u89c8\u6570\u636e",level:3},{value:"chrome.history \u5386\u53f2\u8bb0\u5f55",id:"chromehistory-\u5386\u53f2\u8bb0\u5f55",level:3},{value:"chrome.omnibox \u5730\u5740\u680f",id:"chromeomnibox-\u5730\u5740\u680f",level:3},{value:"chrome.identity \u8eab\u4efd\u9a8c\u8bc1",id:"chromeidentity-\u8eab\u4efd\u9a8c\u8bc1",level:3},{value:"chrome.idle \u7a7a\u95f2",id:"chromeidle-\u7a7a\u95f2",level:3},{value:"chrome.i18n \u56fd\u9645\u5316",id:"chromei18n-\u56fd\u9645\u5316",level:3},{value:"chrome.certificateProvider \u8bc1\u4e66\u63d0\u4f9b\u8005",id:"chromecertificateprovider-\u8bc1\u4e66\u63d0\u4f9b\u8005",level:3},{value:"chrome.debugger \u8c03\u8bd5\u5668",id:"chromedebugger-\u8c03\u8bd5\u5668",level:3},{value:"chrome.input.ime \u81ea\u5b9a\u4e49\u8f93\u5165\u6cd5",id:"chromeinputime-\u81ea\u5b9a\u4e49\u8f93\u5165\u6cd5",level:3},{value:"chrome.gcm Google\u4e91\u6d88\u606f",id:"chromegcm-google\u4e91\u6d88\u606f",level:3},{value:"chrome.readingList \u9605\u8bfb\u5217\u8868",id:"chromereadinglist-\u9605\u8bfb\u5217\u8868",level:3},{value:"chrome.search \u641c\u7d22",id:"chromesearch-\u641c\u7d22",level:3},{value:"chrome.sessions \u4f1a\u8bdd",id:"chromesessions-\u4f1a\u8bdd",level:3},{value:"chrome.system.cpu \u7cfb\u7edfCPU",id:"chromesystemcpu-\u7cfb\u7edfcpu",level:3},{value:"chrome.system.memory \u7cfb\u7edf\u5185\u5b58",id:"chromesystemmemory-\u7cfb\u7edf\u5185\u5b58",level:3},{value:"chrome.system.storage \u7cfb\u7edf\u5b58\u50a8",id:"chromesystemstorage-\u7cfb\u7edf\u5b58\u50a8",level:3},{value:"chrome.system.display \u7cfb\u7edf\u663e\u793a",id:"chromesystemdisplay-\u7cfb\u7edf\u663e\u793a",level:3}],d={toc:i},m="wrapper";function u(e){let{components:n,...r}=e;return(0,o.kt)(m,(0,a.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/api"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h2",{id:"runtime-\u8fd0\u884c\u65f6"},"runtime \u8fd0\u884c\u65f6"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/runtime/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7528\u4e8e\u68c0\u6d4b\u548c\u54cd\u5e94\u8fd0\u884c\u65f6\u4e8b\u4ef6\uff0c\u4f8b\u5982\u5e94\u7528\u7a0b\u5e8f\u5b89\u88c5\u3001\u542f\u52a8\u3001\u5173\u95ed\u3001\u5378\u8f7d\u7b49\n\u8fd4\u56de\u5e94\u7528\u7684\u8fd0\u884c\u65f6\u4fe1\u606f\uff0c\u4f8b\u5982\u5e94\u7528\u7684ID\u3001\u7248\u672c\u3001\u6d4f\u89c8\u5668\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u4fe1\u606f")),(0,o.kt)("h3",{id:"\u5c5e\u6027"},"\u5c5e\u6027"),(0,o.kt)("h4",{id:"id-\u5e94\u7528id"},"id \u5e94\u7528ID"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.id\n")),(0,o.kt)("h4",{id:"lasterror-\u9519\u8bef\u4fe1\u606f"},"lastError \u9519\u8bef\u4fe1\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.lastError\n")),(0,o.kt)("h3",{id:"\u65b9\u6cd5---\u83b7\u53d6\u5e94\u7528\u4fe1\u606f"},"\u65b9\u6cd5 - \u83b7\u53d6\u5e94\u7528\u4fe1\u606f"),(0,o.kt)("h4",{id:"getmanifest-\u83b7\u53d6manifestjson"},"getManifest() \u83b7\u53d6manifest.json"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getManifest()\n")),(0,o.kt)("h4",{id:"geturl-\u83b7\u53d6\u8d44\u6e90\u8def\u5f84"},"getURL() \u83b7\u53d6\u8d44\u6e90\u8def\u5f84"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getURL(path: string)\n")),(0,o.kt)("h4",{id:"getplatforminfo-\u83b7\u53d6\u5e73\u53f0\u4fe1\u606f"},"getPlatformInfo() \u83b7\u53d6\u5e73\u53f0\u4fe1\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getPlatformInfo()\n")),(0,o.kt)("h4",{id:"getpackagedirectoryentry-\u83b7\u53d6\u5305\u76ee\u5f55"},"getPackageDirectoryEntry() \u83b7\u53d6\u5305\u76ee\u5f55"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getPackageDirectoryEntry()\n")),(0,o.kt)("h4",{id:"getbackgroundpage-\u83b7\u53d6\u540e\u53f0\u9875\u9762"},"getBackgroundPage() \u83b7\u53d6\u540e\u53f0\u9875\u9762"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u8fd4\u56de\u540e\u53f0\u9875\u9762\u7684window\u5bf9\u8c61")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.getBackgroundPage()\n")),(0,o.kt)("h4",{id:"getcontexts-\u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f"},"getContexts() \u83b7\u53d6\u5e94\u7528\u6240\u6709\u9875\u9762\u4fe1\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'type ContextType = "TAB" | "POPUP" | "BACKGROUND" | "OFFSCREEN_DOCUMENT" | "SIDE_PANEL";\n\ntype ContextFilter = {\n  contextIds?: string[];\n  contextTypes?: ContextType[];\n  documentIds?: string[];\n  documentOrigins?: string[];\n  documentUrls?: string[];\n  frameIds?: number[];\n  incognito?: boolean;\n  tabIds?: number[];\n  windowIds?: number[];\n}\n\nchrome.runtime.getContexts(\n  filter: ContextFilter,\n  callback?: function,\n)\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5---\u64cd\u4f5c\u5e94\u7528"},"\u65b9\u6cd5 - \u64cd\u4f5c\u5e94\u7528"),(0,o.kt)("h4",{id:"reload-\u91cd\u65b0\u52a0\u8f7d\u5e94\u7528"},"reload() \u91cd\u65b0\u52a0\u8f7d\u5e94\u7528"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.reload()\n")),(0,o.kt)("h4",{id:"restart-\u91cd\u542f\u5e94\u7528"},"restart() \u91cd\u542f\u5e94\u7528"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.restart()\n")),(0,o.kt)("h4",{id:"restartafterdelay-\u5ef6\u8fdf\u91cd\u542f\u5e94\u7528"},"restartAfterDelay() \u5ef6\u8fdf\u91cd\u542f\u5e94\u7528"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.restartAfterDelay(\n  seconds: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"openoptionspage-\u6253\u5f00\u8bbe\u7f6e\u9875\u9762"},"openOptionsPage() \u6253\u5f00\u8bbe\u7f6e\u9875\u9762"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.openOptionsPage()\n")),(0,o.kt)("h4",{id:"requestupdatecheck-\u68c0\u67e5\u66f4\u65b0"},"requestUpdateCheck() \u68c0\u67e5\u66f4\u65b0"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.requestUpdateCheck(\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"setuninstallurl-\u8bbe\u7f6e\u5378\u8f7durl"},"setUninstallURL() \u8bbe\u7f6e\u5378\u8f7dURL"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.runtime.setUninstallURL(\n  url: string,\n  callback?: function,\n)\n")),(0,o.kt)("h3",{id:"\u65b9\u6cd5---\u6d88\u606f\u4f20\u9012"},"\u65b9\u6cd5 - \u6d88\u606f\u4f20\u9012"),(0,o.kt)("h4",{id:"sendmessage-\u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f"},"sendMessage() \u63d2\u4ef6\u5185\u53d1\u9001\u6d88\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.sendMessage(\n  extensionId?: string,\n  message: any,\n  options?: MessageOptions,\n  callback?: (response: any) => void,\n)\n")),(0,o.kt)("h4",{id:"sendnativemessage-\u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f"},"sendNativeMessage() \u63d2\u4ef6\u5916\u53d1\u9001\u6d88\u606f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.sendNativeMessage(\n  application: string,\n  message: any,\n  callback?: (response: any) => void,\n)\n")),(0,o.kt)("h4",{id:"connect-\u63d2\u4ef6\u5185\u957f\u8fde\u63a5"},"connect() \u63d2\u4ef6\u5185\u957f\u8fde\u63a5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.connect(\n  extensionId?: string,\n  connectInfo?: ConnectInfo,\n)\n")),(0,o.kt)("h4",{id:"connectnative-\u63d2\u4ef6\u5916\u957f\u8fde\u63a5"},"connectNative() \u63d2\u4ef6\u5916\u957f\u8fde\u63a5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.runtime.connectNative(\n  application: string,\n)\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6---\u5e94\u7528\u751f\u547d\u5468\u671f"},"\u4e8b\u4ef6 - \u5e94\u7528\u751f\u547d\u5468\u671f"),(0,o.kt)("h4",{id:"onstartup-\u5e94\u7528\u542f\u52a8\u4e8b\u4ef6"},"onStartup \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onStartup.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u542f\u52a8\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"oninstalled-\u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6"},"onInstalled \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onInstalled.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5b89\u88c5\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onsuspend-\u5e94\u7528\u6302\u8d77\u4e8b\u4ef6\u5378\u8f7d\u4e4b\u524d"},"onSuspend \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6(\u5378\u8f7d\u4e4b\u524d)"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onSuspend.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u6302\u8d77\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onsuspendcanceled-\u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6"},"onSuspendCanceled \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onSuspendCanceled.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u53d6\u6d88\u6302\u8d77\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onrestartrequired-\u5e94\u7528\u91cd\u542f\u4e8b\u4ef6"},"onRestartRequired \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onRestartRequired.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u91cd\u542f\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6---\u6d88\u606f\u76d1\u542c"},"\u4e8b\u4ef6 - \u6d88\u606f\u76d1\u542c"),(0,o.kt)("h4",{id:"onmessage-\u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6"},"onMessage \u5e94\u7528\u5185\u6d88\u606f\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onMessage.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u6d88\u606f\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onmessageexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6"},"onMessageExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u6d88\u606f\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onMessageExternal.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5916\u90e8\u6d88\u606f\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onconnect-\u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6"},"onConnect \u5e94\u7528\u5185\u957f\u8fde\u63a5\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onConnect.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u8fde\u63a5\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h4",{id:"onconnectexternal-\u6765\u81ea\u7f51\u9875\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6"},"onConnectExternal \u6765\u81ea\u7f51\u9875/\u5176\u4ed6\u63d2\u4ef6\u7684\u8fde\u63a5\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onConnectExternal.addListener(() => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5e94\u7528\u5916\u90e8\u8fde\u63a5\u4e8b\u4ef6', Date.now());\n});\n")),(0,o.kt)("h2",{id:"chromestorage-\u5b58\u50a8"},"chrome.storage \u5b58\u50a8"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/storage/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7528\u4e8e\u5b58\u50a8\u3001\u68c0\u7d22\u548c\u8ddf\u8e2a\u5e94\u7528\u7684\u7528\u6237\u6570\u636e")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "storage"\n],\n')),(0,o.kt)("h3",{id:"\u5c5e\u6027-1"},"\u5c5e\u6027"),(0,o.kt)("h4",{id:"sync-\u540c\u6b65\u5b58\u50a8"},"sync \u540c\u6b65\u5b58\u50a8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.storage.sync\n")),(0,o.kt)("h4",{id:"local-\u672c\u5730\u5b58\u50a8"},"local \u672c\u5730\u5b58\u50a8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.storage.local\n")),(0,o.kt)("h4",{id:"managed-\u7ba1\u7406\u5b58\u50a8"},"managed \u7ba1\u7406\u5b58\u50a8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.storage.managed\n")),(0,o.kt)("h4",{id:"sync-\u540c\u6b65\u5b58\u50a8-1"},"sync \u540c\u6b65\u5b58\u50a8"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.storage.sync\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onchanged-\u5b58\u50a8\u53d8\u5316\u4e8b\u4ef6"},"onChanged \u5b58\u50a8\u53d8\u5316\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.storage.onChanged.addListener(\n  callback: (changes: object,areaName:string) => void\n)\n")),(0,o.kt)("h2",{id:"chromesidepanel-\u4fa7\u8fb9\u680f"},"chrome.sidePanel \u4fa7\u8fb9\u680f"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/sidePanel/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7528\u4e8e\u521b\u5efa\u3001\u7ba1\u7406\u548c\u63a7\u5236\u4fa7\u8fb9\u680f")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"\u4fa7\u8fb9\u680f",src:t(49621).Z,width:"656",height:"1402"})),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-1"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "sidePanel"\n],\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"getoptions-\u83b7\u53d6\u4fa7\u8fb9\u680f\u9009\u9879"},"getOptions() \u83b7\u53d6\u4fa7\u8fb9\u680f\u9009\u9879"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type GetPanelOptions = {\n  tabId?: number;\n}\n\ntype PanelOptions = {\n  enabled?: boolean;\n  path?: string;\n  tabId?: number;\n}\n\nchrome.sidePanel.getOptions(\n  options: GetPanelOptions,\n  callback?: (options: PanelOptions)=>void,\n)\n")),(0,o.kt)("h4",{id:"getpanelbehavior-\u83b7\u53d6\u4fa7\u8fb9\u680f\u884c\u4e3a"},"getPanelBehavior() \u83b7\u53d6\u4fa7\u8fb9\u680f\u884c\u4e3a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type PanelBehavior = {\n  enabled?: boolean;\n  path?: string;\n  tabId?: number;\n}\n\nchrome.sidePanel.getPanelBehavior(\n  callback?: (options: PanelBehavior)=>void,\n)\n")),(0,o.kt)("h4",{id:"open-\u6253\u5f00\u4fa7\u8fb9\u680f"},"open() \u6253\u5f00\u4fa7\u8fb9\u680f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type OpenOptions = {\n  // tabId \u548c windowId \u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\n  tabId?: number;\n  windowId?: number;\n}\n\nchrome.sidePanel.open(\n  options: OpenOptions,\n  callback?: () => void,\n)\n")),(0,o.kt)("h4",{id:"setoptions-\u8bbe\u7f6e\u4fa7\u8fb9\u680f\u9009\u9879"},"setOptions() \u8bbe\u7f6e\u4fa7\u8fb9\u680f\u9009\u9879"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type PanelOptions = {\n  enabled?: boolean;\n  path?: string;\n  tabId?: number;\n}\n\nchrome.sidePanel.setOptions(\n  options: PanelOptions,\n  callback?: () => void,\n)\n")),(0,o.kt)("h4",{id:"setpanelbehavior-\u8bbe\u7f6e\u4fa7\u8fb9\u680f\u884c\u4e3a"},"setPanelBehavior() \u8bbe\u7f6e\u4fa7\u8fb9\u680f\u884c\u4e3a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type PanelBehavior = {\n  enabled?: boolean;\n  path?: string;\n  tabId?: number;\n}\n\nchrome.sidePanel.setPanelBehavior(\n  behavior: PanelBehavior,\n  callback?: () => void,\n)\n")),(0,o.kt)("h2",{id:"chrometabcapture-\u6807\u7b7e\u5a92\u4f53\u6d41"},"chrome.tabCapture \u6807\u7b7e\u5a92\u4f53\u6d41"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/tabCapture/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7528\u4e8e\u6355\u83b7\u6807\u7b7e\u7684\u5a92\u4f53\u6d41")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-2"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "tabCapture"\n],\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-1"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"capture-\u6355\u83b7\u6807\u7b7e\u5a92\u4f53\u6d41"},"capture() \u6355\u83b7\u6807\u7b7e\u5a92\u4f53\u6d41"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6355\u83b7\u5f53\u524d\u6d3b\u52a8\u9009\u9879\u5361\u7684\u53ef\u89c1\u533a\u57df\u7684\u5a92\u4f53\u6d41")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type MediaStreamConstraint = {\n  mandatory: object;\n  optional?: object;\n}\n\ntype CaptureOptions = {\n  audio?: boolean;\n  audioConstraints?: MediaStreamConstraint;\n  video?: boolean;\n  videoConstraints?: MediaStreamConstraint;\n}\n\nchrome.tabCapture.capture(\n  options: CaptureOptions,\n  callback: (stream: LocalMediaStream) => void,\n)\n")),(0,o.kt)("h4",{id:"getcapturedtabs-\u83b7\u53d6\u6355\u83b7\u7684\u6807\u7b7e"},"getCapturedTabs() \u83b7\u53d6\u6355\u83b7\u7684\u6807\u7b7e"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5df2\u8bf7\u6c42\u6355\u83b7\u6216\u6b63\u5728\u6355\u83b7\u7684\u9009\u9879\u5361\u5217\u8868")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type TabCaptureState = 'pending' | 'active' | 'stopped' | 'error';\n\ntype CaptureInfo = {\n  fullscreen: boolean;\n  status: TabCaptureState;\n  tabId: number;\n}\n\nchrome.tabCapture.getCapturedTabs(\n  callback?: (result: CaptureInfo[]) => void,\n)\n")),(0,o.kt)("h4",{id:"getmediastreamid-\u83b7\u53d6\u5a92\u4f53\u6d41id"},"getMediaStreamId() \u83b7\u53d6\u5a92\u4f53\u6d41ID"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u5f53\u524d\u5a92\u4f53\u6d41\u7684ID")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'type GetMediaStreamOptions = {\n  // \u9009\u9879\u5361 ID\n  consumerTabId?: number;\n  targetTabId?: number;\n}\n\nchrome.tabCapture.getMediaStreamId(\n  options?: GetMediaStreamOptions,\n  callback?: (streamId: string) => void,\n)\n\n// \u83b7\u53d6\u5230\u7684\u5a92\u4f53\u6d41ID\uff0c\u518d\u901a\u8fc7 navigator.mediaDevices.getUserMedia({audio: {streamId: streamId}}) \u83b7\u53d6\u5a92\u4f53\u6d41\nnavigator.mediaDevices.getUserMedia({\n  audio: {\n    mandatory: {\n      chromeMediaSource: "tab",\n      chromeMediaSourceId: id,\n    },\n  },\n  video: {\n    mandatory: {\n      chromeMediaSource: "tab",\n      chromeMediaSourceId: id,\n    },\n  },\n});\n')),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-1"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onstatuschanged-\u72b6\u6001\u53d8\u5316\u4e8b\u4ef6"},"onStatusChanged \u72b6\u6001\u53d8\u5316\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u6355\u83b7\u7684\u6807\u7b7e\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type CaptureInfo = {\n  fullscreen: boolean;\n  status: TabCaptureState;\n  tabId: number;\n}\n\n// background.js\nchrome.tabCapture.onStatusChanged.addListener((info: CaptureInfo) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u72b6\u6001\u53d8\u5316\u4e8b\u4ef6', Date.now(), info);\n});\n")),(0,o.kt)("h2",{id:"chromescripting-\u811a\u672c"},"chrome.scripting \u811a\u672c"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/scripting/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u52a8\u6001\u7ba1\u7406\u7f51\u9875\u5185\u5bb9\uff0c\u4f8b\u5982\u6ce8\u5165\u811a\u672c\u3001\u6837\u5f0f\u8868\u3001\u6267\u884c\u811a\u672c\u7b49")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-3"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "scripting"\n],\n')),(0,o.kt)("h3",{id:"getregisteredcontentscripts-\u83b7\u53d6\u5df2\u6ce8\u518c\u7684\u5185\u5bb9\u811a\u672c"},"getRegisteredContentScripts() \u83b7\u53d6\u5df2\u6ce8\u518c\u7684\u5185\u5bb9\u811a\u672c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type ContentScriptFilter = {\n  ids?: string[];\n}\n\ntype RunAt = 'document_start' | 'document_end' | 'document_idle';\n\ntype ExecutionWorld = 'isolated_world' | 'shared_world';\n\ntype RegisteredContentScript = {\n  allFrames?: boolean;\n  css?: string[];\n  excludeMatches?: string[];\n  id: string;\n  js?: string[];\n  matchOriginAsFallback?: boolean;\n  matches?: string[];\n  persistAcrossSessions?: boolean;\n  runAt?: RunAt;\n  world?: ExecutionWorld;\n}\n\nchrome.scripting.getRegisteredContentScripts(\n  filter?: ContentScriptFilter\n  callback?: (scripts: RegisteredContentScript[]) => void,\n)\n")),(0,o.kt)("h3",{id:"registercontentscripts-\u6ce8\u518c\u5185\u5bb9\u811a\u672c"},"registerContentScripts() \u6ce8\u518c\u5185\u5bb9\u811a\u672c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type RegisteredContentScript = {\n  allFrames?: boolean;\n  css?: string[];\n  excludeMatches?: string[];\n  id: string;\n  js?: string[];\n  matchOriginAsFallback?: boolean;\n  matches?: string[];\n  persistAcrossSessions?: boolean;\n  runAt?: RunAt;\n  world?: ExecutionWorld;\n}\n\nchrome.scripting.registerContentScripts(\n  scripts: RegisteredContentScript[],\n  callback?: () => void,\n)\n")),(0,o.kt)("h3",{id:"executescript-\u6ce8\u5165\u811a\u672c"},"executeScript() \u6ce8\u5165\u811a\u672c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'type InjectionTarget = {\n  // \u8981\u6ce8\u5165\u5230\u7684\u9009\u9879\u5361\u7684 ID\u3002\n  tabId: number;\n  // \u8981\u6ce8\u5165\u5230\u7684\u7279\u5b9a\u5e27\u7684 ID\u3002\n  frameIds?: number[];\n  // \u811a\u672c\u662f\u5426\u5e94\u6ce8\u5165\u5230\u9009\u9879\u5361\u5185\u7684\u6240\u6709\u5e27\u4e2d\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\u5982\u679c frameIds \u6307\u5b9a\uff0c\u5219\u4e0d\u80fd\u4e3a\u771f\u3002\n  allFrames?: boolean;\n  // \u8981\u6ce8\u5165\u5230\u7684\u7279\u5b9a documentId \u7684 ID\u3002\u5982\u679c frameIds \u5df2\u8bbe\u7f6e\uff0c\u5219\u4e0d\u5f97\u8bbe\u7f6e\u6b64\u9879\u3002\n  documentIds?: string[];\n}\n\ntype ScriptInjection = {\n  // \u8981\u5f15\u5165\u6240\u63d0\u4f9b\u51fd\u6570\u7684\u53c2\u6570\u3002\u4ec5\u5f53\u6307\u5b9a\u4e86\u53c2\u6570 func \u65f6\uff0c\u8fd9\u624d\u6709\u6548\u3002\u8fd9\u4e9b\u53c2\u6570\u5fc5\u987b\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\u3002\n  args?: any[];\n  // \u8981\u6ce8\u5165\u7684 JS \u6216 CSS \u6587\u4ef6\u7684\u8def\u5f84\uff0c\u76f8\u5bf9\u4e8e\u6269\u5c55\u7684\u6839\u76ee\u5f55\n  files?: string[];\n  // \u7acb\u5373\u6ce8\u5165\n  injectImmediately?: boolean;\n  target: InjectionTarget;\n  // \u9694\u79bb\u73af\u5883 / \u4e0e\u5bbf\u4e3b\u9875\u9762\u7684 JavaScript \u5171\u4eab\u7684\u6267\u884c\u73af\u5883\n  world?: "ISOLATED" | "MAIN";\n  func?: () => void;\n}\n\nchrome.scripting.executeScript(\n  injection: ScriptInjection,\n  callback?: () => void,\n)\n')),(0,o.kt)("h3",{id:"insertcss-\u6ce8\u5165\u6837\u5f0f\u8868"},"insertCSS() \u6ce8\u5165\u6837\u5f0f\u8868"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'type InjectionTarget = {\n  // \u8981\u6ce8\u5165\u5230\u7684\u9009\u9879\u5361\u7684 ID\u3002\n  tabId: number;\n  // \u8981\u6ce8\u5165\u5230\u7684\u7279\u5b9a\u5e27\u7684 ID\u3002\n  frameIds?: number[];\n  // \u811a\u672c\u662f\u5426\u5e94\u6ce8\u5165\u5230\u9009\u9879\u5361\u5185\u7684\u6240\u6709\u5e27\u4e2d\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\u5982\u679c frameIds \u6307\u5b9a\uff0c\u5219\u4e0d\u80fd\u4e3a\u771f\u3002\n  allFrames?: boolean;\n  // \u8981\u6ce8\u5165\u5230\u7684\u7279\u5b9a documentId \u7684 ID\u3002\u5982\u679c frameIds \u5df2\u8bbe\u7f6e\uff0c\u5219\u4e0d\u5f97\u8bbe\u7f6e\u6b64\u9879\u3002\n  documentIds?: string[];\n}\n\ntype CSSInjection = {\n  // \u5fc5\u987b\u6307\u5b9a files \u548c css \u4e4b\u4e00 \n  css?: string;\n  // \u5fc5\u987b\u6307\u5b9a files \u548c css \u4e4b\u4e00\n  files?: string[];\n  origin?: "USER" | "AUTHOR";\n  target: InjectionTarget;\n}\n\nchrome.scripting.insertCSS(\n  injection: CSSInjection,\n  callback?: () => void,\n)\n')),(0,o.kt)("h3",{id:"updatecontentscript-\u66f4\u65b0\u5185\u5bb9\u811a\u672c"},"updateContentScript() \u66f4\u65b0\u5185\u5bb9\u811a\u672c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type RegisteredContentScript = {\n  allFrames?: boolean;\n  css?: string[];\n  excludeMatches?: string[];\n  id: string;\n  js?: string[];\n  matchOriginAsFallback?: boolean;\n  matches?: string[];\n  persistAcrossSessions?: boolean;\n  runAt?: RunAt;\n  world?: ExecutionWorld;\n}\n\nchrome.scripting.updateContentScript(\n  scripts: RegisteredContentScript[],\n  callback?: () => void,\n)\n")),(0,o.kt)("h3",{id:"unregistercontentscripts-\u6ce8\u9500\u5185\u5bb9\u811a\u672c"},"unregisterContentScripts() \u6ce8\u9500\u5185\u5bb9\u811a\u672c"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.scripting.unregisterContentScripts(\n  filter?: ContentScriptFilter,\n  callback?: function,\n)\n")),(0,o.kt)("h3",{id:"removecss-\u79fb\u9664\u6837\u5f0f\u8868"},"removeCSS() \u79fb\u9664\u6837\u5f0f\u8868"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.scripting.removeCSS(\n  injection: CSSInjection,\n  callback?: function,\n)\n")),(0,o.kt)("h2",{id:"chromeaction-\u5de5\u5177\u680f"},"chrome.action \u5de5\u5177\u680f"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u63a7\u5236\u5de5\u5177\u680f\u4e2d\u6269\u5c55\u7a0b\u5e8f\u7684\u56fe\u6807\uff0c",(0,o.kt)("inlineCode",{parentName:"p"},"manifest.json"),"\u5fc5\u987b\u914d\u7f6e",(0,o.kt)("inlineCode",{parentName:"p"},"action"),"\u5b57\u6bb5")),(0,o.kt)("h3",{id:"icon\u56fe\u6807"},"icon\u56fe\u6807"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'// manifest.json\n{\n  "action": {\n    "default_icon": "icon-48.png"\n  }\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// background.js\nconst canvas = new OffscreenCanvas(16, 16);\nconst context = canvas.getContext(\'2d\');\ncontext.clearRect(0, 0, 16, 16);\ncontext.fillStyle = \'#00FF00\';  // Green\ncontext.fillRect(0, 0, 16, 16);\nconst imageData = context.getImageData(0, 0, 16, 16);\n\nchrome.action.setIcon({\n  // imageData: \u56fe\u50cf\u6570\u636e\n  imageData,\n  // path: \u76f8\u5bf9\u56fe\u50cf\u8def\u5f84\n  path: {\n    "48": "icon-48.png",\n    "128": "icon-128.png"\n  }\n}, () => { \n  /* callback */ \n});\n')),(0,o.kt)("h3",{id:"tooltiptitle\u63d0\u793a"},"Tooltip(Title)\u63d0\u793a"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u7528\u6237\u5c06\u9f20\u6807\u6307\u9488\u60ac\u505c\u5728\u5de5\u5177\u680f\u4e2d\u7684\u6269\u5c55\u56fe\u6807\u4e0a\u65f6\uff0c\u5c06\u663e\u793a\u5de5\u5177\u63d0\u793a\u6216\u6807\u9898")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'// manifest.json\n{\n  "action": {\n    "default_title": "Click here!"\n  }\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.action.setTitle({\n  title: 'Hello World!'\n}, () => {  /* ... */ });\n")),(0,o.kt)("h3",{id:"badge\u5fbd\u7ae0"},"Badge\u5fbd\u7ae0"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5728\u5de5\u5177\u680f\u56fe\u6807\u4e0a\u663e\u793a\u5fbd\u7ae0\uff0c\u5fbd\u7ae0\u662f\u4e00\u4e2a\u5c0f\u7684\u6587\u672c\u6807\u7b7e\uff0c\u7528\u4e8e\u663e\u793a\u6709\u5173\u6269\u5c55\u7a0b\u5e8f\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u672a\u8bfb\u6d88\u606f\u6570")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"\u5728\u54ea\u4e2a\u90e8\u5206\u8bbe\u7f6eBadge?")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u8bbe\u7f6e\u5fbd\u7ae0\u80cc\u666f\u989c\u8272\nchrome.action.setBadgeBackgroundColor({\n  color: '#FF0000'\n}, () => {  /* ... */ });\n\n// \u8bbe\u7f6e\u5fbd\u7ae0\u6587\u672c\nchrome.action.setBadgeText({\n  text: 'Hello World!',\n  // \u6bcf\u4e2a\u9009\u9879\u5361\u7684\u6269\u5c55\u64cd\u4f5c\u53ef\u4ee5\u5177\u6709\u4e0d\u540c\u7684\u72b6\u6001\n  // \u5982\u679c\u7701\u7565\u8be5 tabId \u5c5e\u6027\uff0c\u5219\u5c06\u8be5\u8bbe\u7f6e\u89c6\u4e3a\u5168\u5c40\u8bbe\u7f6e\n  tabId: getTabId(),\n}, () => {  /* ... */ });\n\n// \u8bbe\u7f6e\u5fbd\u7ae0\u6587\u672c\u989c\u8272\nchrome.action.setBadgeTextColor({\n  color: '#ffffff'\n}, () => {  /* ... */ });\n")),(0,o.kt)("h3",{id:"popup\u5f39\u7a97onclicked\u4e8b\u4ef6"},"Popup\u5f39\u7a97/onClicked\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u70b9\u51fb\u5de5\u5177\u680f\u56fe\u6807\u65f6\uff0c\u663e\u793a\u5f39\u7a97\uff0c\u56de\u8c03\u65b9\u6cd5\u53c2\u6570\u4e3a\u5f53\u524dtab\u4fe1\u606f")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'// manifest.json\n{\n  "action": {\n    "default_popup": "popup.html"\n  }\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\n// \u76d1\u542cpopup\u56fe\u6807\u70b9\u51fb\u4e8b\u4ef6\nchrome.action.onClicked.addListener((tab) => {\n  // \u6253\u5f00popup\u5f39\u7a97\n  chrome.action.openPopup();\n\n  // \u5c06\u5185\u5bb9\u811a\u672c\u6ce8\u5165\u5230\u5f53\u524d\u9875\u9762\u4e2d\n  chrome.scripting.executeScript({\n    target: {tabId: tab.id},\n    files: ['content.js']\n  });\n\n  // \u6253\u5f00\u65b0\u9875\u9762\n  chrome.tabs.create({ url: 'index.html' });\n});\n")),(0,o.kt)("h3",{id:"disabledenable\u65b9\u6cd5"},"disabled()/enable()\u65b9\u6cd5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u7981\u7528\uff08\u4e0d\u53ef\u70b9\u51fb\uff09 / \u542f\u7528")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u7981\u7528\nchrome.action.disable(tabId, () => {  /* ... */ });\n\n// \u542f\u7528\nchrome.action.enable(tabId, () => {  /* ... */ });\n\n// \u83b7\u53d6\u5f53\u524d\u72b6\u6001\nchrome.action.isEnabled({tabId}, (result) => {  /* ... */ });\n")),(0,o.kt)("h2",{id:"chromealarms-\u95f9\u949f"},"chrome.alarms \u95f9\u949f"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5b89\u6392\u4ee3\u7801\u5468\u671f\u6027\u5730\u6216\u8005\u5728\u5c06\u6765\u7684\u6307\u5b9a\u65f6\u95f4\u8fd0\u884c")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-4"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "alarms"\n],\n')),(0,o.kt)("h3",{id:"\u68c0\u6d4b\u95f9\u949f\u7684\u6301\u7eed\u6027"},"\u68c0\u6d4b\u95f9\u949f\u7684\u6301\u7eed\u6027"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u95f9\u949f\u5728\u6d4f\u89c8\u5668\u5173\u95ed\u540e\u4f1a\u88ab\u6e05\u9664\uff0c\u5982\u679c\u9700\u8981\u6301\u7eed\u6027\uff0c\u9700\u8981\u5728",(0,o.kt)("inlineCode",{parentName:"p"},"background.js"),"\u4e2d\u91cd\u65b0\u6ce8\u518c")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// background.js\nconst STORAGE_KEY = "ALARM_ENABLED";\nconst MY_ALARM = "my-alarm";\n\nasync function checkAlarmState() {\n  // \u5224\u65ad\u4e0a\u6b21\u5173\u95ed\u6d4f\u89c8\u5668\u65f6\uff0c\u95f9\u949f\u662f\u5426\u5f00\u542f\n  const { alarmEnabled } = await chrome.storage.get(STORAGE_KEY);\n\n  if (alarmEnabled) {\n    const alarm = await chrome.alarms.get(MY_ALARM);\n\n    if (!alarm) {\n      await chrome.alarms.create({ periodInMinutes: 1 });\n    }\n  }\n}\n\ncheckAlarmState();\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-2"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"\u521b\u5efa\u95f9\u949f"},"\u521b\u5efa\u95f9\u949f"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u521b\u5efa\u95f9\u949f\uff0c\u5982\u679c\u5df2\u5b58\u5728\uff0c\u5219\u4f1a\u66f4\u65b0\n\u51cf\u5c11\u7528\u6237\u8ba1\u7b97\u673a\u4e0a\u7684\u8d1f\u8f7d\uff0cChrome \u5c06\u8b66\u62a5\u9650\u5236\u4e3a\u6700\u591a\u6bcf 30 \u79d2\u4e00\u6b21")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// \u95f9\u949f\u540d\u5b57\ntype alarmName = string;\n\n// \u95f9\u949f\u4fe1\u606f\n// \u95f9\u949f\u89e6\u53d1\u65f6\u95f4: {when}ms\u65f6\u89e6\u53d1   /  {delayInMinutes}\u5206\u949f\u540e\u89e6\u53d1\n// \u95f9\u949f\u5468\u671f: \u6bcf{periodInMinutes}\u5206\u949f\u89e6\u53d1\u4e00\u6b21\ntype alarmInfo = {\n  // \u95f9\u949f\u89e6\u53d1\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\n  when: number;\n  // x\u5206\u949f\u540e\u89e6\u53d1\uff0c\u5355\u4f4d\uff1a\u5206\u949f\n  delayInMinutes: number;\n  // \u95f9\u949f\u6bcfx\u5206\u949f\u89e6\u53d1\u4e00\u6b21\uff08when/delayInMinutes\u521d\u59cb\u4e8b\u4ef6\u4e4b\u540e\u5f00\u59cb\u7b97\uff09\n  periodInMinutes: number;\n}\n\nchrome.alarms.create(alarmName, alarmInfo);\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onInstalled.addListener(async ({ reason }) => {\n  if (reason !== 'install') {\n    return;\n  }\n\n  // Create an alarm so we have something to look at in the demo\n  await chrome.alarms.create(MY_ALARM, {\n    // \u95f9\u949f\u5468\u671f\uff0c\u5355\u4f4d\uff1a\u5206\u949f\n    periodInMinutes: 1,\n    // \u95f9\u949f\u89e6\u53d1\u65f6\u95f4\uff0c\u5355\u4f4d\uff1a\u6beb\u79d2\n    when: Date.now() + 1000 * 60 * 1,\n  });\n});\n")),(0,o.kt)("h4",{id:"clear\u65b9\u6cd5"},"clear()\u65b9\u6cd5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6e05\u9664\u95f9\u949f")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.alarms.clear(MY_ALARM, (wasCleared) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u6e05\u9664\u95f9\u949f', Date.now(), wasCleared);\n});\n\n// \u6e05\u9664\u6240\u6709\u95f9\u949f\nchrome.alarms.clearAll((wasCleared) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u6e05\u9664\u6240\u6709\u95f9\u949f', Date.now(), wasCleared);\n});\n")),(0,o.kt)("h4",{id:"get\u65b9\u6cd5"},"get()\u65b9\u6cd5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u95f9\u949f")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.alarms.get(MY_ALARM, (alarm) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u83b7\u53d6\u95f9\u949f', Date.now(), alarm);\n});\n\n// \u83b7\u53d6\u6240\u6709\u95f9\u949f\nchrome.alarms.getAll((alarms) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u83b7\u53d6\u6240\u6709\u95f9\u949f', Date.now(), alarms);\n});\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-2"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onalarm\u4e8b\u4ef6"},"onAlarm\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u76d1\u542c\u95f9\u949f\u89e6\u53d1\u4e8b\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.alarms.onAlarm.addListener((alarm) => {\n  if (alarm.name === MY_ALARM) {\n    console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u95f9\u949f\u89e6\u53d1\u4e8b\u4ef6', Date.now(), alarm);\n  }\n});\n")),(0,o.kt)("h2",{id:"chromecontextmenus-\u53f3\u952e\u83dc\u5355"},"chrome.contextMenus \u53f3\u952e\u83dc\u5355"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/contextMenus"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u6dfb\u52a0\u83dc\u5355\u9879\u5230\u6d4f\u89c8\u5668\u7684\u53f3\u952e\u83dc\u5355\u4e2d")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-5"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "contextMenus"\n],\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-3"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"create-\u521b\u5efa\u83dc\u5355\u9879"},"create() \u521b\u5efa\u83dc\u5355\u9879"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u521b\u5efa\u83dc\u5355\u9879\uff0c\u5982\u679c\u5df2\u5b58\u5728\uff0c\u5219\u4f1a\u66f4\u65b0")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// \u83dc\u5355\u9879\u4fe1\u606f\ntype menuItemInfo = {\n  // \u83dc\u5355\u9879\u6807\u9898\n  title: string;\n  // \u83dc\u5355\u9879\u7c7b\u578b\n  type: 'normal' | 'checkbox' | 'radio' | 'separator';\n  // \u83dc\u5355\u9879\u56fe\u6807\n  iconUrl: string;\n  // \u83dc\u5355\u9879\u662f\u5426\u53ef\u7528\n  enabled: boolean;\n  // \u83dc\u5355\u9879\u662f\u5426\u53ef\u89c1\n  visible: boolean;\n  // \u83dc\u5355\u9879\u662f\u5426\u9009\u4e2d\n  checked: boolean;\n  // \u83dc\u5355\u9879\u5b50\u83dc\u5355\n  children: menuItemInfo[];\n}\n\nchrome.contextMenus.create(menuItemInfo: menuItemInfo, callback?: function);\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.runtime.onInstalled.addListener(async ({ reason }) => {\n  if (reason !== 'install') {\n    return;\n  }\n\n  // Create an alarm so we have something to look at in the demo\n  await chrome.contextMenus.create({\n    id: 'my-menu',\n    title: 'My Menu',\n    type: 'normal',\n    iconUrl: 'icon-48.png',\n    enabled: true,\n    visible: true,\n    checked: false,\n    children: [\n      {\n        id: 'my-menu-1',\n        title: 'My Menu 1',\n        type: 'normal',\n        iconUrl: 'icon-48.png',\n        enabled: true,\n        visible: true,\n        checked: false,\n        children: [],\n      },\n      {\n        id: 'my-menu-2',\n        title: 'My Menu 2',\n        type: 'normal',\n        iconUrl: 'icon-48.png',\n        enabled: true,\n        visible: true,\n        checked: false,\n        children: [],\n      },\n    ],\n  });\n});\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-3"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onclicked\u4e8b\u4ef6"},"onClicked\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u76d1\u542c\u83dc\u5355\u9879\u70b9\u51fb\u4e8b\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.contextMenus.onClicked.addListener((info, tab) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u83dc\u5355\u9879\u70b9\u51fb\u4e8b\u4ef6', Date.now(), info, tab);\n});\n")),(0,o.kt)("h2",{id:"chromedownloads-\u4e0b\u8f7d"},"chrome.downloads \u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u542f\u52a8\u3001\u76d1\u89c6\u3001\u64cd\u4f5c\u548c\u641c\u7d22\u4e0b\u8f7d\uff0c\u6b64\u6743\u9650\u4f1a\u89e6\u53d1\u8b66\u544a")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-6"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "permissions": [\n    "downloads"\n  ],\n}\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-4"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"setshelfenabled-\u8bbe\u7f6e\u4e0b\u8f7d\u680f\u662f\u5426\u53ef\u89c1"},"setShelfEnabled() \u8bbe\u7f6e\u4e0b\u8f7d\u680f\u662f\u5426\u53ef\u89c1"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u8bbe\u7f6e\u4e0b\u8f7d\u680f\u662f\u5426\u53ef\u89c1\u3002\u5e95\u90e8\u7070\u8272\u4e0b\u8f7d\u680f\u3002\u65b0\u7248\u672c\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"setUiOptions"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.setShelfEnabled(enabled: boolean, callback?: function);\n")),(0,o.kt)("h4",{id:"download-\u4e0b\u8f7d\u94fe\u63a5"},"download() \u4e0b\u8f7d\u94fe\u63a5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u4e0b\u8f7d\u6587\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4e0b\u8f7d\u9879\u4fe1\u606f\ntype downloadItemInfo = {\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684URL\n  url: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6587\u4ef6\u540d\n  filename: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\n  saveAs: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u8bf7\u6c42\u5934\n  headers: object[];\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u8bf7\u6c42\u4f53\n  body: object;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u8bf7\u6c42\u65b9\u6cd5\n  method: 'GET' | 'POST';\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u8bf7\u6c42\u7c7b\u578b\n  type: 'image' | 'video' | 'audio' | 'text' | 'application' | 'multipart' | 'other';\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u5927\u5c0f\n  totalBytes: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u72b6\u6001\n  state: 'in_progress' | 'interrupted' | 'complete';\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u72b6\u6001\u4fe1\u606f\n  paused: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u9519\u8bef\u4fe1\u606f\n  error: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u521b\u5efa\u65f6\u95f4\n  startTime: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u7ed3\u675f\u65f6\u95f4\n  endTime: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6301\u7eed\u65f6\u95f4\n  elapsedTime: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\n  lastModified: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\n  lastAccessed: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684MIME\u7c7b\u578b\n  mime: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684SHA1\u54c8\u5e0c\u503c\n  sha1: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684SHA256\u54c8\u5e0c\u503c\n  sha256: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684MD5\u54c8\u5e0c\u503c\n  md5: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684CRC32C\u54c8\u5e0c\u503c\n  crc32c: string;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u5b89\u5168\u72b6\u6001\n  danger: 'safe' | 'accepted' | 'accepted_with_warning' | 'unknown';\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u662f\u5426\u53ef\u6062\u590d\n  canResume: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u662f\u5426\u5df2\u5220\u9664\n  exists: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u662f\u5426\u5df2\u6253\u5f00\n  opened: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u662f\u5426\u5df2\u4fdd\u5b58\n  state: 'in_progress' | 'interrupted' | 'complete';\n}\n\nchrome.downloads.download(downloadItemInfo: downloadItemInfo, callback?: function);\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.downloads.download({\n  url: 'https://www.baidu.com',\n  filename: 'baidu.html',\n  saveAs: false,\n  headers: [],\n  body: {},\n  method: 'GET',\n  type: 'text',\n  totalBytes: 0,\n  state: 'in_progress',\n  paused: false,\n  error: '',\n  startTime: 0,\n  endTime: 0,\n  elapsedTime: 0,\n  lastModified: 0,\n  lastAccessed: 0,\n  mime: '',\n  sha1: '',\n  sha256: '',\n  md5: '',\n  crc32c: '',\n  danger: 'safe',\n  canResume: false,\n  exists: false,\n  opened: false,\n}, (downloadItem) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u4e0b\u8f7d\u6587\u4ef6', Date.now(), downloadItem);\n});\n")),(0,o.kt)("h4",{id:"search-\u641c\u7d22"},"search() \u641c\u7d22"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u641c\u7d22\u6d4f\u89c8\u5668\u66fe\u7ecf\u4e0b\u8f7d\u8fc7\u7684\u6240\u6709\u6587\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type DownloadQuery = {\n  id: number;\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684URL\n  url: string;\n  urlRegex: string;\n  finalUrl: string;\n  finalUrlRegex: string;\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6587\u4ef6\u540d\n  filename: string;\n  filenameRegex: string;\n\n  // \u641c\u7d22\u7ed3\u679c\u7684\u6700\u5927\u6570\u91cf\n  limit: number;\n\n  // \u641c\u7d22\u7ed3\u679c\u6392\u5e8f\uff1aorderBy = [\u2018 startTime\u2019]\u6309\u7167\u5f00\u59cb\u65f6\u95f4\u5347\u5e8f\uff0c\u82e5\u8981\u6307\u5b9a\u964d\u5e8f\u987a\u5e8f\uff0c\u8bf7\u5728\u524d\u7f00\u4e2d\u52a0\u4e0a\u8fde\u5b57\u7b26: \u201c-startTime\u201d\u3002\n  orderBy: string[];\n\n  // url\u94fe\u63a5\u53c2\u6570\n  query: string[];\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u72b6\u6001\n  state: 'in_progress' | 'interrupted' | 'complete';\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684MIME\u7c7b\u578b\n  mime: string;\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u662f\u5426\u5df2\u5220\u9664\n  exists: boolean;\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u72b6\u6001\u4fe1\u606f\n  paused: boolean;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u9519\u8bef\u4fe1\u606f\n  error: string;\n\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u521b\u5efa\u65f6\u95f4\n  startTime: number;\n  startedAfter: number;\n  startedBefore: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u7ed3\u675f\u65f6\u95f4\n  endTime: number;\n  endedAfter: number;\n  endedBefore: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6301\u7eed\u65f6\u95f4\n  elapsedTime: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\n  lastModified: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u6700\u540e\u8bbf\u95ee\u65f6\u95f4\n  lastAccessed: number;\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u5b89\u5168\u72b6\u6001\n  danger: 'safe' | 'accepted' | 'accepted_with_warning' | 'unknown';\n  // \u66fe\u4e0b\u8f7d\u6587\u4ef6\u7684\u5927\u5c0f\n  fileSize: number;\n  totalBytes: number;\n  totalBytesGreater: number;\n  totalBytesLess: number;\n}\n// \u4e0b\u8f7d\u67e5\u8be2\u6761\u4ef6\n// query: {} \u67e5\u8be2\u6240\u6709\nchrome.downloads.search(\n  query: DownloadQuery,\n  callback?: (res) => void,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.downloads.search({\n  limit: 100,\n  orderBy: ['-startTime'],\n}, (downloadItems) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u641c\u7d22\u4e0b\u8f7d\u6587\u4ef6', Date.now(), downloadItems);\n});\n")),(0,o.kt)("h4",{id:"open-\u6253\u5f00\u6587\u4ef6"},"open() \u6253\u5f00\u6587\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6253\u5f00\u5df2\u4e0b\u8f7d\u7684\u6587\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.open(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"pause-\u6682\u505c\u4e0b\u8f7d"},"pause() \u6682\u505c\u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6682\u505c\u4e0b\u8f7d")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.pause(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"resume-\u6062\u590d\u4e0b\u8f7d"},"resume() \u6062\u590d\u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6062\u590d\u4e0b\u8f7d")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.resume(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"cancel-\u53d6\u6d88\u4e0b\u8f7d"},"cancel() \u53d6\u6d88\u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u53d6\u6d88\u4e0b\u8f7d")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.cancel(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"erase-\u5220\u9664\u4e0b\u8f7d"},"erase() \u5220\u9664\u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5220\u9664\u4e0b\u8f7d")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.erase(\n  query: DownloadQuery,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"removefile-\u5220\u9664\u6587\u4ef6"},"removeFile() \u5220\u9664\u6587\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5220\u9664\u6587\u4ef6")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.removeFile(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"acceptdanger-\u63a5\u53d7\u5371\u9669"},"acceptDanger() \u63a5\u53d7\u5371\u9669"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u63a5\u53d7\u5371\u9669")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.acceptDanger(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"show-\u663e\u793a\u4e0b\u8f7d"},"show() \u663e\u793a\u4e0b\u8f7d"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u663e\u793a\u4e0b\u8f7d")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.show(\n  downloadId: number,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"getfileicon-\u83b7\u53d6\u6587\u4ef6\u56fe\u6807"},"getFileIcon() \u83b7\u53d6\u6587\u4ef6\u56fe\u6807"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u6587\u4ef6\u56fe\u6807")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.getFileIcon(\n  downloadId: number,\n  options: {\n    size: number,\n  },\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"showdefaultfolder-\u663e\u793a\u9ed8\u8ba4\u6587\u4ef6\u5939"},"showDefaultFolder() \u663e\u793a\u9ed8\u8ba4\u6587\u4ef6\u5939"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u663e\u793a\u9ed8\u8ba4\u6587\u4ef6\u5939")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.downloads.showDefaultFolder()\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-4"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"oncreated-\u521b\u5efa\u4e8b\u4ef6"},"onCreated \u521b\u5efa\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u4e0b\u8f7d\u9879\u88ab\u4e0b\u8f7d\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.downloads.onCreated.addListener((item) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u521b\u5efa\u4e8b\u4ef6', Date.now(), item);\n});\n")),(0,o.kt)("h4",{id:"onerased-\u5220\u9664\u4e8b\u4ef6"},"onErased \u5220\u9664\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u4e0b\u8f7d\u9879\u88ab\u5220\u9664\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.downloads.onErased.addListener((item) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u5220\u9664\u4e8b\u4ef6', Date.now(), item);\n});\n")),(0,o.kt)("h4",{id:"onchanged-\u66f4\u65b0\u4e8b\u4ef6"},"onChanged \u66f4\u65b0\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u4e0b\u8f7d\u9879\u7684\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u89e6\u53d1\uff0c\u4f8b\u5982\u4e0b\u8f7d\u5b8c\u6210\u3001\u4e0b\u8f7d\u5931\u8d25\u3001\u4e0b\u8f7d\u6682\u505c\u3001\u4e0b\u8f7d\u6062\u590d\u3001\u4e0b\u8f7d\u53d6\u6d88\u7b49")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// background.js\nchrome.downloads.onChanged.addListener((item) => {\n  //   {\n  //     "error": {\n  //         "current": "USER_CANCELED"\n  //     },\n  //     "id": 254,\n  //     "state": {\n  //         "current": "interrupted",\n  //         "previous": "in_progress"\n  //     }\n  //    }\n  console.log(\'\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u66f4\u65b0\u4e8b\u4ef6\', Date.now(), item);\n});\n')),(0,o.kt)("h4",{id:"ondeterminingfilename-\u53d6\u6587\u4ef6\u540d\u4e8b\u4ef6"},"onDeterminingFilename \u53d6\u6587\u4ef6\u540d\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u4e0b\u8f7d\u9879\u7684\u6587\u4ef6\u540d\u9700\u8981\u786e\u5b9a\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.downloads.onDeterminingFilename.addListener((item, suggest) => {\n  // \u9ed8\u8ba4\u8986\u76d6\u539f\u6587\u4ef6\u540d\n  suggest({\n    filename: item.filename,\n    conflict_action: 'overwrite',\n    conflictAction: 'overwrite'\n  })\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u53d6\u6587\u4ef6\u540d\u4e8b\u4ef6', Date.now(), item, suggest);\n});\n")),(0,o.kt)("h2",{id:"chromenotifications-\u901a\u77e5"},"chrome.notifications \u901a\u77e5"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/notifications"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u521b\u5efa\u3001\u663e\u793a\u548c\u66f4\u65b0\u901a\u77e5")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-7"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "notifications"\n],\n')),(0,o.kt)("admonition",{title:"\u65b0\u7248\u672cChrome\u6d4f\u89c8\u5668\u7981\u7528\u4e86MacOS\u672c\u673a\u901a\u77e5",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"\u89e3\u51b3\u65b9\u6848\uff1a "),(0,o.kt)("ol",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ol"},"\u5728Chrome\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee\u5730\u5740\uff1achrome://flags\u3002 "),(0,o.kt)("li",{parentName:"ol"},"\u641c\u7d22\u680f\u4e2d\u641c\u7d22\uff1anotifications\uff0c\u627e\u5230 Enable system notifications \u9009\u9879\uff0c\u5c06\u5176\u9009\u9879\u503c\u6539\u4e3a Disabled"),(0,o.kt)("li",{parentName:"ol"},"\u91cd\u542f\u6d4f\u89c8\u5668\uff0c\u95ee\u9898\u89e3\u51b3\u3002"))),(0,o.kt)("h3",{id:"\u65b9\u6cd5-5"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"\u521b\u5efa\u901a\u77e5"},"\u521b\u5efa\u901a\u77e5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type NotificationOptions = {\n  // \u901a\u77e5\u7c7b\u578b\n  type: 'basic' | 'image' | 'list' | 'progress';\n  // \u901a\u77e5\u56fe\u6807\uff08\u53ef\u4ee5\u662f\u53d1\u4ef6\u4eba\u5934\u50cf\uff0c\u5e94\u7528\u56fe\u6807\u7b49\uff09\n  iconUrl: string;\n  // \u901a\u77e5\u6807\u9898\n  title: string;\n  // \u901a\u77e5\u5185\u5bb9\n  message: string;\n  // \u901a\u77e5\u6309\u94ae\uff0c\u6700\u591a\u4e24\u4e2a\n  buttons: {\n    title: string;\n  }[];\n  // \u901a\u77e5\u4f18\u5148\u7ea7(\u4ece -2 \u5230 2\u3002-2 \u662f\u6700\u4f4e\u4f18\u5148\u7ea7\u30022 \u662f\u6700\u9ad8\u7684\u3002\u9ed8\u8ba4\u503c\u4e3a\u96f6)\n  priority: number;\n\n  // \u4f7f\u7528\u8f83\u4f4e\u7c97\u7ec6\u5b57\u4f53\u7684\u5907\u7528\u901a\u77e5\u5185\u5bb9\n  contextMessage: string;\n  // \u901a\u77e5\u5217\u8868(Mac OS X \u4e0a\u7684\u7528\u6237\u53ea\u80fd\u770b\u5230\u7b2c\u4e00\u9879)\n  items: {\n    title: string;\n    message: string;\n  }[];\n  // \u663e\u793a\u901a\u77e5\u65f6\u4e0d\u5e94\u53d1\u51fa\u58f0\u97f3\u6216\u632f\u52a8\u3002\u9ed8\u8ba4\u503c\u4e3a false\u3002\n  silent: boolean;\n  // \u901a\u77e5\u662f\u5426\u53ef\u5173\u95ed\n  requireInteraction: boolean;\n  // \u901a\u77e5\u8fdb\u5ea6(\u4ece 0 \u5230 100)\n  progress: number;\n  // \u901a\u77e5\u8fdb\u5ea6\u72b6\u6001\n  progressState: 'indeterminate' | 'error' | 'paused' | 'normal';\n  // \u4e8b\u4ef6\u65f6\u95f4\u6233\uff08\u4ee5ms\u4e3a\u5355\u4f4d\uff09\n  eventTime: number;\n}\n\nchrome.notifications.create(\n  notificationId: string,\n  options: NotificationOptions,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"clear-\u6e05\u9664\u901a\u77e5"},"clear() \u6e05\u9664\u901a\u77e5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6e05\u9664\u901a\u77e5")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.notifications.clear(\n  notificationId: string,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"update-\u66f4\u65b0\u901a\u77e5"},"update() \u66f4\u65b0\u901a\u77e5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u66f4\u65b0\u901a\u77e5")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.notifications.update(\n  notificationId: string,\n  options: NotificationOptions,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"getpermissionlevel-\u83b7\u53d6\u901a\u77e5\u6743\u9650"},"getPermissionLevel() \u83b7\u53d6\u901a\u77e5\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u901a\u77e5\u6743\u9650")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.notifications.getPermissionLevel(\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"getall-\u83b7\u53d6\u6240\u6709\u901a\u77e5"},"getAll() \u83b7\u53d6\u6240\u6709\u901a\u77e5"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u6240\u6709\u901a\u77e5")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.notifications.getAll(\n  callback?: function,\n)\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-5"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onclosed-\u5173\u95ed\u4e8b\u4ef6"},"onClosed \u5173\u95ed\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u901a\u77e5\u5173\u95ed\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.notifications.onClosed.addListener((notificationId, byUser) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u5173\u95ed\u4e8b\u4ef6', Date.now(), notificationId, byUser);\n});\n")),(0,o.kt)("h4",{id:"onclicked-\u70b9\u51fb\u4e8b\u4ef6"},"onClicked \u70b9\u51fb\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u901a\u77e5\u88ab\u70b9\u51fb\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.notifications.onClicked.addListener((notificationId) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u70b9\u51fb\u4e8b\u4ef6', Date.now(), notificationId);\n});\n")),(0,o.kt)("h4",{id:"onbuttonclicked-\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6"},"onButtonClicked \u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u901a\u77e5\u6309\u94ae\u88ab\u70b9\u51fb\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.notifications.onButtonClicked.addListener((notificationId, buttonIndex) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u6309\u94ae\u70b9\u51fb\u4e8b\u4ef6', Date.now(), notificationId, buttonIndex);\n});\n")),(0,o.kt)("h4",{id:"onpermissionlevelchanged-\u6743\u9650\u7ea7\u522b\u53d8\u66f4\u4e8b\u4ef6"},"onPermissionLevelChanged \u6743\u9650\u7ea7\u522b\u53d8\u66f4\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u901a\u77e5\u6743\u9650\u7ea7\u522b\u53d8\u66f4\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.notifications.onPermissionLevelChanged.addListener((level) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u6743\u9650\u53d8\u66f4\u4e8b\u4ef6', Date.now(), level);\n});\n")),(0,o.kt)("h4",{id:"onshowsettings-\u663e\u793a\u4e8b\u4ef6"},"onShowSettings \u663e\u793a\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u901a\u77e5\u663e\u793a\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.notifications.onShowSettings.addListener((notificationId) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u663e\u793a\u4e8b\u4ef6', Date.now(), notificationId);\n});\n")),(0,o.kt)("h2",{id:"chromeoffscreen-\u79bb\u5c4f"},"chrome.offscreen \u79bb\u5c4f"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/offscreen/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u5728\u540e\u53f0\u7ebf\u7a0b\u4e2d\u521b\u5efa\u79bb\u5c4f\u753b\u5e03")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-8"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "offscreen"\n],\n')),(0,o.kt)("h3",{id:"createdocument-\u521b\u5efa\u79bb\u5c4f\u6587\u6863"},"createDocument() \u521b\u5efa\u79bb\u5c4f\u6587\u6863"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u521b\u5efa\u79bb\u5c4f\u6587\u6863")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'type Reason = (\n  "TESTING" |              // \u6d4b\u8bd5\u76ee\u7684\n  "AUDIO_PLAYBACK" |       // \u64ad\u653e\u97f3\u9891\n  "IFRAME_SCRIPTING" |     // \u5d4c\u5165 iframe \u5e76\u7f16\u5199\u811a\u672c\n  "DOM_SCRAPING" |         // \u6293\u53d6 DOM \u4ee5\u63d0\u53d6\u4fe1\u606f\n  "BLOBS" |                // \u4e0e Blob \u5bf9\u8c61\uff08\u5305\u62ec URL.createObjectURL() \uff09\u8fdb\u884c\u4ea4\u4e92\n  "DOM_PARSER" |           // \u89e3\u6790 DOM, new DomParser()\n  "USER_MEDIA" |           // \u4e0e\u6765\u81ea\u7528\u6237\u5a92\u4f53\u7684\u5a92\u4f53\u6d41\u8fdb\u884c\u4ea4\u4e92  getUserMedia()\n  "DISPLAY_MEDIA" |        // \u4e0e\u6765\u81ea\u663e\u793a\u5a92\u4f53\u7684\u5a92\u4f53\u6d41\u8fdb\u884c\u4ea4\u4e92\uff08\u4f8b\u5982 getDisplayMedia() \n  "WEB_RTC" |              // RTC\n  "CLIPBOARD" |            // \u526a\u8d34\u677f\n  "LOCAL_STORAGE" |        // \u672c\u5730\u5b58\u50a8\n  "WORKERS" |              // Web Workers\n  "BATTERY_STATUS" |       // \u7535\u6c60\u72b6\u6001\uff0cnavigator.getBattery()\n  "MATCH_MEDIA" |          // window.matchMedia\n  "GEOLOCATION"            // \u5730\u7406\u4f4d\u7f6e, navigator.geolocation()\n);\ntype CreateParameters = {\n  // \u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u7684\u5b57\u7b26\u4e32\uff0c\u66f4\u8be6\u7ec6\u5730\u89e3\u91ca\u4e86\u5bf9\u540e\u53f0\u4e0a\u4e0b\u6587\u7684\u9700\u6c42\n  justification?: string;\n  // \u7528\u4e8e\u521b\u5efa\u79bb\u5c4f\u6587\u6863\u7684\u539f\u56e0\uff0c\u5217\u51fa\u4e86\u5e94\u7528\u573a\u666f\n  reasons?: Reason[];\n\n  // \u76f8\u5bf9\u4e8e\u5f53\u524d\u6587\u6863\u7684URL\n  url: string;\n}\n\nchrome.offscreen.createDocument(parameters:  CreateParameters,callback?: function)\n')),(0,o.kt)("h3",{id:"closedocument-\u5173\u95ed\u79bb\u5c4f\u6587\u6863"},"closeDocument() \u5173\u95ed\u79bb\u5c4f\u6587\u6863"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.offscreen.closeDocument(callback?: function)\n")),(0,o.kt)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,o.kt)("h4",{id:"geo\u5b9a\u4f4d"},"GEO\u5b9a\u4f4d"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.action.onClicked.addListener(async () => {\n  await chrome.offscreen.createDocument({\n    url: '/offscreen.html',\n    reasons: [\n      chrome.offscreen.Reason.GEOLOCATION ||\n        chrome.offscreen.Reason.DOM_SCRAPING\n    ],\n    justification: 'add justification for geolocation use here'\n  });\n\n  const geolocation = await chrome.runtime.sendMessage({\n    type: 'get-geolocation',\n    target: 'offscreen'\n  });\n\n  await chrome.offscreen.closeDocument();\n  return geolocation;\n});\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- offscreen.html --\x3e\n<!DOCTYPE html>\n<script src="offscreen.js"><\/script>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// offscreen.js\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n  if (message.target !== 'offscreen') {\n    return false;\n  }\n\n  if (message.type !== 'get-geolocation') {\n    console.warn(`Unexpected message type received: '${message.type}'.`);\n    return;\n  }\n\n  getGeolocation().then((geolocation) => {\n    console.log('getGeolocation', geolocation);\n    sendResponse(geolocation)\n  });\n  return true;\n})\n\nfunction clone(obj) {\n  const copy = {};\n  if (obj === null || !(obj instanceof Object)) {\n    return obj;\n  } else {\n    for (const p in obj) {\n      copy[p] = clone(obj[p]);\n    }\n  }\n  return copy;\n}\n\nasync function getGeolocation() {\n  return new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(\n      (loc) => resolve(clone(loc)),\n      (err) => reject(err)\n    );\n  });\n}\n")),(0,o.kt)("h4",{id:"\u590d\u5236\u7c98\u8d34"},"\u590d\u5236\u7c98\u8d34"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.action.onClicked.addListener(async () => {\n  await chrome.offscreen.createDocument({\n    url: 'offscreen.html',\n    reasons: [chrome.offscreen.Reason.CLIPBOARD],\n    justification: 'Write text to the clipboard.'\n  });\n\n  chrome.runtime.sendMessage({\n    type: 'copy-data-to-clipboard',\n    target: 'offscreen-doc',\n    data: value\n  });\n});\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- offscreen.html --\x3e\n<!DOCTYPE html>\n<textarea id="text"></textarea>\n<script src="offscreen.js"><\/script>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// offscreen.js\nchrome.runtime.onMessage.addListener(async (message) => {\n  if (message.target !== 'offscreen-doc') {\n    return;\n  }\n\n  switch (message.type) {\n    case 'copy-data-to-clipboard':\n      handleClipboardWrite(message.data);\n      break;\n    default:\n      console.warn(`Unexpected message type received: '${message.type}'.`);\n  }\n});\n\nconst textEl = document.querySelector('#text');\n\nasync function handleClipboardWrite(data) {\n  try {\n    if (typeof data !== 'string') {\n      throw new TypeError(\n        `Value provided must be a 'string', got '${typeof data}'.`\n      );\n    }\n    \n    textEl.value = data;\n    textEl.select();\n    document.execCommand('copy');\n  } finally {\n    window.close();\n  }\n}\n")),(0,o.kt)("h4",{id:"\u89e3\u6790dom"},"\u89e3\u6790DOM"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.action.onClicked.addListener(async () => {\n  await chrome.offscreen.createDocument({\n    url: 'offscreen.html',\n    reasons: [chrome.offscreen.Reason.DOM_PARSER],\n    justification: 'Parse the DOM.'\n  });\n\n  const dom = await chrome.runtime.sendMessage({\n    type: 'add-exclamationmarks-to-headings',\n    target: 'offscreen',\n    data: '<html><head></head><body><h1>Hello World</h1></body></html>'\n  });\n\n chrome.offscreen.closeDocument();\n});\n\nchrome.runtime.onMessage.addListener(async (message) => {\n  if (message.target !== 'background') {\n    return;\n  }\n\n  switch (message.type) {\n    case 'add-exclamationmarks-result':\n      console.log('Received dom', message.data);\n      chrome.offscreen.closeDocument();\n      break;\n    default:\n      console.warn(`Unexpected message type received: '${message.type}'.`);\n  }\n});\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- offscreen.html --\x3e\n<!DOCTYPE html>\n<script src="offscreen.js"><\/script>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// offscreen.js\nchrome.runtime.onMessage.addListener(async (message) => {\n  if (message.target !== 'offscreen') {\n    return;\n  }\n\n  switch (message.type) {\n    case 'add-exclamationmarks-to-headings':\n      cconst parser = new DOMParser();\n      const document = parser.parseFromString(htmlString, 'text/html');\n      document.querySelectorAll('h1').forEach((heading) => (heading.textContent = heading.textContent + '!!!'));\n      chrome.runtime.sendMessage({\n        type: 'add-exclamationmarks-result',\n        target: 'background',\n        data: document.documentElement.outerHTML\n      });\n      break;\n    default:\n      console.warn(`Unexpected message type received: '${message.type}'.`);\n  }\n});\n")),(0,o.kt)("h4",{id:"\u7f51\u9875\u5f55\u5236"},"\u7f51\u9875\u5f55\u5236"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.action.onClicked.addListener(async (tab) => {\n  const existingContexts = await chrome.runtime.getContexts({});\n  let recording = false;\n\n  const offscreenDocument = existingContexts.find(\n    (c) => c.contextType === 'OFFSCREEN_DOCUMENT'\n  );\n\n  // If an offscreen document is not already open, create one.\n  if (!offscreenDocument) {\n    // Create an offscreen document.\n    await chrome.offscreen.createDocument({\n      url: 'offscreen.html',\n      reasons: ['USER_MEDIA'],\n      justification: 'Recording from chrome.tabCapture API'\n    });\n  } else {\n    recording = offscreenDocument.documentUrl.endsWith('#recording');\n  }\n\n  if (recording) {\n    chrome.runtime.sendMessage({\n      type: 'stop-recording',\n      target: 'offscreen'\n    });\n    chrome.action.setIcon({ path: 'icons/not-recording.png' });\n    return;\n  }\n\n  // Get a MediaStream for the active tab.\n  const streamId = await chrome.tabCapture.getMediaStreamId({\n    targetTabId: tab.id\n  });\n\n  // Send the stream ID to the offscreen document to start recording.\n  chrome.runtime.sendMessage({\n    type: 'start-recording',\n    target: 'offscreen',\n    data: streamId\n  });\n\n  chrome.action.setIcon({ path: '/icons/recording.png' });\n});\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- offscreen.html --\x3e\n<!DOCTYPE html>\n<script src="offscreen.js"><\/script>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// offscreen.js\nchrome.runtime.onMessage.addListener(async (message) => {\n  if (message.target === 'offscreen') {\n    switch (message.type) {\n      case 'start-recording':\n        startRecording(message.data);\n        break;\n      case 'stop-recording':\n        stopRecording();\n        break;\n      default:\n        throw new Error('Unrecognized message:', message.type);\n    }\n  }\n});\n\nlet recorder;\nlet data = [];\n\nasync function startRecording(streamId) {\n  if (recorder?.state === 'recording') {\n    throw new Error('Called startRecording while recording is in progress.');\n  }\n\n  const media = await navigator.mediaDevices.getUserMedia({\n    audio: {\n      mandatory: {\n        chromeMediaSource: 'tab',\n        chromeMediaSourceId: streamId\n      }\n    },\n    video: {\n      mandatory: {\n        chromeMediaSource: 'tab',\n        chromeMediaSourceId: streamId\n      }\n    }\n  });\n\n  const output = new AudioContext();\n  const source = output.createMediaStreamSource(media);\n  source.connect(output.destination);\n\n  recorder = new MediaRecorder(media, { mimeType: 'video/webm' });\n  recorder.ondataavailable = (event) => data.push(event.data);\n  recorder.onstop = () => {\n    const blob = new Blob(data, { type: 'video/webm' });\n    window.open(URL.createObjectURL(blob), '_blank');\n\n    recorder = undefined;\n    data = [];\n  };\n  recorder.start();\n\n  window.location.hash = 'recording';\n}\n\nasync function stopRecording() {\n  recorder.stop();\n\n  recorder.stream.getTracks().forEach((t) => t.stop());\n\n  window.location.hash = '';\n}\n")),(0,o.kt)("h2",{id:"chromepermissions-\u6743\u9650"},"chrome.permissions \u6743\u9650"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/permissions"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u9488\u5bf9\u58f0\u660e\u7684\u53ef\u9009\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"p"},"optional_permissions"),")\uff1b \u2014\u2014\u2014\u2014 \u8bf7\u6c42\u6388\u4e88\u6269\u5c55\u7a0b\u5e8f\u67d0\u4e9b\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"p"},"request"),")\n\u9488\u5bf9\u5df2\u6388\u4e88\u7684\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"p"},"permissions"),"):"),(0,o.kt)("ol",{parentName:"blockquote"},(0,o.kt)("li",{parentName:"ol"},"\u67e5\u8be2\u5f53\u524d\u6269\u5c55\u7a0b\u5e8f\u662f\u5426\u5177\u6709\u67d0\u4e9b\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"li"},"contains"),")"),(0,o.kt)("li",{parentName:"ol"},"\u79fb\u9664\u5df2\u6388\u4e88\u7684\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"li"},"remove"),")\uff1b\u79fb\u9664\u6240\u6709\u5df2\u6388\u4e88\u7684\u6743\u9650(",(0,o.kt)("inlineCode",{parentName:"li"},"removeAll"),")\uff1b"),(0,o.kt)("li",{parentName:"ol"},"\u76d1\u542c\u6743\u9650\u53d8\u66f4(",(0,o.kt)("inlineCode",{parentName:"li"},"onAdded"),"\u3001",(0,o.kt)("inlineCode",{parentName:"li"},"onRemoved"),")"))),(0,o.kt)("h3",{id:"\u65b9\u6cd5-6"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"contains-\u67e5\u8be2\u6743\u9650"},"contains() \u67e5\u8be2\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u67e5\u8be2\u5f53\u524d\u6269\u5c55\u7a0b\u5e8f\u662f\u5426\u5177\u6709\u67d0\u4e9b\u6743\u9650")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type Permissions = {\n  permissions: string[];\n  origins?: string[];\n}\nchrome.permissions.contains(\n  permissions: Permissions,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"request-\u8bf7\u6c42\u6743\u9650"},"request() \u8bf7\u6c42\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u8bf7\u6c42\u6388\u4e88\u6269\u5c55\u7a0b\u5e8f\u67d0\u4e9b\u6743\u9650\uff0c\u9700\u8981\u5728",(0,o.kt)("inlineCode",{parentName:"p"},"manifest.json"),"\u4e2d\u58f0\u660e",(0,o.kt)("inlineCode",{parentName:"p"},"optional_permissions"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "optional_permissions": [\n    // ...\n  ]\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type Permissions = {\n  permissions: string[];\n  origins?: string[];\n}\nchrome.permissions.request(\n  permissions: Permissions,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"remove-\u79fb\u9664\u6743\u9650"},"remove() \u79fb\u9664\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u79fb\u9664\u5df2\u6388\u4e88\u7684\u6743\u9650")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"type Permissions = {\n  permissions: string[];\n  origins?: string[];\n}\nchrome.permissions.remove(\n  permissions: Permissions,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"removeall-\u79fb\u9664\u6240\u6709\u6743\u9650"},"removeAll() \u79fb\u9664\u6240\u6709\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u79fb\u9664\u6240\u6709\u5df2\u6388\u4e88\u7684\u6743\u9650")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.permissions.removeAll(\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"getall-\u83b7\u53d6\u6240\u6709\u6743\u9650"},"getAll() \u83b7\u53d6\u6240\u6709\u6743\u9650"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u6240\u6709\u5df2\u6388\u4e88\u7684\u6743\u9650")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.permissions.getAll(\n  callback?: function,\n)\n")),(0,o.kt)("h3",{id:"\u4e8b\u4ef6-6"},"\u4e8b\u4ef6"),(0,o.kt)("h4",{id:"onadded-\u6dfb\u52a0\u4e8b\u4ef6"},"onAdded \u6dfb\u52a0\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u6743\u9650\u88ab\u6dfb\u52a0\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.permissions.onAdded.addListener((permissions) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u6dfb\u52a0\u4e8b\u4ef6', Date.now(), permissions);\n});\n")),(0,o.kt)("h4",{id:"onremoved-\u79fb\u9664\u4e8b\u4ef6"},"onRemoved \u79fb\u9664\u4e8b\u4ef6"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5f53\u6743\u9650\u88ab\u79fb\u9664\u65f6\u89e6\u53d1")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// background.js\nchrome.permissions.onRemoved.addListener((permissions) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u76d1\u542c\u79fb\u9664\u4e8b\u4ef6', Date.now(), permissions);\n});\n")),(0,o.kt)("h2",{id:"chromecookies-cookie"},"chrome.cookies cookie"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/cookies"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u521b\u5efa\u3001\u83b7\u53d6\u3001\u5220\u9664\u3001\u67e5\u8be2cookie")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "cookies"\n]\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-7"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"\u589e"},"\u589e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.cookies.set(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.cookies.set({\n  url: 'https://www.baidu.com',\n  name: 'name',\n  value: 'value',\n  domain: 'baidu.com',\n  path: '/',\n  secure: true,\n  httpOnly: true,\n  expirationDate: Date.now() + 1000 * 60 * 60 * 24 * 365 * 10,\n}, (cookie) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u521b\u5efacookie', Date.now(), cookie);\n});\n")),(0,o.kt)("h4",{id:"\u5220"},"\u5220"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.cookies.remove(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.cookies.remove({\n  url: 'https://www.baidu.com',\n  name: 'name',\n}, (cookie) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u5220\u9664cookie', Date.now(), cookie);\n});\n")),(0,o.kt)("h4",{id:"\u6539"},"\u6539"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.cookies.set(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.cookies.set({\n  url: 'https://www.baidu.com',\n  name: 'name',\n  value: 'value',\n  domain: 'baidu.com',\n  path: '/',\n  secure: true,\n  httpOnly: true,\n  expirationDate: Date.now() + 1000 * 60 * 60 * 24 * 365 * 10,\n}, (cookie) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u521b\u5efacookie', Date.now(), cookie);\n});\n")),(0,o.kt)("h4",{id:"\u67e5"},"\u67e5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.cookies.get(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.cookies.get({\n  url: 'https://www.baidu.com',\n  name: 'name',\n}, (cookie) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u83b7\u53d6cookie', Date.now(), cookie);\n});\n\nchrome.cookies.getAll({\n  url: 'https://www.baidu.com',\n}, (cookie) => {\n  console.log('\ud83c\udf44  background: >>>>>>>>>>>>>>>>>> \u83b7\u53d6\u6240\u6709cookie', Date.now(), cookie);\n});\n")),(0,o.kt)("h2",{id:"\u5176\u5b83"},"\u5176\u5b83"),(0,o.kt)("h3",{id:"chromeextension-\u6269\u5c55\u529f\u80fd"},"chrome.extension \u6269\u5c55\u529f\u80fd"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6b64api\u5927\u591a\u6570\u65b9\u6cd5\u90fd\u5408\u5e76\u5230",(0,o.kt)("inlineCode",{parentName:"p"},"chrome.runtime"))),(0,o.kt)("h2",{id:"chromeproxy-\u4ee3\u7406"},"chrome.proxy \u4ee3\u7406"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/proxy/"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u914d\u7f6e\u548c\u63a7\u5236\u4ee3\u7406\u8bbe\u7f6e")),(0,o.kt)("h3",{id:"\u6743\u9650\u8bbe\u7f6e-9"},"\u6743\u9650\u8bbe\u7f6e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "permissions": [\n    "proxy"\n  ],\n}\n')),(0,o.kt)("h3",{id:"\u65b9\u6cd5-8"},"\u65b9\u6cd5"),(0,o.kt)("h4",{id:"get-\u83b7\u53d6\u4ee3\u7406\u8bbe\u7f6e"},"get() \u83b7\u53d6\u4ee3\u7406\u8bbe\u7f6e"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u83b7\u53d6\u4ee3\u7406\u8bbe\u7f6e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.proxy.settings.get(\n  callback: function,\n)\n")),(0,o.kt)("h4",{id:"set-\u8bbe\u7f6e\u4ee3\u7406\u8bbe\u7f6e"},"set() \u8bbe\u7f6e\u4ee3\u7406\u8bbe\u7f6e"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u8bbe\u7f6e\u4ee3\u7406\u8bbe\u7f6e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.proxy.settings.set(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"clear-\u6e05\u9664\u4ee3\u7406\u8bbe\u7f6e"},"clear() \u6e05\u9664\u4ee3\u7406\u8bbe\u7f6e"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u6e05\u9664\u4ee3\u7406\u8bbe\u7f6e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.proxy.settings.clear(\n  details: object,\n  callback?: function,\n)\n")),(0,o.kt)("h3",{id:"chromeprinterproviderprintingprintingmetrics-\u6253\u5370\u673a\u76f8\u5173"},"chrome.printerProvider/printing/printingMetrics \u6253\u5370\u673a\u76f8\u5173"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/printerProvider"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromefontsetting-\u8bbe\u7f6echrome\u5b57\u4f53"},"chrome.fontSetting \u8bbe\u7f6eChrome\u5b57\u4f53"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/fontSettings"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromecommands-\u5feb\u6377\u952e\u8bbe\u7f6e\u4e0e\u76d1\u542c"},"chrome.commands \u5feb\u6377\u952e\u8bbe\u7f6e\u4e0e\u76d1\u542c"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/commands"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u8bbe\u7f6e\u548c\u76d1\u542c\u6d4f\u89c8\u5668\u547d\u4ee4")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"commands": {\n  "toggle-feature-foo": {\n    "suggested_key": {\n      "default": "Ctrl+Shift+Y",\n      "mac": "Command+Shift+Y"\n    },\n    "description": "Toggle feature foo"\n  }\n}\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u76d1\u542c\u5feb\u6377\u952e\nchrome.commands.onCommand.addListener((command) => {\n  console.log(`Command: ${command}`);\n});\n")),(0,o.kt)("h3",{id:"chromecontentsettings-\u5185\u5bb9\u8bbe\u7f6e"},"chrome.contentSettings \u5185\u5bb9\u8bbe\u7f6e"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/contentSettings"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u63a7\u5236\u7f51\u7ad9\u5185\u5bb9\u8bbe\u7f6e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "contentSettings"\n]\n')),(0,o.kt)("h3",{id:"chromebookmarks\u4e66\u7b7e"},"chrome.bookmarks\u4e66\u7b7e"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/bookmarks"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u521b\u5efa\u3001\u7ec4\u7ec7\u548c\u4ee5\u5176\u4ed6\u65b9\u5f0f\u64cd\u4f5c\u4e66\u7b7e")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"permissions": [\n  "bookmarks"\n]\n')),(0,o.kt)("h4",{id:"\u589e-1"},"\u589e"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.bookmarks.create(\n  bookmark: CreateDetails,\n  callback?: function,\n)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"chrome.bookmarks.create(\n  {\n    'parentId': extensionsFolderId,\n    'title': 'Extensions doc',\n    'url': 'https://developer.chrome.com/docs/extensions',\n  },\n  function(newFolder) {\n    console.log(\"added folder: \" + newFolder.title);\n  },\n);\n")),(0,o.kt)("h4",{id:"\u5220-1"},"\u5220"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"chrome.bookmarks.remove(\n  id: string,\n  callback?: function,\n)\n\n// \u9012\u5f52\u5220\u9664\u4e66\u7b7e\u6587\u4ef6\u5939\nchrome.bookmarks.removeTree(\n  id: string,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"\u6539-1"},"\u6539"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// \u79fb\u52a8\nchrome.bookmarks.move(\n  id: string,\n  destination: {\n    index?: number, parentId?:string \n  },\n  callback?: function,\n)\n\n// \u66f4\u65b0\nchrome.bookmarks.update(\n  id: string,\n  changes: object,\n  callback?: function,\n)\n")),(0,o.kt)("h4",{id:"\u67e5-1"},"\u67e5"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"// \u83b7\u53d6\u5355\u4e2a\nchrome.bookmarks.get(\n  idOrIdList: string | string[],\n  callback: function,\n)\n\n// \u83b7\u53d6\u6240\u6709\nchrome.bookmarks.getTree(\n  callback: function,\n)\n\n// \u83b7\u53d6\u5b50\u8282\u70b9\nchrome.bookmarks.getChildren(\n  id: string,\n  callback: function,\n)\n\n// \u83b7\u53d6\u6700\u8fd1\u6dfb\u52a0\u7684\u4e66\u7b7e\nchrome.bookmarks.getRecent(\n  numberOfItems: number,\n  callback: function,\n)\n\n// \u641c\u7d22\nchrome.bookmarks.search(\n  query: string,\n  callback: function,\n)\n")),(0,o.kt)("h4",{id:"\u4e8b\u4ef6-7"},"\u4e8b\u4ef6"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'// \u76d1\u542c\u4e66\u7b7e\u521b\u5efa\u4e8b\u4ef6\nchrome.bookmarks.onCreated.addListener(function(id, bookmark) {\n  console.log("created bookmark: " + bookmark.title);\n});\n\n// \u76d1\u542c\u4e66\u7b7e\u79fb\u52a8\u4e8b\u4ef6\nchrome.bookmarks.onMoved.addListener(function(id, moveInfo) {\n  console.log("moved bookmark: " + moveInfo.title);\n});\n\n// \u76d1\u542c\u4e66\u7b7e\u66f4\u65b0\u4e8b\u4ef6\nchrome.bookmarks.onChanged.addListener(function(id, changeInfo) {\n  console.log("changed bookmark: " + changeInfo.title);\n});\n\n// \u76d1\u542c\u4e66\u7b7e\u5220\u9664\u4e8b\u4ef6\nchrome.bookmarks.onRemoved.addListener(function(id, removeInfo) {\n  console.log("removed bookmark: " + removeInfo.title);\n});\n\n// \u76d1\u542c\u4e66\u7b7e\u5bfc\u5165\u4e8b\u4ef6\nchrome.bookmarks.onImportBegan.addListener(function() {\n  console.log("beginning import");\n});\n\n// \u76d1\u542c\u4e66\u7b7e\u5bfc\u5165\u5b8c\u6210\u4e8b\u4ef6\nchrome.bookmarks.onImportEnded.addListener(function() {\n  console.log("ending import");\n});\n\n// \u76d1\u542c\u91cd\u65b0\u6392\u5e8f\u4e8b\u4ef6\nchrome.bookmarks.onChildrenReordered.addListener(function(id, reorderInfo) {\n  console.log("reordered bookmark: " + reorderInfo.title);\n});\n')),(0,o.kt)("h3",{id:"chromeaudio-\u97f3\u9891"},"chrome.audio \u97f3\u9891"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/api/audio"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u83b7\u53d6\u8fde\u63a5\u5230\u7cfb\u7edf\u7684\u97f3\u9891\u8bbe\u5907\u4fe1\u606f, \u53ef\u80fd\u53ef\u4ee5\u505a\u97f3\u9891\u5206\u79bb\u63a7\u5236\uff1f\uff1f")),(0,o.kt)("h3",{id:"chromebrowsingdata-\u6d4f\u89c8\u6570\u636e"},"chrome.browsingData \u6d4f\u89c8\u6570\u636e"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/browsingData"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u5220\u9664\u6d4f\u89c8\u5668\u7684\u5386\u53f2\u8bb0\u5f55\u3001\u4e0b\u8f7d\u8bb0\u5f55\u3001\u7f13\u5b58\u3001cookie\u7b49")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u5220\u9664\u6d4f\u89c8\u5668\u6570\u636e\nchrome.browsingData.remove(\n  { since: removal_start },\n  {\n    appcache: true,\n    cache: true,\n    cacheStorage: true,\n    cookies: true,\n    downloads: true,\n    fileSystems: true,\n    formData: true,\n    history: true,\n    indexedDB: true,\n    localStorage: true,\n    serverBoundCertificates: true,\n    serviceWorkers: true,\n    pluginData: true,\n    passwords: true,\n    webSQL: true\n  }\n);\n")),(0,o.kt)("h3",{id:"chromehistory-\u5386\u53f2\u8bb0\u5f55"},"chrome.history \u5386\u53f2\u8bb0\u5f55"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/history"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromeomnibox-\u5730\u5740\u680f"},"chrome.omnibox \u5730\u5740\u680f"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/omnibox"},"\u5b98\u65b9\u6587\u6863"),"\n",(0,o.kt)("img",{parentName:"p",src:"https://developer.chrome.com/static/docs/extensions/reference/api/images/omnibox.png",alt:"\u5730\u5740\u680f"})),(0,o.kt)("h3",{id:"chromeidentity-\u8eab\u4efd\u9a8c\u8bc1"},"chrome.identity \u8eab\u4efd\u9a8c\u8bc1"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/identity"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromeidle-\u7a7a\u95f2"},"chrome.idle \u7a7a\u95f2"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/idle"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromei18n-\u56fd\u9645\u5316"},"chrome.i18n \u56fd\u9645\u5316"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/i18n"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromecertificateprovider-\u8bc1\u4e66\u63d0\u4f9b\u8005"},"chrome.certificateProvider \u8bc1\u4e66\u63d0\u4f9b\u8005"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/certificateProvider"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u7ba1\u7406\u8bc1\u4e66")),(0,o.kt)("h3",{id:"chromedebugger-\u8c03\u8bd5\u5668"},"chrome.debugger \u8c03\u8bd5\u5668"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/debugger"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5141\u8bb8\u7528\u6237\u7ba1\u7406\u6d4f\u89c8\u5668\u8c03\u8bd5\u5668")),(0,o.kt)("h3",{id:"chromeinputime-\u81ea\u5b9a\u4e49\u8f93\u5165\u6cd5"},"chrome.input.ime \u81ea\u5b9a\u4e49\u8f93\u5165\u6cd5"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/input_ime"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromegcm-google\u4e91\u6d88\u606f"},"chrome.gcm Google\u4e91\u6d88\u606f"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/gcm"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromereadinglist-\u9605\u8bfb\u5217\u8868"},"chrome.readingList \u9605\u8bfb\u5217\u8868"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/readingList"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Chrome 120 \u6d4b\u8bd5\u7248\u4e2d\u53ef\u7528")),(0,o.kt)("h3",{id:"chromesearch-\u641c\u7d22"},"chrome.search \u641c\u7d22"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/search"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromesessions-\u4f1a\u8bdd"},"chrome.sessions \u4f1a\u8bdd"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/sessions"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromesystemcpu-\u7cfb\u7edfcpu"},"chrome.system.cpu \u7cfb\u7edfCPU"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/system_cpu"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromesystemmemory-\u7cfb\u7edf\u5185\u5b58"},"chrome.system.memory \u7cfb\u7edf\u5185\u5b58"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/system_memory"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromesystemstorage-\u7cfb\u7edf\u5b58\u50a8"},"chrome.system.storage \u7cfb\u7edf\u5b58\u50a8"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/system_storage"},"\u5b98\u65b9\u6587\u6863")),(0,o.kt)("h3",{id:"chromesystemdisplay-\u7cfb\u7edf\u663e\u793a"},"chrome.system.display \u7cfb\u7edf\u663e\u793a"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/extensions/reference/system_display"},"\u5b98\u65b9\u6587\u6863")))}u.isMDXComponent=!0},49621:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/chrome-sidePanel-67bce1e4031cfdf84d5b06aa79d050af.png"}}]);