
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/api)



## runtime ËøêË°åÊó∂
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/runtime/)
> Áî®‰∫éÊ£ÄÊµãÂíåÂìçÂ∫îËøêË°åÊó∂‰∫ã‰ª∂Ôºå‰æãÂ¶ÇÂ∫îÁî®Á®ãÂ∫èÂÆâË£Ö„ÄÅÂêØÂä®„ÄÅÂÖ≥Èó≠„ÄÅÂç∏ËΩΩÁ≠â
> ËøîÂõûÂ∫îÁî®ÁöÑËøêË°åÊó∂‰ø°ÊÅØÔºå‰æãÂ¶ÇÂ∫îÁî®ÁöÑID„ÄÅÁâàÊú¨„ÄÅÊµèËßàÂô®ÂíåÊìç‰ΩúÁ≥ªÁªüÁöÑ‰ø°ÊÅØ


### Â±ûÊÄß

#### id Â∫îÁî®ID

```js
chrome.runtime.id
```

#### lastError ÈîôËØØ‰ø°ÊÅØ

```js
chrome.runtime.lastError
```

### ÊñπÊ≥ï - Ëé∑ÂèñÂ∫îÁî®‰ø°ÊÅØ

#### getManifest() Ëé∑Âèñmanifest.json

```js
chrome.runtime.getManifest()
```

#### getURL() Ëé∑ÂèñËµÑÊ∫êË∑ØÂæÑ

```js
chrome.runtime.getURL(path: string)
```

#### getPlatformInfo() Ëé∑ÂèñÂπ≥Âè∞‰ø°ÊÅØ

```js
chrome.runtime.getPlatformInfo()
```

#### getPackageDirectoryEntry() Ëé∑ÂèñÂåÖÁõÆÂΩï

```js
chrome.runtime.getPackageDirectoryEntry()
```

#### getBackgroundPage() Ëé∑ÂèñÂêéÂè∞È°µÈù¢
> ËøîÂõûÂêéÂè∞È°µÈù¢ÁöÑwindowÂØπË±°

```js
chrome.runtime.getBackgroundPage()
```

#### getContexts() Ëé∑ÂèñÂ∫îÁî®ÊâÄÊúâÈ°µÈù¢‰ø°ÊÅØ

```ts
type ContextType = "TAB" | "POPUP" | "BACKGROUND" | "OFFSCREEN_DOCUMENT" | "SIDE_PANEL";

type ContextFilter = {
  contextIds?: string[];
  contextTypes?: ContextType[];
  documentIds?: string[];
  documentOrigins?: string[];
  documentUrls?: string[];
  frameIds?: number[];
  incognito?: boolean;
  tabIds?: number[];
  windowIds?: number[];
}

chrome.runtime.getContexts(
  filter: ContextFilter,
  callback?: function,
)
```

### ÊñπÊ≥ï - Êìç‰ΩúÂ∫îÁî®

#### reload() ÈáçÊñ∞Âä†ËΩΩÂ∫îÁî®

```js
chrome.runtime.reload()
```

#### restart() ÈáçÂêØÂ∫îÁî®

```js
chrome.runtime.restart()
```

#### restartAfterDelay() Âª∂ËøüÈáçÂêØÂ∫îÁî®

```js
chrome.runtime.restartAfterDelay(
  seconds: number,
  callback?: function,
)
```


#### openOptionsPage() ÊâìÂºÄËÆæÁΩÆÈ°µÈù¢

```js
chrome.runtime.openOptionsPage()
```

#### requestUpdateCheck() Ê£ÄÊü•Êõ¥Êñ∞

```js
chrome.runtime.requestUpdateCheck(
  callback?: function,
)
```

#### setUninstallURL() ËÆæÁΩÆÂç∏ËΩΩURL

```js
chrome.runtime.setUninstallURL(
  url: string,
  callback?: function,
)
```


### ÊñπÊ≥ï - Ê∂àÊÅØ‰º†ÈÄí

#### sendMessage() Êèí‰ª∂ÂÜÖÂèëÈÄÅÊ∂àÊÅØ

```ts
chrome.runtime.sendMessage(
  extensionId?: string,
  message: any,
  options?: MessageOptions,
  callback?: (response: any) => void,
)
```

#### sendNativeMessage() Êèí‰ª∂Â§ñÂèëÈÄÅÊ∂àÊÅØ

```ts
chrome.runtime.sendNativeMessage(
  application: string,
  message: any,
  callback?: (response: any) => void,
)
```

#### connect() Êèí‰ª∂ÂÜÖÈïøËøûÊé•

```ts
chrome.runtime.connect(
  extensionId?: string,
  connectInfo?: ConnectInfo,
)
```

#### connectNative() Êèí‰ª∂Â§ñÈïøËøûÊé•

```ts
chrome.runtime.connectNative(
  application: string,
)
```


### ‰∫ã‰ª∂ - Â∫îÁî®ÁîüÂëΩÂë®Êúü

#### onStartup Â∫îÁî®ÂêØÂä®‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onStartup.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ÂêØÂä®‰∫ã‰ª∂', Date.now());
});
```

#### onInstalled Â∫îÁî®ÂÆâË£Ö‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onInstalled.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ÂÆâË£Ö‰∫ã‰ª∂', Date.now());
});
```

#### onSuspend Â∫îÁî®ÊåÇËµ∑‰∫ã‰ª∂(Âç∏ËΩΩ‰πãÂâç)

```js
// background.js
chrome.runtime.onSuspend.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ÊåÇËµ∑‰∫ã‰ª∂', Date.now());
});
```

#### onSuspendCanceled Â∫îÁî®ÂèñÊ∂àÊåÇËµ∑‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onSuspendCanceled.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ÂèñÊ∂àÊåÇËµ∑‰∫ã‰ª∂', Date.now());
});
```


#### onRestartRequired Â∫îÁî®ÈáçÂêØ‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onRestartRequired.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ÈáçÂêØ‰∫ã‰ª∂', Date.now());
});
```

### ‰∫ã‰ª∂ - Ê∂àÊÅØÁõëÂê¨

#### onMessage Â∫îÁî®ÂÜÖÊ∂àÊÅØ‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onMessage.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®Ê∂àÊÅØ‰∫ã‰ª∂', Date.now());
});
```

#### onMessageExternal Êù•Ëá™ÁΩëÈ°µ/ÂÖ∂‰ªñÊèí‰ª∂ÁöÑÊ∂àÊÅØ‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onMessageExternal.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®Â§ñÈÉ®Ê∂àÊÅØ‰∫ã‰ª∂', Date.now());
});
```

#### onConnect Â∫îÁî®ÂÜÖÈïøËøûÊé•‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onConnect.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®ËøûÊé•‰∫ã‰ª∂', Date.now());
});
```

#### onConnectExternal Êù•Ëá™ÁΩëÈ°µ/ÂÖ∂‰ªñÊèí‰ª∂ÁöÑËøûÊé•‰∫ã‰ª∂

```js
// background.js
chrome.runtime.onConnectExternal.addListener(() => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Â∫îÁî®Â§ñÈÉ®ËøûÊé•‰∫ã‰ª∂', Date.now());
});
```


## chrome.storage Â≠òÂÇ®
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/storage/)

> Áî®‰∫éÂ≠òÂÇ®„ÄÅÊ£ÄÁ¥¢ÂíåË∑üË∏™Â∫îÁî®ÁöÑÁî®Êà∑Êï∞ÊçÆ

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "storage"
],
```

### Â±ûÊÄß

#### sync ÂêåÊ≠•Â≠òÂÇ®

```js
chrome.storage.sync
```

#### local Êú¨Âú∞Â≠òÂÇ®

```js
chrome.storage.local
```

#### managed ÁÆ°ÁêÜÂ≠òÂÇ®

```js
chrome.storage.managed
```

#### sync ÂêåÊ≠•Â≠òÂÇ®

```js
chrome.storage.sync
```

### ‰∫ã‰ª∂

#### onChanged Â≠òÂÇ®ÂèòÂåñ‰∫ã‰ª∂

```ts
chrome.storage.onChanged.addListener(
  callback: (changes: object,areaName:string) => void
)
```

## chrome.sidePanel ‰æßËæπÊ†è
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/sidePanel/)

> Áî®‰∫éÂàõÂª∫„ÄÅÁÆ°ÁêÜÂíåÊéßÂà∂‰æßËæπÊ†è

![‰æßËæπÊ†è](@site/static/docs/13.ChromeÁØá/chrome-sidePanel.png)


### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "sidePanel"
],
```

### ÊñπÊ≥ï

#### getOptions() Ëé∑Âèñ‰æßËæπÊ†èÈÄâÈ°π

```ts
type GetPanelOptions = {
  tabId?: number;
}

type PanelOptions = {
  enabled?: boolean;
  path?: string;
  tabId?: number;
}

chrome.sidePanel.getOptions(
  options: GetPanelOptions,
  callback?: (options: PanelOptions)=>void,
)
```


#### getPanelBehavior() Ëé∑Âèñ‰æßËæπÊ†èË°å‰∏∫

```ts
type PanelBehavior = {
  enabled?: boolean;
  path?: string;
  tabId?: number;
}

chrome.sidePanel.getPanelBehavior(
  callback?: (options: PanelBehavior)=>void,
)
```

#### open() ÊâìÂºÄ‰æßËæπÊ†è

```ts
type OpenOptions = {
  // tabId Âíå windowId ÂøÖÈ°ªÊåáÂÆö‰∏Ä‰∏™
  tabId?: number;
  windowId?: number;
}

chrome.sidePanel.open(
  options: OpenOptions,
  callback?: () => void,
)
```

#### setOptions() ËÆæÁΩÆ‰æßËæπÊ†èÈÄâÈ°π

```ts
type PanelOptions = {
  enabled?: boolean;
  path?: string;
  tabId?: number;
}

chrome.sidePanel.setOptions(
  options: PanelOptions,
  callback?: () => void,
)
```


#### setPanelBehavior() ËÆæÁΩÆ‰æßËæπÊ†èË°å‰∏∫

```ts
type PanelBehavior = {
  enabled?: boolean;
  path?: string;
  tabId?: number;
}

chrome.sidePanel.setPanelBehavior(
  behavior: PanelBehavior,
  callback?: () => void,
)
```

## chrome.tabCapture Ê†áÁ≠æÂ™í‰ΩìÊµÅ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/tabCapture/)

> Áî®‰∫éÊçïËé∑Ê†áÁ≠æÁöÑÂ™í‰ΩìÊµÅ

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "tabCapture"
],
```

### ÊñπÊ≥ï

#### capture() ÊçïËé∑Ê†áÁ≠æÂ™í‰ΩìÊµÅ
> ÊçïËé∑ÂΩìÂâçÊ¥ªÂä®ÈÄâÈ°πÂç°ÁöÑÂèØËßÅÂå∫ÂüüÁöÑÂ™í‰ΩìÊµÅ

```ts
type MediaStreamConstraint = {
  mandatory: object;
  optional?: object;
}

type CaptureOptions = {
  audio?: boolean;
  audioConstraints?: MediaStreamConstraint;
  video?: boolean;
  videoConstraints?: MediaStreamConstraint;
}

chrome.tabCapture.capture(
  options: CaptureOptions,
  callback: (stream: LocalMediaStream) => void,
)
```

#### getCapturedTabs() Ëé∑ÂèñÊçïËé∑ÁöÑÊ†áÁ≠æ
> Â∑≤ËØ∑Ê±ÇÊçïËé∑ÊàñÊ≠£Âú®ÊçïËé∑ÁöÑÈÄâÈ°πÂç°ÂàóË°®

```ts
type TabCaptureState = 'pending' | 'active' | 'stopped' | 'error';

type CaptureInfo = {
  fullscreen: boolean;
  status: TabCaptureState;
  tabId: number;
}

chrome.tabCapture.getCapturedTabs(
  callback?: (result: CaptureInfo[]) => void,
)
```

#### getMediaStreamId() Ëé∑ÂèñÂ™í‰ΩìÊµÅID
> Ëé∑ÂèñÂΩìÂâçÂ™í‰ΩìÊµÅÁöÑID

```ts
type GetMediaStreamOptions = {
  // ÈÄâÈ°πÂç° ID
  consumerTabId?: number;
  targetTabId?: number;
}

chrome.tabCapture.getMediaStreamId(
  options?: GetMediaStreamOptions,
  callback?: (streamId: string) => void,
)

// Ëé∑ÂèñÂà∞ÁöÑÂ™í‰ΩìÊµÅIDÔºåÂÜçÈÄöËøá navigator.mediaDevices.getUserMedia({audio: {streamId: streamId}}) Ëé∑ÂèñÂ™í‰ΩìÊµÅ
navigator.mediaDevices.getUserMedia({
  audio: {
    mandatory: {
      chromeMediaSource: "tab",
      chromeMediaSourceId: id,
    },
  },
  video: {
    mandatory: {
      chromeMediaSource: "tab",
      chromeMediaSourceId: id,
    },
  },
});
```

### ‰∫ã‰ª∂

#### onStatusChanged Áä∂ÊÄÅÂèòÂåñ‰∫ã‰ª∂
> ÂΩìÊçïËé∑ÁöÑÊ†áÁ≠æÁöÑÁä∂ÊÄÅÂèëÁîüÂèòÂåñÊó∂Ëß¶Âèë

```ts
type CaptureInfo = {
  fullscreen: boolean;
  status: TabCaptureState;
  tabId: number;
}

// background.js
chrome.tabCapture.onStatusChanged.addListener((info: CaptureInfo) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Áä∂ÊÄÅÂèòÂåñ‰∫ã‰ª∂', Date.now(), info);
});
```

## chrome.scripting ËÑöÊú¨
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/scripting/)
> Âä®ÊÄÅÁÆ°ÁêÜÁΩëÈ°µÂÜÖÂÆπÔºå‰æãÂ¶ÇÊ≥®ÂÖ•ËÑöÊú¨„ÄÅÊ†∑ÂºèË°®„ÄÅÊâßË°åËÑöÊú¨Á≠â


### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "scripting"
],
```


### getRegisteredContentScripts() Ëé∑ÂèñÂ∑≤Ê≥®ÂÜåÁöÑÂÜÖÂÆπËÑöÊú¨

```ts
type ContentScriptFilter = {
  ids?: string[];
}

type RunAt = 'document_start' | 'document_end' | 'document_idle';

type ExecutionWorld = 'isolated_world' | 'shared_world';

type RegisteredContentScript = {
  allFrames?: boolean;
  css?: string[];
  excludeMatches?: string[];
  id: string;
  js?: string[];
  matchOriginAsFallback?: boolean;
  matches?: string[];
  persistAcrossSessions?: boolean;
  runAt?: RunAt;
  world?: ExecutionWorld;
}

chrome.scripting.getRegisteredContentScripts(
  filter?: ContentScriptFilter
  callback?: (scripts: RegisteredContentScript[]) => void,
)
```

### registerContentScripts() Ê≥®ÂÜåÂÜÖÂÆπËÑöÊú¨

```ts
type RegisteredContentScript = {
  allFrames?: boolean;
  css?: string[];
  excludeMatches?: string[];
  id: string;
  js?: string[];
  matchOriginAsFallback?: boolean;
  matches?: string[];
  persistAcrossSessions?: boolean;
  runAt?: RunAt;
  world?: ExecutionWorld;
}

chrome.scripting.registerContentScripts(
  scripts: RegisteredContentScript[],
  callback?: () => void,
)
```

### executeScript() Ê≥®ÂÖ•ËÑöÊú¨

```ts
type InjectionTarget = {
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÈÄâÈ°πÂç°ÁöÑ ID„ÄÇ
  tabId: number;
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÁâπÂÆöÂ∏ßÁöÑ ID„ÄÇ
  frameIds?: number[];
  // ËÑöÊú¨ÊòØÂê¶Â∫îÊ≥®ÂÖ•Âà∞ÈÄâÈ°πÂç°ÂÜÖÁöÑÊâÄÊúâÂ∏ß‰∏≠„ÄÇÈªòËÆ§ÂÄº‰∏∫ false„ÄÇÂ¶ÇÊûú frameIds ÊåáÂÆöÔºåÂàô‰∏çËÉΩ‰∏∫Áúü„ÄÇ
  allFrames?: boolean;
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÁâπÂÆö documentId ÁöÑ ID„ÄÇÂ¶ÇÊûú frameIds Â∑≤ËÆæÁΩÆÔºåÂàô‰∏çÂæóËÆæÁΩÆÊ≠§È°π„ÄÇ
  documentIds?: string[];
}

type ScriptInjection = {
  // Ë¶ÅÂºïÂÖ•ÊâÄÊèê‰æõÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇ‰ªÖÂΩìÊåáÂÆö‰∫ÜÂèÇÊï∞ func Êó∂ÔºåËøôÊâçÊúâÊïà„ÄÇËøô‰∫õÂèÇÊï∞ÂøÖÈ°ªÊòØ JSON ÂèØÂ∫èÂàóÂåñÁöÑ„ÄÇ
  args?: any[];
  // Ë¶ÅÊ≥®ÂÖ•ÁöÑ JS Êàñ CSS Êñá‰ª∂ÁöÑË∑ØÂæÑÔºåÁõ∏ÂØπ‰∫éÊâ©Â±ïÁöÑÊ†πÁõÆÂΩï
  files?: string[];
  // Á´ãÂç≥Ê≥®ÂÖ•
  injectImmediately?: boolean;
  target: InjectionTarget;
  // ÈöîÁ¶ªÁéØÂ¢É / ‰∏éÂÆø‰∏ªÈ°µÈù¢ÁöÑ JavaScript ÂÖ±‰∫´ÁöÑÊâßË°åÁéØÂ¢É
  world?: "ISOLATED" | "MAIN";
  func?: () => void;
}

chrome.scripting.executeScript(
  injection: ScriptInjection,
  callback?: () => void,
)
```

### insertCSS() Ê≥®ÂÖ•Ê†∑ÂºèË°®

```ts
type InjectionTarget = {
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÈÄâÈ°πÂç°ÁöÑ ID„ÄÇ
  tabId: number;
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÁâπÂÆöÂ∏ßÁöÑ ID„ÄÇ
  frameIds?: number[];
  // ËÑöÊú¨ÊòØÂê¶Â∫îÊ≥®ÂÖ•Âà∞ÈÄâÈ°πÂç°ÂÜÖÁöÑÊâÄÊúâÂ∏ß‰∏≠„ÄÇÈªòËÆ§ÂÄº‰∏∫ false„ÄÇÂ¶ÇÊûú frameIds ÊåáÂÆöÔºåÂàô‰∏çËÉΩ‰∏∫Áúü„ÄÇ
  allFrames?: boolean;
  // Ë¶ÅÊ≥®ÂÖ•Âà∞ÁöÑÁâπÂÆö documentId ÁöÑ ID„ÄÇÂ¶ÇÊûú frameIds Â∑≤ËÆæÁΩÆÔºåÂàô‰∏çÂæóËÆæÁΩÆÊ≠§È°π„ÄÇ
  documentIds?: string[];
}

type CSSInjection = {
  // ÂøÖÈ°ªÊåáÂÆö files Âíå css ‰πã‰∏Ä 
  css?: string;
  // ÂøÖÈ°ªÊåáÂÆö files Âíå css ‰πã‰∏Ä
  files?: string[];
  origin?: "USER" | "AUTHOR";
  target: InjectionTarget;
}

chrome.scripting.insertCSS(
  injection: CSSInjection,
  callback?: () => void,
)
```

### updateContentScript() Êõ¥Êñ∞ÂÜÖÂÆπËÑöÊú¨

```ts
type RegisteredContentScript = {
  allFrames?: boolean;
  css?: string[];
  excludeMatches?: string[];
  id: string;
  js?: string[];
  matchOriginAsFallback?: boolean;
  matches?: string[];
  persistAcrossSessions?: boolean;
  runAt?: RunAt;
  world?: ExecutionWorld;
}

chrome.scripting.updateContentScript(
  scripts: RegisteredContentScript[],
  callback?: () => void,
)
```

### unregisterContentScripts() Ê≥®ÈîÄÂÜÖÂÆπËÑöÊú¨

```ts
chrome.scripting.unregisterContentScripts(
  filter?: ContentScriptFilter,
  callback?: function,
)
```

### removeCSS() ÁßªÈô§Ê†∑ÂºèË°®

```ts
chrome.scripting.removeCSS(
  injection: CSSInjection,
  callback?: function,
)
```



## chrome.action Â∑•ÂÖ∑Ê†è
> ÊéßÂà∂Â∑•ÂÖ∑Ê†è‰∏≠Êâ©Â±ïÁ®ãÂ∫èÁöÑÂõæÊ†áÔºå`manifest.json`ÂøÖÈ°ªÈÖçÁΩÆ`action`Â≠óÊÆµ

### iconÂõæÊ†á

```json
// manifest.json
{
  "action": {
    "default_icon": "icon-48.png"
  }
}
```

```js
// background.js
const canvas = new OffscreenCanvas(16, 16);
const context = canvas.getContext('2d');
context.clearRect(0, 0, 16, 16);
context.fillStyle = '#00FF00';  // Green
context.fillRect(0, 0, 16, 16);
const imageData = context.getImageData(0, 0, 16, 16);

chrome.action.setIcon({
  // imageData: ÂõæÂÉèÊï∞ÊçÆ
  imageData,
  // path: Áõ∏ÂØπÂõæÂÉèË∑ØÂæÑ
  path: {
    "48": "icon-48.png",
    "128": "icon-128.png"
  }
}, () => { 
  /* callback */ 
});
```

### Tooltip(Title)ÊèêÁ§∫
> ÂΩìÁî®Êà∑Â∞ÜÈº†Ê†áÊåáÈíàÊÇ¨ÂÅúÂú®Â∑•ÂÖ∑Ê†è‰∏≠ÁöÑÊâ©Â±ïÂõæÊ†á‰∏äÊó∂ÔºåÂ∞ÜÊòæÁ§∫Â∑•ÂÖ∑ÊèêÁ§∫ÊàñÊ†áÈ¢ò

```json
// manifest.json
{
  "action": {
    "default_title": "Click here!"
  }
}
```

```js 
// background.js
chrome.action.setTitle({
  title: 'Hello World!'
}, () => {  /* ... */ });
```

### BadgeÂæΩÁ´†
> Âú®Â∑•ÂÖ∑Ê†èÂõæÊ†á‰∏äÊòæÁ§∫ÂæΩÁ´†ÔºåÂæΩÁ´†ÊòØ‰∏Ä‰∏™Â∞èÁöÑÊñáÊú¨Ê†áÁ≠æÔºåÁî®‰∫éÊòæÁ§∫ÊúâÂÖ≥Êâ©Â±ïÁ®ãÂ∫èÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇÊú™ËØªÊ∂àÊÅØÊï∞

:::tip
Âú®Âì™‰∏™ÈÉ®ÂàÜËÆæÁΩÆBadge?
:::

```js
// ËÆæÁΩÆÂæΩÁ´†ËÉåÊôØÈ¢úËâ≤
chrome.action.setBadgeBackgroundColor({
  color: '#FF0000'
}, () => {  /* ... */ });

// ËÆæÁΩÆÂæΩÁ´†ÊñáÊú¨
chrome.action.setBadgeText({
  text: 'Hello World!',
  // ÊØè‰∏™ÈÄâÈ°πÂç°ÁöÑÊâ©Â±ïÊìç‰ΩúÂèØ‰ª•ÂÖ∑Êúâ‰∏çÂêåÁöÑÁä∂ÊÄÅ
  // Â¶ÇÊûúÁúÅÁï•ËØ• tabId Â±ûÊÄßÔºåÂàôÂ∞ÜËØ•ËÆæÁΩÆËßÜ‰∏∫ÂÖ®Â±ÄËÆæÁΩÆ
  tabId: getTabId(),
}, () => {  /* ... */ });

// ËÆæÁΩÆÂæΩÁ´†ÊñáÊú¨È¢úËâ≤
chrome.action.setBadgeTextColor({
  color: '#ffffff'
}, () => {  /* ... */ });
```

### PopupÂºπÁ™ó/onClicked‰∫ã‰ª∂
> ÁÇπÂáªÂ∑•ÂÖ∑Ê†èÂõæÊ†áÊó∂ÔºåÊòæÁ§∫ÂºπÁ™óÔºåÂõûË∞ÉÊñπÊ≥ïÂèÇÊï∞‰∏∫ÂΩìÂâçtab‰ø°ÊÅØ

```json
// manifest.json
{
  "action": {
    "default_popup": "popup.html"
  }
}
```

```js
// background.js
// ÁõëÂê¨popupÂõæÊ†áÁÇπÂáª‰∫ã‰ª∂
chrome.action.onClicked.addListener((tab) => {
  // ÊâìÂºÄpopupÂºπÁ™ó
  chrome.action.openPopup();

  // Â∞ÜÂÜÖÂÆπËÑöÊú¨Ê≥®ÂÖ•Âà∞ÂΩìÂâçÈ°µÈù¢‰∏≠
  chrome.scripting.executeScript({
    target: {tabId: tab.id},
    files: ['content.js']
  });

  // ÊâìÂºÄÊñ∞È°µÈù¢
  chrome.tabs.create({ url: 'index.html' });
});
```

### disabled()/enable()ÊñπÊ≥ï
> Á¶ÅÁî®Ôºà‰∏çÂèØÁÇπÂáªÔºâ / ÂêØÁî®

```js
// Á¶ÅÁî®
chrome.action.disable(tabId, () => {  /* ... */ });

// ÂêØÁî®
chrome.action.enable(tabId, () => {  /* ... */ });

// Ëé∑ÂèñÂΩìÂâçÁä∂ÊÄÅ
chrome.action.isEnabled({tabId}, (result) => {  /* ... */ });
```


## chrome.alarms ÈóπÈíü
> ÂÆâÊéí‰ª£Á†ÅÂë®ÊúüÊÄßÂú∞ÊàñËÄÖÂú®Â∞ÜÊù•ÁöÑÊåáÂÆöÊó∂Èó¥ËøêË°å

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "alarms"
],
```

### Ê£ÄÊµãÈóπÈíüÁöÑÊåÅÁª≠ÊÄß
> ÈóπÈíüÂú®ÊµèËßàÂô®ÂÖ≥Èó≠Âêé‰ºöË¢´Ê∏ÖÈô§ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊåÅÁª≠ÊÄßÔºåÈúÄË¶ÅÂú®`background.js`‰∏≠ÈáçÊñ∞Ê≥®ÂÜå

```js
// background.js
const STORAGE_KEY = "ALARM_ENABLED";
const MY_ALARM = "my-alarm";

async function checkAlarmState() {
  // Âà§Êñ≠‰∏äÊ¨°ÂÖ≥Èó≠ÊµèËßàÂô®Êó∂ÔºåÈóπÈíüÊòØÂê¶ÂºÄÂêØ
  const { alarmEnabled } = await chrome.storage.get(STORAGE_KEY);

  if (alarmEnabled) {
    const alarm = await chrome.alarms.get(MY_ALARM);

    if (!alarm) {
      await chrome.alarms.create({ periodInMinutes: 1 });
    }
  }
}

checkAlarmState();
```

### ÊñπÊ≥ï
#### ÂàõÂª∫ÈóπÈíü
> ÂàõÂª∫ÈóπÈíüÔºåÂ¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÂàô‰ºöÊõ¥Êñ∞
> ÂáèÂ∞ëÁî®Êà∑ËÆ°ÁÆóÊú∫‰∏äÁöÑË¥üËΩΩÔºåChrome Â∞ÜË≠¶Êä•ÈôêÂà∂‰∏∫ÊúÄÂ§öÊØè 30 Áßí‰∏ÄÊ¨°

```ts
// ÈóπÈíüÂêçÂ≠ó
type alarmName = string;

// ÈóπÈíü‰ø°ÊÅØ
// ÈóπÈíüËß¶ÂèëÊó∂Èó¥: {when}msÊó∂Ëß¶Âèë   /  {delayInMinutes}ÂàÜÈíüÂêéËß¶Âèë
// ÈóπÈíüÂë®Êúü: ÊØè{periodInMinutes}ÂàÜÈíüËß¶Âèë‰∏ÄÊ¨°
type alarmInfo = {
  // ÈóπÈíüËß¶ÂèëÊó∂Èó¥ÔºåÂçï‰ΩçÔºöÊØ´Áßí
  when: number;
  // xÂàÜÈíüÂêéËß¶ÂèëÔºåÂçï‰ΩçÔºöÂàÜÈíü
  delayInMinutes: number;
  // ÈóπÈíüÊØèxÂàÜÈíüËß¶Âèë‰∏ÄÊ¨°Ôºàwhen/delayInMinutesÂàùÂßã‰∫ã‰ª∂‰πãÂêéÂºÄÂßãÁÆóÔºâ
  periodInMinutes: number;
}

chrome.alarms.create(alarmName, alarmInfo);
```

```js
// background.js
chrome.runtime.onInstalled.addListener(async ({ reason }) => {
  if (reason !== 'install') {
    return;
  }

  // Create an alarm so we have something to look at in the demo
  await chrome.alarms.create(MY_ALARM, {
    // ÈóπÈíüÂë®ÊúüÔºåÂçï‰ΩçÔºöÂàÜÈíü
    periodInMinutes: 1,
    // ÈóπÈíüËß¶ÂèëÊó∂Èó¥ÔºåÂçï‰ΩçÔºöÊØ´Áßí
    when: Date.now() + 1000 * 60 * 1,
  });
});
```


#### clear()ÊñπÊ≥ï
> Ê∏ÖÈô§ÈóπÈíü

```js
// background.js
chrome.alarms.clear(MY_ALARM, (wasCleared) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ê∏ÖÈô§ÈóπÈíü', Date.now(), wasCleared);
});

// Ê∏ÖÈô§ÊâÄÊúâÈóπÈíü
chrome.alarms.clearAll((wasCleared) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ê∏ÖÈô§ÊâÄÊúâÈóπÈíü', Date.now(), wasCleared);
});
```

#### get()ÊñπÊ≥ï
> Ëé∑ÂèñÈóπÈíü

```js
// background.js
chrome.alarms.get(MY_ALARM, (alarm) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ëé∑ÂèñÈóπÈíü', Date.now(), alarm);
});

// Ëé∑ÂèñÊâÄÊúâÈóπÈíü
chrome.alarms.getAll((alarms) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ëé∑ÂèñÊâÄÊúâÈóπÈíü', Date.now(), alarms);
});
```


### ‰∫ã‰ª∂
####  onAlarm‰∫ã‰ª∂
> ÁõëÂê¨ÈóπÈíüËß¶Âèë‰∫ã‰ª∂

```js
// background.js
chrome.alarms.onAlarm.addListener((alarm) => {
  if (alarm.name === MY_ALARM) {
    console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÈóπÈíüËß¶Âèë‰∫ã‰ª∂', Date.now(), alarm);
  }
});
```


## chrome.contextMenus Âè≥ÈîÆËèúÂçï
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/contextMenus)

> ÂÖÅËÆ∏Áî®Êà∑Ê∑ªÂä†ËèúÂçïÈ°πÂà∞ÊµèËßàÂô®ÁöÑÂè≥ÈîÆËèúÂçï‰∏≠

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "contextMenus"
],
```

### ÊñπÊ≥ï

#### create() ÂàõÂª∫ËèúÂçïÈ°π
> ÂàõÂª∫ËèúÂçïÈ°πÔºåÂ¶ÇÊûúÂ∑≤Â≠òÂú®ÔºåÂàô‰ºöÊõ¥Êñ∞

```ts
// ËèúÂçïÈ°π‰ø°ÊÅØ
type menuItemInfo = {
  // ËèúÂçïÈ°πÊ†áÈ¢ò
  title: string;
  // ËèúÂçïÈ°πÁ±ªÂûã
  type: 'normal' | 'checkbox' | 'radio' | 'separator';
  // ËèúÂçïÈ°πÂõæÊ†á
  iconUrl: string;
  // ËèúÂçïÈ°πÊòØÂê¶ÂèØÁî®
  enabled: boolean;
  // ËèúÂçïÈ°πÊòØÂê¶ÂèØËßÅ
  visible: boolean;
  // ËèúÂçïÈ°πÊòØÂê¶ÈÄâ‰∏≠
  checked: boolean;
  // ËèúÂçïÈ°πÂ≠êËèúÂçï
  children: menuItemInfo[];
}

chrome.contextMenus.create(menuItemInfo: menuItemInfo, callback?: function);
```

```js
// background.js
chrome.runtime.onInstalled.addListener(async ({ reason }) => {
  if (reason !== 'install') {
    return;
  }

  // Create an alarm so we have something to look at in the demo
  await chrome.contextMenus.create({
    id: 'my-menu',
    title: 'My Menu',
    type: 'normal',
    iconUrl: 'icon-48.png',
    enabled: true,
    visible: true,
    checked: false,
    children: [
      {
        id: 'my-menu-1',
        title: 'My Menu 1',
        type: 'normal',
        iconUrl: 'icon-48.png',
        enabled: true,
        visible: true,
        checked: false,
        children: [],
      },
      {
        id: 'my-menu-2',
        title: 'My Menu 2',
        type: 'normal',
        iconUrl: 'icon-48.png',
        enabled: true,
        visible: true,
        checked: false,
        children: [],
      },
    ],
  });
});
```

### ‰∫ã‰ª∂

#### onClicked‰∫ã‰ª∂
> ÁõëÂê¨ËèúÂçïÈ°πÁÇπÂáª‰∫ã‰ª∂

```js
// background.js
chrome.contextMenus.onClicked.addListener((info, tab) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ËèúÂçïÈ°πÁÇπÂáª‰∫ã‰ª∂', Date.now(), info, tab);
});
```

## chrome.downloads ‰∏ãËΩΩ
> ÂêØÂä®„ÄÅÁõëËßÜ„ÄÅÊìç‰ΩúÂíåÊêúÁ¥¢‰∏ãËΩΩÔºåÊ≠§ÊùÉÈôê‰ºöËß¶ÂèëË≠¶Âëä

### ÊùÉÈôêËÆæÁΩÆ
```json
{
  "permissions": [
    "downloads"
  ],
}
```

### ÊñπÊ≥ï

#### setShelfEnabled() ËÆæÁΩÆ‰∏ãËΩΩÊ†èÊòØÂê¶ÂèØËßÅ
> ËÆæÁΩÆ‰∏ãËΩΩÊ†èÊòØÂê¶ÂèØËßÅ„ÄÇÂ∫ïÈÉ®ÁÅ∞Ëâ≤‰∏ãËΩΩÊ†è„ÄÇÊñ∞ÁâàÊú¨‰ΩøÁî®`setUiOptions`

```ts
chrome.downloads.setShelfEnabled(enabled: boolean, callback?: function);
```

#### download() ‰∏ãËΩΩÈìæÊé•
> ‰∏ãËΩΩÊñá‰ª∂

```ts
// ‰∏ãËΩΩÈ°π‰ø°ÊÅØ
type downloadItemInfo = {
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑURL
  url: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊñá‰ª∂Âêç
  filename: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑ‰øùÂ≠òË∑ØÂæÑ
  saveAs: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑËØ∑Ê±ÇÂ§¥
  headers: object[];
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑËØ∑Ê±Ç‰Ωì
  body: object;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑËØ∑Ê±ÇÊñπÊ≥ï
  method: 'GET' | 'POST';
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑËØ∑Ê±ÇÁ±ªÂûã
  type: 'image' | 'video' | 'audio' | 'text' | 'application' | 'multipart' | 'other';
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂ§ßÂ∞è
  totalBytes: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁä∂ÊÄÅ
  state: 'in_progress' | 'interrupted' | 'complete';
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ
  paused: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÈîôËØØ‰ø°ÊÅØ
  error: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂàõÂª∫Êó∂Èó¥
  startTime: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁªìÊùüÊó∂Èó¥
  endTime: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊåÅÁª≠Êó∂Èó¥
  elapsedTime: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊúÄÂêé‰øÆÊîπÊó∂Èó¥
  lastModified: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊúÄÂêéËÆøÈóÆÊó∂Èó¥
  lastAccessed: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑMIMEÁ±ªÂûã
  mime: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑSHA1ÂìàÂ∏åÂÄº
  sha1: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑSHA256ÂìàÂ∏åÂÄº
  sha256: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑMD5ÂìàÂ∏åÂÄº
  md5: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑCRC32CÂìàÂ∏åÂÄº
  crc32c: string;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂÆâÂÖ®Áä∂ÊÄÅ
  danger: 'safe' | 'accepted' | 'accepted_with_warning' | 'unknown';
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊòØÂê¶ÂèØÊÅ¢Â§ç
  canResume: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊòØÂê¶Â∑≤Âà†Èô§
  exists: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊòØÂê¶Â∑≤ÊâìÂºÄ
  opened: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊòØÂê¶Â∑≤‰øùÂ≠ò
  state: 'in_progress' | 'interrupted' | 'complete';
}

chrome.downloads.download(downloadItemInfo: downloadItemInfo, callback?: function);
```

```js
// background.js
chrome.downloads.download({
  url: 'https://www.baidu.com',
  filename: 'baidu.html',
  saveAs: false,
  headers: [],
  body: {},
  method: 'GET',
  type: 'text',
  totalBytes: 0,
  state: 'in_progress',
  paused: false,
  error: '',
  startTime: 0,
  endTime: 0,
  elapsedTime: 0,
  lastModified: 0,
  lastAccessed: 0,
  mime: '',
  sha1: '',
  sha256: '',
  md5: '',
  crc32c: '',
  danger: 'safe',
  canResume: false,
  exists: false,
  opened: false,
}, (downloadItem) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ‰∏ãËΩΩÊñá‰ª∂', Date.now(), downloadItem);
});
```

#### search() ÊêúÁ¥¢
> ÊêúÁ¥¢ÊµèËßàÂô®ÊõæÁªè‰∏ãËΩΩËøáÁöÑÊâÄÊúâÊñá‰ª∂

```ts
type DownloadQuery = {
  id: number;

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑURL
  url: string;
  urlRegex: string;
  finalUrl: string;
  finalUrlRegex: string;

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊñá‰ª∂Âêç
  filename: string;
  filenameRegex: string;

  // ÊêúÁ¥¢ÁªìÊûúÁöÑÊúÄÂ§ßÊï∞Èáè
  limit: number;

  // ÊêúÁ¥¢ÁªìÊûúÊéíÂ∫èÔºöorderBy = [‚Äò startTime‚Äô]ÊåâÁÖßÂºÄÂßãÊó∂Èó¥ÂçáÂ∫èÔºåËã•Ë¶ÅÊåáÂÆöÈôçÂ∫èÈ°∫Â∫èÔºåËØ∑Âú®ÂâçÁºÄ‰∏≠Âä†‰∏äËøûÂ≠óÁ¨¶: ‚Äú-startTime‚Äù„ÄÇ
  orderBy: string[];

  // urlÈìæÊé•ÂèÇÊï∞
  query: string[];

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁä∂ÊÄÅ
  state: 'in_progress' | 'interrupted' | 'complete';

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑMIMEÁ±ªÂûã
  mime: string;

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊòØÂê¶Â∑≤Âà†Èô§
  exists: boolean;

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ
  paused: boolean;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÈîôËØØ‰ø°ÊÅØ
  error: string;

  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂàõÂª∫Êó∂Èó¥
  startTime: number;
  startedAfter: number;
  startedBefore: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÁªìÊùüÊó∂Èó¥
  endTime: number;
  endedAfter: number;
  endedBefore: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊåÅÁª≠Êó∂Èó¥
  elapsedTime: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊúÄÂêé‰øÆÊîπÊó∂Èó¥
  lastModified: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊúÄÂêéËÆøÈóÆÊó∂Èó¥
  lastAccessed: number;
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂÆâÂÖ®Áä∂ÊÄÅ
  danger: 'safe' | 'accepted' | 'accepted_with_warning' | 'unknown';
  // Êõæ‰∏ãËΩΩÊñá‰ª∂ÁöÑÂ§ßÂ∞è
  fileSize: number;
  totalBytes: number;
  totalBytesGreater: number;
  totalBytesLess: number;
}
// ‰∏ãËΩΩÊü•ËØ¢Êù°‰ª∂
// query: {} Êü•ËØ¢ÊâÄÊúâ
chrome.downloads.search(
  query: DownloadQuery,
  callback?: (res) => void,
)
```

```js
// background.js
chrome.downloads.search({
  limit: 100,
  orderBy: ['-startTime'],
}, (downloadItems) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÊêúÁ¥¢‰∏ãËΩΩÊñá‰ª∂', Date.now(), downloadItems);
});
```

#### open() ÊâìÂºÄÊñá‰ª∂
> ÊâìÂºÄÂ∑≤‰∏ãËΩΩÁöÑÊñá‰ª∂

```ts
chrome.downloads.open(
  downloadId: number,
  callback?: function,
)
```

#### pause() ÊöÇÂÅú‰∏ãËΩΩ
> ÊöÇÂÅú‰∏ãËΩΩ

```ts
chrome.downloads.pause(
  downloadId: number,
  callback?: function,
)
```

#### resume() ÊÅ¢Â§ç‰∏ãËΩΩ
> ÊÅ¢Â§ç‰∏ãËΩΩ

```ts
chrome.downloads.resume(
  downloadId: number,
  callback?: function,
)
```

#### cancel() ÂèñÊ∂à‰∏ãËΩΩ
> ÂèñÊ∂à‰∏ãËΩΩ

```ts
chrome.downloads.cancel(
  downloadId: number,
  callback?: function,
)
```

#### erase() Âà†Èô§‰∏ãËΩΩ
> Âà†Èô§‰∏ãËΩΩ

```ts
chrome.downloads.erase(
  query: DownloadQuery,
  callback?: function,
)
```

#### removeFile() Âà†Èô§Êñá‰ª∂
> Âà†Èô§Êñá‰ª∂

```ts
chrome.downloads.removeFile(
  downloadId: number,
  callback?: function,
)
```

#### acceptDanger() Êé•ÂèóÂç±Èô©
> Êé•ÂèóÂç±Èô©

```ts
chrome.downloads.acceptDanger(
  downloadId: number,
  callback?: function,
)
```

#### show() ÊòæÁ§∫‰∏ãËΩΩ
> ÊòæÁ§∫‰∏ãËΩΩ

```ts
chrome.downloads.show(
  downloadId: number,
  callback?: function,
)
```

#### getFileIcon() Ëé∑ÂèñÊñá‰ª∂ÂõæÊ†á
> Ëé∑ÂèñÊñá‰ª∂ÂõæÊ†á

```ts
chrome.downloads.getFileIcon(
  downloadId: number,
  options: {
    size: number,
  },
  callback?: function,
)
```


#### showDefaultFolder() ÊòæÁ§∫ÈªòËÆ§Êñá‰ª∂Â§π
> ÊòæÁ§∫ÈªòËÆ§Êñá‰ª∂Â§π

```ts
chrome.downloads.showDefaultFolder()
```

### ‰∫ã‰ª∂

#### onCreated ÂàõÂª∫‰∫ã‰ª∂
> ‰∏ãËΩΩÈ°πË¢´‰∏ãËΩΩÊó∂Ëß¶Âèë

```js
// background.js
chrome.downloads.onCreated.addListener((item) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÂàõÂª∫‰∫ã‰ª∂', Date.now(), item);
});
```

#### onErased Âà†Èô§‰∫ã‰ª∂
> ÂΩì‰∏ãËΩΩÈ°πË¢´Âà†Èô§Êó∂Ëß¶Âèë

```js
// background.js
chrome.downloads.onErased.addListener((item) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨Âà†Èô§‰∫ã‰ª∂', Date.now(), item);
});
```

#### onChanged Êõ¥Êñ∞‰∫ã‰ª∂
> ÂΩì‰∏ãËΩΩÈ°πÁöÑÁä∂ÊÄÅÂèëÁîüÂèòÂåñÊó∂Ëß¶ÂèëÔºå‰æãÂ¶Ç‰∏ãËΩΩÂÆåÊàê„ÄÅ‰∏ãËΩΩÂ§±Ë¥•„ÄÅ‰∏ãËΩΩÊöÇÂÅú„ÄÅ‰∏ãËΩΩÊÅ¢Â§ç„ÄÅ‰∏ãËΩΩÂèñÊ∂àÁ≠â

```js
// background.js
chrome.downloads.onChanged.addListener((item) => {
  //   {
  //     "error": {
  //         "current": "USER_CANCELED"
  //     },
  //     "id": 254,
  //     "state": {
  //         "current": "interrupted",
  //         "previous": "in_progress"
  //     }
  //    }
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨Êõ¥Êñ∞‰∫ã‰ª∂', Date.now(), item);
});
```

#### onDeterminingFilename ÂèñÊñá‰ª∂Âêç‰∫ã‰ª∂
> ÂΩì‰∏ãËΩΩÈ°πÁöÑÊñá‰ª∂ÂêçÈúÄË¶ÅÁ°ÆÂÆöÊó∂Ëß¶Âèë

```js
// background.js
chrome.downloads.onDeterminingFilename.addListener((item, suggest) => {
  // ÈªòËÆ§Ë¶ÜÁõñÂéüÊñá‰ª∂Âêç
  suggest({
    filename: item.filename,
    conflict_action: 'overwrite',
    conflictAction: 'overwrite'
  })
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÂèñÊñá‰ª∂Âêç‰∫ã‰ª∂', Date.now(), item, suggest);
});
```



## chrome.notifications ÈÄöÁü•
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/notifications)

> ÂÖÅËÆ∏Áî®Êà∑ÂàõÂª∫„ÄÅÊòæÁ§∫ÂíåÊõ¥Êñ∞ÈÄöÁü•

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "notifications"
],
```

:::tip  Êñ∞ÁâàÊú¨ChromeÊµèËßàÂô®Á¶ÅÁî®‰∫ÜMacOSÊú¨Êú∫ÈÄöÁü•
Ëß£ÂÜ≥ÊñπÊ°àÔºö 
1. Âú®ChromeÊµèËßàÂô®‰∏≠ËÆøÈóÆÂú∞ÂùÄÔºöchrome://flags„ÄÇ 
2. ÊêúÁ¥¢Ê†è‰∏≠ÊêúÁ¥¢ÔºönotificationsÔºåÊâæÂà∞ Enable system notifications ÈÄâÈ°πÔºåÂ∞ÜÂÖ∂ÈÄâÈ°πÂÄºÊîπ‰∏∫ Disabled
3. ÈáçÂêØÊµèËßàÂô®ÔºåÈóÆÈ¢òËß£ÂÜ≥„ÄÇ
:::


### ÊñπÊ≥ï

#### ÂàõÂª∫ÈÄöÁü•

```ts
type NotificationOptions = {
  // ÈÄöÁü•Á±ªÂûã
  type: 'basic' | 'image' | 'list' | 'progress';
  // ÈÄöÁü•ÂõæÊ†áÔºàÂèØ‰ª•ÊòØÂèë‰ª∂‰∫∫Â§¥ÂÉèÔºåÂ∫îÁî®ÂõæÊ†áÁ≠âÔºâ
  iconUrl: string;
  // ÈÄöÁü•Ê†áÈ¢ò
  title: string;
  // ÈÄöÁü•ÂÜÖÂÆπ
  message: string;
  // ÈÄöÁü•ÊåâÈíÆÔºåÊúÄÂ§ö‰∏§‰∏™
  buttons: {
    title: string;
  }[];
  // ÈÄöÁü•‰ºòÂÖàÁ∫ß(‰ªé -2 Âà∞ 2„ÄÇ-2 ÊòØÊúÄ‰Ωé‰ºòÂÖàÁ∫ß„ÄÇ2 ÊòØÊúÄÈ´òÁöÑ„ÄÇÈªòËÆ§ÂÄº‰∏∫Èõ∂)
  priority: number;

  // ‰ΩøÁî®ËæÉ‰ΩéÁ≤óÁªÜÂ≠ó‰ΩìÁöÑÂ§áÁî®ÈÄöÁü•ÂÜÖÂÆπ
  contextMessage: string;
  // ÈÄöÁü•ÂàóË°®(Mac OS X ‰∏äÁöÑÁî®Êà∑Âè™ËÉΩÁúãÂà∞Á¨¨‰∏ÄÈ°π)
  items: {
    title: string;
    message: string;
  }[];
  // ÊòæÁ§∫ÈÄöÁü•Êó∂‰∏çÂ∫îÂèëÂá∫Â£∞Èü≥ÊàñÊåØÂä®„ÄÇÈªòËÆ§ÂÄº‰∏∫ false„ÄÇ
  silent: boolean;
  // ÈÄöÁü•ÊòØÂê¶ÂèØÂÖ≥Èó≠
  requireInteraction: boolean;
  // ÈÄöÁü•ËøõÂ∫¶(‰ªé 0 Âà∞ 100)
  progress: number;
  // ÈÄöÁü•ËøõÂ∫¶Áä∂ÊÄÅ
  progressState: 'indeterminate' | 'error' | 'paused' | 'normal';
  // ‰∫ã‰ª∂Êó∂Èó¥Êà≥Ôºà‰ª•ms‰∏∫Âçï‰ΩçÔºâ
  eventTime: number;
}

chrome.notifications.create(
  notificationId: string,
  options: NotificationOptions,
  callback?: function,
)
```


#### clear() Ê∏ÖÈô§ÈÄöÁü•
> Ê∏ÖÈô§ÈÄöÁü•

```ts
chrome.notifications.clear(
  notificationId: string,
  callback?: function,
)
```


#### update() Êõ¥Êñ∞ÈÄöÁü•
> Êõ¥Êñ∞ÈÄöÁü•

```ts
chrome.notifications.update(
  notificationId: string,
  options: NotificationOptions,
  callback?: function,
)
```

#### getPermissionLevel() Ëé∑ÂèñÈÄöÁü•ÊùÉÈôê
> Ëé∑ÂèñÈÄöÁü•ÊùÉÈôê

```ts
chrome.notifications.getPermissionLevel(
  callback?: function,
)
```

#### getAll() Ëé∑ÂèñÊâÄÊúâÈÄöÁü•
> Ëé∑ÂèñÊâÄÊúâÈÄöÁü•

```ts
chrome.notifications.getAll(
  callback?: function,
)
```

### ‰∫ã‰ª∂

#### onClosed ÂÖ≥Èó≠‰∫ã‰ª∂
> ÂΩìÈÄöÁü•ÂÖ≥Èó≠Êó∂Ëß¶Âèë

```js
// background.js
chrome.notifications.onClosed.addListener((notificationId, byUser) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÂÖ≥Èó≠‰∫ã‰ª∂', Date.now(), notificationId, byUser);
});
```

#### onClicked ÁÇπÂáª‰∫ã‰ª∂
> ÂΩìÈÄöÁü•Ë¢´ÁÇπÂáªÊó∂Ëß¶Âèë

```js
// background.js
chrome.notifications.onClicked.addListener((notificationId) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÁÇπÂáª‰∫ã‰ª∂', Date.now(), notificationId);
});
```


#### onButtonClicked ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
> ÂΩìÈÄöÁü•ÊåâÈíÆË¢´ÁÇπÂáªÊó∂Ëß¶Âèë

```js
// background.js
chrome.notifications.onButtonClicked.addListener((notificationId, buttonIndex) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂', Date.now(), notificationId, buttonIndex);
});
```

#### onPermissionLevelChanged ÊùÉÈôêÁ∫ßÂà´ÂèòÊõ¥‰∫ã‰ª∂
> ÂΩìÈÄöÁü•ÊùÉÈôêÁ∫ßÂà´ÂèòÊõ¥Êó∂Ëß¶Âèë

```js
// background.js
chrome.notifications.onPermissionLevelChanged.addListener((level) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÊùÉÈôêÂèòÊõ¥‰∫ã‰ª∂', Date.now(), level);
});
```

#### onShowSettings ÊòæÁ§∫‰∫ã‰ª∂
> ÂΩìÈÄöÁü•ÊòæÁ§∫Êó∂Ëß¶Âèë

```js
// background.js
chrome.notifications.onShowSettings.addListener((notificationId) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÊòæÁ§∫‰∫ã‰ª∂', Date.now(), notificationId);
});
```

## chrome.offscreen Á¶ªÂ±è
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/offscreen/)
> ÂÖÅËÆ∏Áî®Êà∑Âú®ÂêéÂè∞Á∫øÁ®ã‰∏≠ÂàõÂª∫Á¶ªÂ±èÁîªÂ∏É

### ÊùÉÈôêËÆæÁΩÆ

```json
"permissions": [
  "offscreen"
],
```

### createDocument() ÂàõÂª∫Á¶ªÂ±èÊñáÊ°£
> ÂàõÂª∫Á¶ªÂ±èÊñáÊ°£

```ts
type Reason = (
  "TESTING" |              // ÊµãËØïÁõÆÁöÑ
  "AUDIO_PLAYBACK" |       // Êí≠ÊîæÈü≥È¢ë
  "IFRAME_SCRIPTING" |     // ÂµåÂÖ• iframe Âπ∂ÁºñÂÜôËÑöÊú¨
  "DOM_SCRAPING" |         // ÊäìÂèñ DOM ‰ª•ÊèêÂèñ‰ø°ÊÅØ
  "BLOBS" |                // ‰∏é Blob ÂØπË±°ÔºàÂåÖÊã¨ URL.createObjectURL() ÔºâËøõË°å‰∫§‰∫í
  "DOM_PARSER" |           // Ëß£Êûê DOM, new DomParser()
  "USER_MEDIA" |           // ‰∏éÊù•Ëá™Áî®Êà∑Â™í‰ΩìÁöÑÂ™í‰ΩìÊµÅËøõË°å‰∫§‰∫í  getUserMedia()
  "DISPLAY_MEDIA" |        // ‰∏éÊù•Ëá™ÊòæÁ§∫Â™í‰ΩìÁöÑÂ™í‰ΩìÊµÅËøõË°å‰∫§‰∫íÔºà‰æãÂ¶Ç getDisplayMedia() 
  "WEB_RTC" |              // RTC
  "CLIPBOARD" |            // Ââ™Ë¥¥Êùø
  "LOCAL_STORAGE" |        // Êú¨Âú∞Â≠òÂÇ®
  "WORKERS" |              // Web Workers
  "BATTERY_STATUS" |       // ÁîµÊ±†Áä∂ÊÄÅÔºånavigator.getBattery()
  "MATCH_MEDIA" |          // window.matchMedia
  "GEOLOCATION"            // Âú∞ÁêÜ‰ΩçÁΩÆ, navigator.geolocation()
);
type CreateParameters = {
  // ÂºÄÂèë‰∫∫ÂëòÊèê‰æõÁöÑÂ≠óÁ¨¶‰∏≤ÔºåÊõ¥ËØ¶ÁªÜÂú∞Ëß£Èáä‰∫ÜÂØπÂêéÂè∞‰∏ä‰∏ãÊñáÁöÑÈúÄÊ±Ç
  justification?: string;
  // Áî®‰∫éÂàõÂª∫Á¶ªÂ±èÊñáÊ°£ÁöÑÂéüÂõ†ÔºåÂàóÂá∫‰∫ÜÂ∫îÁî®Âú∫ÊôØ
  reasons?: Reason[];

  // Áõ∏ÂØπ‰∫éÂΩìÂâçÊñáÊ°£ÁöÑURL
  url: string;
}

chrome.offscreen.createDocument(parameters:  CreateParameters,callback?: function)
```

### closeDocument() ÂÖ≥Èó≠Á¶ªÂ±èÊñáÊ°£

```ts
chrome.offscreen.closeDocument(callback?: function)
```

### Á§∫‰æã

#### GEOÂÆö‰Ωç

```js
// background.js
chrome.action.onClicked.addListener(async () => {
  await chrome.offscreen.createDocument({
    url: '/offscreen.html',
    reasons: [
      chrome.offscreen.Reason.GEOLOCATION ||
        chrome.offscreen.Reason.DOM_SCRAPING
    ],
    justification: 'add justification for geolocation use here'
  });

  const geolocation = await chrome.runtime.sendMessage({
    type: 'get-geolocation',
    target: 'offscreen'
  });

  await chrome.offscreen.closeDocument();
  return geolocation;
});
```

```html
<!-- offscreen.html -->
<!DOCTYPE html>
<script src="offscreen.js"></script>
```

```js
// offscreen.js
chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.target !== 'offscreen') {
    return false;
  }

  if (message.type !== 'get-geolocation') {
    console.warn(`Unexpected message type received: '${message.type}'.`);
    return;
  }

  getGeolocation().then((geolocation) => {
    console.log('getGeolocation', geolocation);
    sendResponse(geolocation)
  });
  return true;
})

function clone(obj) {
  const copy = {};
  if (obj === null || !(obj instanceof Object)) {
    return obj;
  } else {
    for (const p in obj) {
      copy[p] = clone(obj[p]);
    }
  }
  return copy;
}

async function getGeolocation() {
  return new Promise((resolve, reject) => {
    navigator.geolocation.getCurrentPosition(
      (loc) => resolve(clone(loc)),
      (err) => reject(err)
    );
  });
}
```

#### Â§çÂà∂Á≤òË¥¥

```js
// background.js
chrome.action.onClicked.addListener(async () => {
  await chrome.offscreen.createDocument({
    url: 'offscreen.html',
    reasons: [chrome.offscreen.Reason.CLIPBOARD],
    justification: 'Write text to the clipboard.'
  });

  chrome.runtime.sendMessage({
    type: 'copy-data-to-clipboard',
    target: 'offscreen-doc',
    data: value
  });
});
```

```html
<!-- offscreen.html -->
<!DOCTYPE html>
<textarea id="text"></textarea>
<script src="offscreen.js"></script>
```

```js
// offscreen.js
chrome.runtime.onMessage.addListener(async (message) => {
  if (message.target !== 'offscreen-doc') {
    return;
  }

  switch (message.type) {
    case 'copy-data-to-clipboard':
      handleClipboardWrite(message.data);
      break;
    default:
      console.warn(`Unexpected message type received: '${message.type}'.`);
  }
});

const textEl = document.querySelector('#text');

async function handleClipboardWrite(data) {
  try {
    if (typeof data !== 'string') {
      throw new TypeError(
        `Value provided must be a 'string', got '${typeof data}'.`
      );
    }
    
    textEl.value = data;
    textEl.select();
    document.execCommand('copy');
  } finally {
    window.close();
  }
}
```


#### Ëß£ÊûêDOM

```js
// background.js
chrome.action.onClicked.addListener(async () => {
  await chrome.offscreen.createDocument({
    url: 'offscreen.html',
    reasons: [chrome.offscreen.Reason.DOM_PARSER],
    justification: 'Parse the DOM.'
  });

  const dom = await chrome.runtime.sendMessage({
    type: 'add-exclamationmarks-to-headings',
    target: 'offscreen',
    data: '<html><head></head><body><h1>Hello World</h1></body></html>'
  });

 chrome.offscreen.closeDocument();
});

chrome.runtime.onMessage.addListener(async (message) => {
  if (message.target !== 'background') {
    return;
  }

  switch (message.type) {
    case 'add-exclamationmarks-result':
      console.log('Received dom', message.data);
      chrome.offscreen.closeDocument();
      break;
    default:
      console.warn(`Unexpected message type received: '${message.type}'.`);
  }
});
```

```html
<!-- offscreen.html -->
<!DOCTYPE html>
<script src="offscreen.js"></script>
```

```js
// offscreen.js
chrome.runtime.onMessage.addListener(async (message) => {
  if (message.target !== 'offscreen') {
    return;
  }

  switch (message.type) {
    case 'add-exclamationmarks-to-headings':
      cconst parser = new DOMParser();
      const document = parser.parseFromString(htmlString, 'text/html');
      document.querySelectorAll('h1').forEach((heading) => (heading.textContent = heading.textContent + '!!!'));
      chrome.runtime.sendMessage({
        type: 'add-exclamationmarks-result',
        target: 'background',
        data: document.documentElement.outerHTML
      });
      break;
    default:
      console.warn(`Unexpected message type received: '${message.type}'.`);
  }
});
```

#### ÁΩëÈ°µÂΩïÂà∂

```js
// background.js
chrome.action.onClicked.addListener(async (tab) => {
  const existingContexts = await chrome.runtime.getContexts({});
  let recording = false;

  const offscreenDocument = existingContexts.find(
    (c) => c.contextType === 'OFFSCREEN_DOCUMENT'
  );

  // If an offscreen document is not already open, create one.
  if (!offscreenDocument) {
    // Create an offscreen document.
    await chrome.offscreen.createDocument({
      url: 'offscreen.html',
      reasons: ['USER_MEDIA'],
      justification: 'Recording from chrome.tabCapture API'
    });
  } else {
    recording = offscreenDocument.documentUrl.endsWith('#recording');
  }

  if (recording) {
    chrome.runtime.sendMessage({
      type: 'stop-recording',
      target: 'offscreen'
    });
    chrome.action.setIcon({ path: 'icons/not-recording.png' });
    return;
  }

  // Get a MediaStream for the active tab.
  const streamId = await chrome.tabCapture.getMediaStreamId({
    targetTabId: tab.id
  });

  // Send the stream ID to the offscreen document to start recording.
  chrome.runtime.sendMessage({
    type: 'start-recording',
    target: 'offscreen',
    data: streamId
  });

  chrome.action.setIcon({ path: '/icons/recording.png' });
});
```


```html
<!-- offscreen.html -->
<!DOCTYPE html>
<script src="offscreen.js"></script>
```

```js
// offscreen.js
chrome.runtime.onMessage.addListener(async (message) => {
  if (message.target === 'offscreen') {
    switch (message.type) {
      case 'start-recording':
        startRecording(message.data);
        break;
      case 'stop-recording':
        stopRecording();
        break;
      default:
        throw new Error('Unrecognized message:', message.type);
    }
  }
});

let recorder;
let data = [];

async function startRecording(streamId) {
  if (recorder?.state === 'recording') {
    throw new Error('Called startRecording while recording is in progress.');
  }

  const media = await navigator.mediaDevices.getUserMedia({
    audio: {
      mandatory: {
        chromeMediaSource: 'tab',
        chromeMediaSourceId: streamId
      }
    },
    video: {
      mandatory: {
        chromeMediaSource: 'tab',
        chromeMediaSourceId: streamId
      }
    }
  });

  const output = new AudioContext();
  const source = output.createMediaStreamSource(media);
  source.connect(output.destination);

  recorder = new MediaRecorder(media, { mimeType: 'video/webm' });
  recorder.ondataavailable = (event) => data.push(event.data);
  recorder.onstop = () => {
    const blob = new Blob(data, { type: 'video/webm' });
    window.open(URL.createObjectURL(blob), '_blank');

    recorder = undefined;
    data = [];
  };
  recorder.start();

  window.location.hash = 'recording';
}

async function stopRecording() {
  recorder.stop();

  recorder.stream.getTracks().forEach((t) => t.stop());

  window.location.hash = '';
}
```

## chrome.permissions ÊùÉÈôê
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/permissions)

> ÈíàÂØπÂ£∞ÊòéÁöÑÂèØÈÄâÊùÉÈôê(`optional_permissions`)Ôºõ ‚Äî‚Äî‚Äî‚Äî ËØ∑Ê±ÇÊéà‰∫àÊâ©Â±ïÁ®ãÂ∫èÊüê‰∫õÊùÉÈôê(`request`)
> ÈíàÂØπÂ∑≤Êéà‰∫àÁöÑÊùÉÈôê(`permissions`):
> 1. Êü•ËØ¢ÂΩìÂâçÊâ©Â±ïÁ®ãÂ∫èÊòØÂê¶ÂÖ∑ÊúâÊüê‰∫õÊùÉÈôê(`contains`)
> 2. ÁßªÈô§Â∑≤Êéà‰∫àÁöÑÊùÉÈôê(`remove`)ÔºõÁßªÈô§ÊâÄÊúâÂ∑≤Êéà‰∫àÁöÑÊùÉÈôê(`removeAll`)Ôºõ
> 3. ÁõëÂê¨ÊùÉÈôêÂèòÊõ¥(`onAdded`„ÄÅ`onRemoved`)

### ÊñπÊ≥ï

#### contains() Êü•ËØ¢ÊùÉÈôê
> Êü•ËØ¢ÂΩìÂâçÊâ©Â±ïÁ®ãÂ∫èÊòØÂê¶ÂÖ∑ÊúâÊüê‰∫õÊùÉÈôê

```ts
type Permissions = {
  permissions: string[];
  origins?: string[];
}
chrome.permissions.contains(
  permissions: Permissions,
  callback?: function,
)
```

#### request() ËØ∑Ê±ÇÊùÉÈôê
> ËØ∑Ê±ÇÊéà‰∫àÊâ©Â±ïÁ®ãÂ∫èÊüê‰∫õÊùÉÈôêÔºåÈúÄË¶ÅÂú®`manifest.json`‰∏≠Â£∞Êòé`optional_permissions`

```json
{
  "optional_permissions": [
    // ...
  ]
}
```

```ts
type Permissions = {
  permissions: string[];
  origins?: string[];
}
chrome.permissions.request(
  permissions: Permissions,
  callback?: function,
)
```

#### remove() ÁßªÈô§ÊùÉÈôê
> ÁßªÈô§Â∑≤Êéà‰∫àÁöÑÊùÉÈôê

```ts
type Permissions = {
  permissions: string[];
  origins?: string[];
}
chrome.permissions.remove(
  permissions: Permissions,
  callback?: function,
)
```

#### removeAll() ÁßªÈô§ÊâÄÊúâÊùÉÈôê
> ÁßªÈô§ÊâÄÊúâÂ∑≤Êéà‰∫àÁöÑÊùÉÈôê

```ts
chrome.permissions.removeAll(
  callback?: function,
)
```

#### getAll() Ëé∑ÂèñÊâÄÊúâÊùÉÈôê
> Ëé∑ÂèñÊâÄÊúâÂ∑≤Êéà‰∫àÁöÑÊùÉÈôê

```ts
chrome.permissions.getAll(
  callback?: function,
)
```


### ‰∫ã‰ª∂

#### onAdded Ê∑ªÂä†‰∫ã‰ª∂
> ÂΩìÊùÉÈôêË¢´Ê∑ªÂä†Êó∂Ëß¶Âèë

```js
// background.js
chrome.permissions.onAdded.addListener((permissions) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨Ê∑ªÂä†‰∫ã‰ª∂', Date.now(), permissions);
});
```

#### onRemoved ÁßªÈô§‰∫ã‰ª∂
> ÂΩìÊùÉÈôêË¢´ÁßªÈô§Êó∂Ëß¶Âèë

```js
// background.js
chrome.permissions.onRemoved.addListener((permissions) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÁõëÂê¨ÁßªÈô§‰∫ã‰ª∂', Date.now(), permissions);
});
```


## chrome.cookies cookie
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/cookies)

> ÂÖÅËÆ∏Áî®Êà∑ÂàõÂª∫„ÄÅËé∑Âèñ„ÄÅÂà†Èô§„ÄÅÊü•ËØ¢cookie

```json
"permissions": [
  "cookies"
]
```

### ÊñπÊ≥ï

#### Â¢û
```ts
chrome.cookies.set(
  details: object,
  callback?: function,
)
```

```js
chrome.cookies.set({
  url: 'https://www.baidu.com',
  name: 'name',
  value: 'value',
  domain: 'baidu.com',
  path: '/',
  secure: true,
  httpOnly: true,
  expirationDate: Date.now() + 1000 * 60 * 60 * 24 * 365 * 10,
}, (cookie) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÂàõÂª∫cookie', Date.now(), cookie);
});
```

#### Âà†
```ts
chrome.cookies.remove(
  details: object,
  callback?: function,
)
```

```js
chrome.cookies.remove({
  url: 'https://www.baidu.com',
  name: 'name',
}, (cookie) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Âà†Èô§cookie', Date.now(), cookie);
});
```

#### Êîπ
```ts
chrome.cookies.set(
  details: object,
  callback?: function,
)
```

```js
chrome.cookies.set({
  url: 'https://www.baidu.com',
  name: 'name',
  value: 'value',
  domain: 'baidu.com',
  path: '/',
  secure: true,
  httpOnly: true,
  expirationDate: Date.now() + 1000 * 60 * 60 * 24 * 365 * 10,
}, (cookie) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> ÂàõÂª∫cookie', Date.now(), cookie);
});
```

#### Êü•
```ts
chrome.cookies.get(
  details: object,
  callback?: function,
)
```

```js
chrome.cookies.get({
  url: 'https://www.baidu.com',
  name: 'name',
}, (cookie) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ëé∑Âèñcookie', Date.now(), cookie);
});

chrome.cookies.getAll({
  url: 'https://www.baidu.com',
}, (cookie) => {
  console.log('üçÑ  background: >>>>>>>>>>>>>>>>>> Ëé∑ÂèñÊâÄÊúâcookie', Date.now(), cookie);
});
```


## ÂÖ∂ÂÆÉ

### chrome.extension Êâ©Â±ïÂäüËÉΩ
> Ê≠§apiÂ§ßÂ§öÊï∞ÊñπÊ≥ïÈÉΩÂêàÂπ∂Âà∞`chrome.runtime`


## chrome.proxy ‰ª£ÁêÜ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/proxy/)
> ÂÖÅËÆ∏Áî®Êà∑ÈÖçÁΩÆÂíåÊéßÂà∂‰ª£ÁêÜËÆæÁΩÆ


### ÊùÉÈôêËÆæÁΩÆ

```json
{
  "permissions": [
    "proxy"
  ],
}
```

### ÊñπÊ≥ï

#### get() Ëé∑Âèñ‰ª£ÁêÜËÆæÁΩÆ
> Ëé∑Âèñ‰ª£ÁêÜËÆæÁΩÆ

```ts
chrome.proxy.settings.get(
  callback: function,
)
```

#### set() ËÆæÁΩÆ‰ª£ÁêÜËÆæÁΩÆ
> ËÆæÁΩÆ‰ª£ÁêÜËÆæÁΩÆ

```ts
chrome.proxy.settings.set(
  details: object,
  callback?: function,
)
```

#### clear() Ê∏ÖÈô§‰ª£ÁêÜËÆæÁΩÆ
> Ê∏ÖÈô§‰ª£ÁêÜËÆæÁΩÆ

```ts
chrome.proxy.settings.clear(
  details: object,
  callback?: function,
)
```


### chrome.printerProvider/printing/printingMetrics ÊâìÂç∞Êú∫Áõ∏ÂÖ≥
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/printerProvider)

### chrome.fontSetting ËÆæÁΩÆChromeÂ≠ó‰Ωì
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/fontSettings)

### chrome.commands Âø´Êç∑ÈîÆËÆæÁΩÆ‰∏éÁõëÂê¨
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/commands)

> ÂÖÅËÆ∏Áî®Êà∑ËÆæÁΩÆÂíåÁõëÂê¨ÊµèËßàÂô®ÂëΩ‰ª§

```json
"commands": {
  "toggle-feature-foo": {
    "suggested_key": {
      "default": "Ctrl+Shift+Y",
      "mac": "Command+Shift+Y"
    },
    "description": "Toggle feature foo"
  }
}
```

```js
// ÁõëÂê¨Âø´Êç∑ÈîÆ
chrome.commands.onCommand.addListener((command) => {
  console.log(`Command: ${command}`);
});
```

### chrome.contentSettings ÂÜÖÂÆπËÆæÁΩÆ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/contentSettings)

> ÂÖÅËÆ∏Áî®Êà∑ÊéßÂà∂ÁΩëÁ´ôÂÜÖÂÆπËÆæÁΩÆ

```json
"permissions": [
  "contentSettings"
]
```

### chrome.bookmarks‰π¶Á≠æ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/bookmarks)
> ÂÖÅËÆ∏Áî®Êà∑ÂàõÂª∫„ÄÅÁªÑÁªáÂíå‰ª•ÂÖ∂‰ªñÊñπÂºèÊìç‰Ωú‰π¶Á≠æ

```json
"permissions": [
  "bookmarks"
]
```

#### Â¢û
```ts
chrome.bookmarks.create(
  bookmark: CreateDetails,
  callback?: function,
)
```

```js
chrome.bookmarks.create(
  {
    'parentId': extensionsFolderId,
    'title': 'Extensions doc',
    'url': 'https://developer.chrome.com/docs/extensions',
  },
  function(newFolder) {
    console.log("added folder: " + newFolder.title);
  },
);
```

#### Âà†
```ts
chrome.bookmarks.remove(
  id: string,
  callback?: function,
)

// ÈÄíÂΩíÂà†Èô§‰π¶Á≠æÊñá‰ª∂Â§π
chrome.bookmarks.removeTree(
  id: string,
  callback?: function,
)
```


#### Êîπ
```ts
// ÁßªÂä®
chrome.bookmarks.move(
  id: string,
  destination: {
    index?: number, parentId?:string 
  },
  callback?: function,
)

// Êõ¥Êñ∞
chrome.bookmarks.update(
  id: string,
  changes: object,
  callback?: function,
)
```

#### Êü•
```ts
// Ëé∑ÂèñÂçï‰∏™
chrome.bookmarks.get(
  idOrIdList: string | string[],
  callback: function,
)

// Ëé∑ÂèñÊâÄÊúâ
chrome.bookmarks.getTree(
  callback: function,
)

// Ëé∑ÂèñÂ≠êËäÇÁÇπ
chrome.bookmarks.getChildren(
  id: string,
  callback: function,
)

// Ëé∑ÂèñÊúÄËøëÊ∑ªÂä†ÁöÑ‰π¶Á≠æ
chrome.bookmarks.getRecent(
  numberOfItems: number,
  callback: function,
)

// ÊêúÁ¥¢
chrome.bookmarks.search(
  query: string,
  callback: function,
)
```

#### ‰∫ã‰ª∂
```ts
// ÁõëÂê¨‰π¶Á≠æÂàõÂª∫‰∫ã‰ª∂
chrome.bookmarks.onCreated.addListener(function(id, bookmark) {
  console.log("created bookmark: " + bookmark.title);
});

// ÁõëÂê¨‰π¶Á≠æÁßªÂä®‰∫ã‰ª∂
chrome.bookmarks.onMoved.addListener(function(id, moveInfo) {
  console.log("moved bookmark: " + moveInfo.title);
});

// ÁõëÂê¨‰π¶Á≠æÊõ¥Êñ∞‰∫ã‰ª∂
chrome.bookmarks.onChanged.addListener(function(id, changeInfo) {
  console.log("changed bookmark: " + changeInfo.title);
});

// ÁõëÂê¨‰π¶Á≠æÂà†Èô§‰∫ã‰ª∂
chrome.bookmarks.onRemoved.addListener(function(id, removeInfo) {
  console.log("removed bookmark: " + removeInfo.title);
});

// ÁõëÂê¨‰π¶Á≠æÂØºÂÖ•‰∫ã‰ª∂
chrome.bookmarks.onImportBegan.addListener(function() {
  console.log("beginning import");
});

// ÁõëÂê¨‰π¶Á≠æÂØºÂÖ•ÂÆåÊàê‰∫ã‰ª∂
chrome.bookmarks.onImportEnded.addListener(function() {
  console.log("ending import");
});

// ÁõëÂê¨ÈáçÊñ∞ÊéíÂ∫è‰∫ã‰ª∂
chrome.bookmarks.onChildrenReordered.addListener(function(id, reorderInfo) {
  console.log("reordered bookmark: " + reorderInfo.title);
});
```

### chrome.audio Èü≥È¢ë
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/api/audio)

> ÂÖÅËÆ∏Áî®Êà∑Ëé∑ÂèñËøûÊé•Âà∞Á≥ªÁªüÁöÑÈü≥È¢ëËÆæÂ§á‰ø°ÊÅØ, ÂèØËÉΩÂèØ‰ª•ÂÅöÈü≥È¢ëÂàÜÁ¶ªÊéßÂà∂ÔºüÔºü

### chrome.browsingData ÊµèËßàÊï∞ÊçÆ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/browsingData)

> ÂÖÅËÆ∏Áî®Êà∑Âà†Èô§ÊµèËßàÂô®ÁöÑÂéÜÂè≤ËÆ∞ÂΩï„ÄÅ‰∏ãËΩΩËÆ∞ÂΩï„ÄÅÁºìÂ≠ò„ÄÅcookieÁ≠â

```js
// Âà†Èô§ÊµèËßàÂô®Êï∞ÊçÆ
chrome.browsingData.remove(
  { since: removal_start },
  {
    appcache: true,
    cache: true,
    cacheStorage: true,
    cookies: true,
    downloads: true,
    fileSystems: true,
    formData: true,
    history: true,
    indexedDB: true,
    localStorage: true,
    serverBoundCertificates: true,
    serviceWorkers: true,
    pluginData: true,
    passwords: true,
    webSQL: true
  }
);
```

### chrome.history ÂéÜÂè≤ËÆ∞ÂΩï
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/history)


### chrome.omnibox Âú∞ÂùÄÊ†è
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/omnibox)
![Âú∞ÂùÄÊ†è](https://developer.chrome.com/static/docs/extensions/reference/api/images/omnibox.png)

### chrome.identity Ë∫´‰ªΩÈ™åËØÅ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/identity)


### chrome.idle Á©∫Èó≤
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/idle)


### chrome.i18n ÂõΩÈôÖÂåñ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/i18n)


### chrome.certificateProvider ËØÅ‰π¶Êèê‰æõËÄÖ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/certificateProvider)

> ÂÖÅËÆ∏Áî®Êà∑ÁÆ°ÁêÜËØÅ‰π¶


### chrome.debugger Ë∞ÉËØïÂô®
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/debugger)

> ÂÖÅËÆ∏Áî®Êà∑ÁÆ°ÁêÜÊµèËßàÂô®Ë∞ÉËØïÂô®


### chrome.input.ime Ëá™ÂÆö‰πâËæìÂÖ•Ê≥ï
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/input_ime)

### chrome.gcm Google‰∫ëÊ∂àÊÅØ
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/gcm)

### chrome.readingList ÈòÖËØªÂàóË°®
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/readingList)
> Chrome 120 ÊµãËØïÁâà‰∏≠ÂèØÁî®

### chrome.search ÊêúÁ¥¢
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/search)

### chrome.sessions ‰ºöËØù
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/sessions)



### chrome.system.cpu Á≥ªÁªüCPU
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/system_cpu)

### chrome.system.memory Á≥ªÁªüÂÜÖÂ≠ò
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/system_memory)

### chrome.system.storage Á≥ªÁªüÂ≠òÂÇ®
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/system_storage)

### chrome.system.display Á≥ªÁªüÊòæÁ§∫
[ÂÆòÊñπÊñáÊ°£](https://developer.chrome.com/docs/extensions/reference/system_display)

